{"version":3,"sources":["Assets/Images/pikabook.png","Layout/Nav/Nav.js","Layout/Header/Header.js","Assets/Images/pikachu.png","Layout/Footer/Footer.js","API/logIn.js","Views/Login/Login.js","API/createAccount.js","Views/Registration/Registration.js","SharedFunctions/listProperties.js","SharedComponents/BookMini.js","API/fetchBooks.js","SharedFunctions/getPagination.js","SharedComponents/Pagination.js","Views/Search/Search.js","API/fetchUser.js","SharedFunctions/addBooksToList.js","SharedComponents/Book.js","SharedComponents/BookListItem.js","API/sendPoke.js","Views/User/PokeCreator.js","API/sendMessage.js","Views/User/MessageCreator.js","Views/User/User.js","Views/Me/Me.js","API/updateBook.js","Views/MeBooks/EditBook.js","API/deleteBook.js","Views/MeBooks/Book.js","API/addBook.js","Views/MeBooks/AddBook.js","Views/MeBooks/MeBooks.js","Views/Me/MeBaskets.js","Views/Conversations/ConversationRecap.js","Views/Conversations/Conversations.js","API/fetchConversations.js","API/updateConversation.js","Views/SingleConversation/SingleConversation.js","Views/Pokes/Poke.js","API/updatePoke.js","Views/Pokes/Pokes.js","API/createBasket.js","Views/Basket/BasketCreator.js","Views/Basket/Basket.js","Views/Error.js","API/fetchPokes.js","App.js","index.js"],"names":["Nav","setAccessToken","_id","loggedUser","loggedUsersPokes","loggedUsersConversations","newPokes","filter","poke","recipient","read","length","newMessages","conversation","messages","className","activeClassName","to","exact","onClick","Header","accessToken","src","logo","alt","Footer","pathname","target","pikachu","logIn","email","password","a","fetch","method","headers","Accept","body","JSON","stringify","res","ok","text","error","json","token","Login","useState","emailInput","setEmailInput","passwordInput","setPasswordInput","status","setStatus","handleInputChange","e","id","value","handleSubmit","preventDefault","onSubmit","type","placeholder","onChange","required","createAccount","name","location","created","Registration","usernameInput","setUsernameInput","locationInput","setLocationInput","creationStatus","setCreationStatus","history","useHistory","setTimeout","push","listProperties","list","map","singleProperty","index","join","BookMini","book","author","ownerId","bookId","searchMyBooks","searchBooks","searchUsersBooks","url","params","URLSearchParams","Authorization","books","getPagination","page","limit","min","max","item","Pagination","setPage","scrollTo","getMaxPageNumber","result","Math","ceil","handlePageChange","maxNumber","current","scrollIntoView","behavior","block","maxPageNumber","Search","searchTitle","setSearchTitle","searchLocation","setSearchLocation","searchAuthor","setSearchAuthor","searchGenre","setSearchGenre","setBooks","useRef","genres","otherUsersBooks","bookList","ref","fetchLoggedUser","fetchUser","fetchOtherUser","user","addBooksToList","chosenBooks","checked","newBook","find","Book","publisher","year","description","handleCheckboxChange","inputDisabled","disabled","some","BookListItem","sendPoke","PokeCreator","setPokeCreatorVisible","handleConfirm","booksId","sendMessage","content","message","MessageCreator","setMessageCreatorVisible","messageContent","setMessageContent","sentMessage","setSentMessage","User","useParams","setUser","setChosenBooks","pokeCreatorVisible","messageCreatorVisible","useLocation","useEffect","getBooks","chosenBookId","state","sort","bookOne","bookTwo","getUserData","console","log","handleSendPoke","Me","updateBook","bookBody","updated","EditBook","setEditBookVisible","bookData","setCreatorVisible","titleInput","setTitleInput","authorInput","setAuthorInput","genresInput","setGeneresInput","releaseDateInput","setReleaseDateInput","publisherInput","setPublisherInput","descriptionInput","setDescriptionInput","handleUpdate","authorListInput","split","genresListInput","deleteBook","deleted","data","creatorVisible","editBookVisible","handleEditBook","handleRemoval","addBook","added","AddBook","autorListInput","MeBooks","myBooks","setMyBooks","reverse","MeBaskets","ConversationRecap","interlocutors","interlocutor","lastMessage","date","Date","toLocaleString","sender","slice","isRead","Conversations","conversationsList","b","dateA","fetchConversations","conversations","fetchConversationByInterlocutor","interlocutorsId","updateConversation","Message","creationDate","SingleConversation","getLoggedUsersConversations","conversationsInterval","setMessages","prevMessages","messageInput","setMessageInput","conversationInterval","setLimit","messagesDiv","updateMessages","clearTimeout","getMessages","_","isEqual","clearInterval","interval","setInterval","scroll","scrollHeight","clientHeight","scrollToMyRef","messageList","PokeReceived","handleOnClick","PokeSent","Poke","updatePoke","Pokes","setLoggedUsersPokes","receivedPage","setReceivedPage","offeredPage","setOfferedPage","prevPokes","setPrevPokes","onPageLimit","scrollTo1","scrollTo2","updatedPokes","receivedPokes","offeredPokes","receivedPokesList","offeredPokesList","createBasket","targetUserID","booksOffered","booksRequested","BasketCreator","setBasketCreatorVisible","requestedBooksId","offeredBooksId","offeredBooksList","requestedBooksList","CreateBasket","offeredBooks","setOfferedBooks","basketCreatorVisible","chosenPage","setChosenPage","chosenScrollTo","myScrollTo","handleCreateBasket","chosenBooksList","myBooksList","Error","fetchPokes","pokes","App","setLoggedUser","setLoggedUsersConversations","pokesInterval","getLoggedUserData","getLoggedUsersPokes","getPokes","getConversations","basename","process","path","render","Basket","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.de3718c3.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/pikabook.d219f79b.png\";","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nconst Nav = ({\n  setAccessToken,\n  loggedUser: { _id },\n  loggedUsersPokes,\n  loggedUsersConversations,\n}) => {\n  const handleLogOut = () => {\n    setAccessToken(\"\");\n  };\n\n  const newPokes = () => {\n    const receivedPokes = loggedUsersPokes.filter(\n      (poke) => poke.recipient._id === _id\n    );\n    return receivedPokes.filter((poke) => !poke.read).length;\n  };\n\n  const newMessages = () => {\n    return loggedUsersConversations.filter(conversation => {\n      const { read, recipient } = conversation.messages[0];\n      return !read && recipient === _id;\n    }).length;\n  };\n\n  return (\n    <div className=\"nav\">\n      <NavLink className=\"nav-item\" activeClassName=\"is-active\" to=\"/search\">\n        <i className=\"fas fa-search\"></i>\n        <span>Search</span>\n      </NavLink>\n      <NavLink\n        className=\"nav-item\"\n        activeClassName=\"is-active\"\n        to=\"/me/conversations\"\n      >\n        <i className=\"fas fa-envelope\"></i>\n        <span>Messages</span>\n        {newMessages() > 0 && <div className=\"alert\">{newMessages()}</div>}\n      </NavLink>\n      <NavLink className=\"nav-item\" activeClassName=\"is-active\" to=\"/me/basket\">\n        <i className=\"fas fa-shopping-basket\"></i>\n        <span>Baskets</span>\n      </NavLink>\n      <NavLink className=\"nav-item\" activeClassName=\"is-active\" to=\"/me\" exact>\n        <i className=\"fas fa-user-circle\"></i>\n        <span>My profile</span>\n      </NavLink>\n      <NavLink className=\"nav-item\" activeClassName=\"is-active\" to=\"/me/books\">\n        <i className=\"fas fa-book\"></i>\n        <span>My books</span>\n      </NavLink>\n      <NavLink className=\"nav-item\" activeClassName=\"is-active\" to=\"/me/pokes\">\n        <div className=\"poke\">\n          {newPokes() > 0 && <div className=\"alert\">{newPokes()}</div>}\n        </div>\n      </NavLink>\n      <NavLink className=\"nav-item log-out\" to=\"/\" onClick={handleLogOut}>\n        <i className=\"fas fa-power-off\"></i>\n      </NavLink>\n    </div>\n  );\n};\n\nexport default Nav;\n","import React from \"react\";\nimport logo from \"../../Assets/Images/pikabook.png\";\nimport Nav from \"../Nav/Nav\";\n\nconst Header = ({\n  setAccessToken,\n  accessToken,\n  loggedUser,\n  loggedUsersPokes,\n  loggedUsersConversations\n}) => {\n  return (\n    <div className=\"header\">\n      <img className=\"img-logo\" src={logo} alt=\"Pikabook\" />\n      {accessToken && (\n        <Nav\n          setAccessToken={setAccessToken}\n          loggedUser={loggedUser}\n          loggedUsersPokes={loggedUsersPokes}\n          loggedUsersConversations={loggedUsersConversations}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Header;\n","export default __webpack_public_path__ + \"static/media/pikachu.8624571d.png\";","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport pikachu from \"../../Assets/Images/pikachu.png\";\n\nconst Footer = () => {\n  return (\n    <footer>\n      <div className=\"books\"></div>\n      <div className=\"about\">\n        <p>\n          Pikabook APP is for book lovers. Are you one of them? If so,{\" \"}\n          <span>pick a book</span> you want to read. Then suggest yours you have\n          already read. That's all. <span>Connect with other bookworms!</span>\n        </p>\n        <div className=\"github\">\n        Application made as part of the <b>CodersCamp2020</b> project.\n        <br />\n        <Link\n          to={{\n            pathname:\n              \"https://github.com/lukaszdutka/CodersCamp2020.Project.FullStack-Node-React.PikaBook-frontend\",\n          }}\n          target=\"_blank\"\n        >\n          Visit Github for more information.\n        </Link>\n      </div>\n      </div>\n      <div className=\"authors\">\n        <div>\n          <b>Created by Mangosteam</b>\n          <ul>\n            <li>Mentor: Łukasz Dutka</li>\n            <li>Aleksandra Cypko</li>\n            <li>Małgorzata Dziewit</li>\n            <li>Daria Dziubałtowska</li>\n            <li>Agata Ludwiczyńska</li>\n            <li>Mariusz Smarż</li>\n          </ul>\n        </div>\n        <img src={pikachu} alt=\"pikachu\" />\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;\n","const logIn = async (email, password) => {\n  let res = await fetch(\"https://pikabook.herokuapp.com/api/auth\", {\n    method: \"post\",\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { accessToken: res.token };\n  }\n};\n\nexport default logIn;\n","import { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport logIn from \"../../API/logIn\";\n\nconst Login = ({ setAccessToken }) => {\n  const [emailInput, setEmailInput] = useState(\"\");\n  const [passwordInput, setPasswordInput] = useState(\"\");\n  const [status, setStatus] = useState();\n\n  const handleInputChange = (e) => {\n    if (e.target.id === \"loginEmail\") return setEmailInput(e.target.value);\n    if (e.target.id === \"loginPassword\")\n      return setPasswordInput(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setStatus(\"Wait...\");\n    const res = await logIn(emailInput, passwordInput);\n    if (res.error) setStatus(res.error);\n    setEmailInput(\"\");\n    setPasswordInput(\"\");\n    if (res.accessToken) {\n      setAccessToken(res.accessToken);\n    } \n  };\n\n  return (\n    <div className=\"logInAndRegistration\">\n      <form onSubmit={handleSubmit}>\n        <h1>Log in</h1>\n        <input\n          className=\"textInputDark\"\n          type=\"email\"\n          id=\"loginEmail\"\n          placeholder=\"E-mail\"\n          value={emailInput}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <input\n          className=\"textInputDark\"\n          type=\"password\"\n          id=\"loginPassword\"\n          placeholder=\"Password\"\n          value={passwordInput}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <input type=\"submit\" value=\"Log in\" className=\"buttonDark\"></input>\n        <div className='status'>\n          {status === \"Wait...\" ? <div className=\"loader\"></div> : status}\n        </div>\n        <p>\n          <Link to=\"/registration\">CREATE A NEW ACCOUNT!</Link>\n        </p>\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n","export const createAccount = async (name, email, password, location) => {\n  let res = await fetch(\"https://pikabook.herokuapp.com/api/users\", {\n    method: \"post\",\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      name,\n      email,\n      password,\n      location,\n    }),\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { created: false, error: res };\n  } else {\n    res = await res.json();\n    return { created: true };\n  }\n};\n\nexport default createAccount;\n","import { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport createAccount from \"../../API/createAccount\"\n\nconst Registration = () => {\n  const [usernameInput, setUsernameInput] = useState(\"\");\n  const [emailInput, setEmailInput] = useState(\"\");\n  const [passwordInput, setPasswordInput] = useState(\"\");\n  const [locationInput, setLocationInput] = useState(\"\");\n  const [creationStatus, setCreationStatus] = useState();\n  const history = useHistory();\n\n  const handleInputChange = (e) => {\n    if (e.target.id === \"registerUsername\")\n      return setUsernameInput(e.target.value);\n    if (e.target.id === \"registerEmail\") return setEmailInput(e.target.value);\n    if (e.target.id === \"registerPassword\")\n      return setPasswordInput(e.target.value);\n    if (e.target.id === \"registerLocation\")\n      return setLocationInput(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    setCreationStatus(\"Request is being sent\");\n    e.preventDefault();\n    const res = await createAccount(\n      usernameInput,\n      emailInput,\n      passwordInput,\n      locationInput\n    );\n    res.error\n      ? setCreationStatus(res.error)\n      : setCreationStatus(\"Account successfully created\");\n    setUsernameInput(\"\");\n    setEmailInput(\"\");\n    setPasswordInput(\"\");\n    setLocationInput(\"\");\n    if (res.created) {\n      setTimeout(() => {\n        history.push(\"/\");\n      }, 2000);\n    }\n  };\n\n  return (\n    <div className=\"logInAndRegistration\"> \n      <form onSubmit={handleSubmit}>\n        <h1>Register</h1>\n        <input\n          type=\"text\"\n          className=\"textInputDark\"\n          id=\"registerUsername\"\n          placeholder=\"Name\"\n          value={usernameInput}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <input\n          type=\"email\"\n          className=\"textInputDark\"\n          id=\"registerEmail\"\n          placeholder=\"E-mail\"\n          value={emailInput}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <input\n          type=\"password\"\n          className=\"textInputDark\"\n          id=\"registerPassword\"\n          placeholder=\"Password\"\n          value={passwordInput}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <input\n          type=\"text\"\n          className=\"textInputDark\"\n          id=\"registerLocation\"\n          placeholder=\"Location\"\n          value={locationInput}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <input\n          type=\"submit\"\n          value=\"Create a new account\"\n          className=\"buttonDark\"\n        ></input>\n        <div className='status'>\n          {creationStatus === \"Request is being sent\" ? <div className=\"loader\"></div> : creationStatus}\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Registration;\n","const listProperties = (list) => {\n    return list.map((singleProperty, index) => {\n      if (index < list.length - 1) return singleProperty + \", \";\n      return singleProperty;\n    }).join(\"\");\n  };\n\nexport default listProperties","import { useHistory } from \"react-router-dom\";\nimport listProperties from \"../SharedFunctions/listProperties\";\n\nconst BookMini = ({ book: { name, author, ownerId, _id } }) => {\n  const history = useHistory();\n\n  const handleOnClick = (e) => {\n    history.push(`/user/${ownerId._id}`, {bookId: e.target.id});\n  };\n\n  return (\n    <div className=\"book\">\n      <div className=\"bookData\">\n        <h3>{name}</h3>\n        <p>{listProperties(author)}</p>\n      </div>\n      <div className=\"userData\">\n        <p>{ownerId.name}</p>\n        <p>{ownerId.location} {ownerId.location && <i className=\"fas fa-map-marker-alt\"> </i>}</p>\n      </div>\n      <input\n        className=\"buttonDark\"\n        type=\"button\"\n        value=\"User's profile\"\n        id={_id}\n        onClick={handleOnClick}\n      ></input>\n    </div>\n  );\n};\n\nexport default BookMini;\n","export const searchAllBooks = (params) => {\n  return searchBooks(\"https://pikabook.herokuapp.com/api/books?\", params);\n};\n\nexport const searchMyBooks = (accessToken) => {\n  return searchBooks(\n    \"https://pikabook.herokuapp.com/api/me/books\",\n    {},\n    accessToken\n  );\n};\n\nexport const searchUsersBooks = (id) => {\n  return searchBooks(`https://pikabook.herokuapp.com/api/users/${id}/books`);\n};\n\nexport const searchOneBook = async (id) => {\n  let res = await fetch(`https://pikabook.herokuapp.com/api/books/${id}`);\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { book: res };\n  }\n}\n\nconst searchBooks = async (url, params = {}, accessToken = '') => {\n  let res = await fetch(url + new URLSearchParams(params), {\n    method: \"get\",\n    headers: { Authorization: `Bearer ${accessToken}`}\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { books: [], error: res };\n  } else {\n    res = await res.json();\n    return { books: res };\n  }\n};\n","const getPagination = (page, limit, list) => {\n    const min = page * limit - limit;\n    const max = min + limit - 1;\n    return list.filter((item, index) => index >= min && index <= max);\n  };\n\nexport default getPagination","const Pagination = ({ page, setPage, list, limit, scrollTo }) => {\n\n  const getMaxPageNumber = () => {\n    const result = Math.ceil(list.length / limit);\n    if (result < 1) return 1;\n    return result;\n  };\n\n  const handlePageChange = (e, type) => {\n    const maxNumber = getMaxPageNumber(limit);\n    if (type === \"next\" && page < maxNumber) setPage(page + 1);\n    if (type === \"previous\" && page > 1) setPage(page - 1);\n    if (type === \"input\") setPage(e.target.value);\n    if (scrollTo) scrollTo.current.scrollIntoView({ behavior: 'smooth', block: 'start' })\n  };\n\n  const maxPageNumber = getMaxPageNumber(limit);\n\n  return (\n    <div className=\"pagination\">\n      {page > 1 && (\n        <button className=\"buttonArrow prev\" onClick={(e) => handlePageChange(e, \"previous\")}>\n          &#x2190;\n        </button>\n      )}\n      <span>Page </span>\n      <input\n        type=\"number\"\n        value={page}\n        min=\"1\"\n        max={maxPageNumber}\n        onChange={(e) => handlePageChange(e, \"input\")}\n      ></input>\n      <span> out of {maxPageNumber}</span>\n      {page < maxPageNumber && (\n        <button className=\"buttonArrow next\" onClick={(e) => handlePageChange(e, \"next\")}>&#x2192;</button>\n      )}\n    </div>\n  );\n};\n\nexport default Pagination;\n","import { useState, useRef } from \"react\";\nimport Book from \"../../SharedComponents/BookMini\";\nimport { searchAllBooks } from \"../../API/fetchBooks\";\nimport getPagination from \"../../SharedFunctions/getPagination\";\nimport Pagination from \"../../SharedComponents/Pagination\";\n\nconst Search = ({ loggedUser }) => {\n  const [searchTitle, setSearchTitle] = useState(\"\");\n  const [searchLocation, setSearchLocation] = useState(\"\");\n  const [searchAuthor, setSearchAuthor] = useState(\"\");\n  const [searchGenre, setSearchGenre] = useState(\"\");\n  const [books, setBooks] = useState([]);\n  const [status, setStatus] = useState(\"Let's start searching!\");\n  const [page, setPage] = useState(1);\n  const onPageLimit = 10;\n  const scrollTo = useRef();\n\n  const handleInputChange = (e) => {\n    if (e.target.id === \"searchTitle\") return setSearchTitle(e.target.value);\n    if (e.target.id === \"searchAuthor\") return setSearchAuthor(e.target.value);\n    if (e.target.id === \"searchGenre\") return setSearchGenre(e.target.value);\n    if (e.target.id === \"searchLocation\")\n      return setSearchLocation(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setStatus(\"Searching...\");\n    setPage(1);\n    const res = await searchAllBooks({\n      name: searchTitle,\n      location: searchLocation,\n      author: searchAuthor, \n      genres: searchGenre\n    });\n    if (res.error) setStatus(res.error);\n    const otherUsersBooks = res.books.filter(\n      (book) => book.ownerId._id !== loggedUser._id\n    );\n    setBooks(otherUsersBooks);\n    otherUsersBooks.length === 0\n      ? setStatus(\"No books found\")\n      : setStatus(`${otherUsersBooks.length} book(s) found`);\n  };\n\n  let bookList = getPagination(page, onPageLimit, books);\n  bookList = bookList.map((book) => <Book key={book._id} book={book} />);\n\n  return (\n    <div className=\"search\">\n      <div className=\"logInAndRegistration\">\n        <form onSubmit={handleSubmit}>\n          <input\n            className=\"textInputDark\"\n            type=\"text\"\n            id=\"searchTitle\"\n            placeholder=\"Book's title\"\n            value={searchTitle}\n            onChange={handleInputChange}\n          ></input>\n          <input\n            className=\"textInputDark\"\n            type=\"text\"\n            id=\"searchAuthor\"\n            placeholder=\"Book's author\"\n            value={searchAuthor}\n            onChange={handleInputChange}\n          ></input>\n          <input\n            className=\"textInputDark\"\n            type=\"text\"\n            id=\"searchGenre\"\n            placeholder=\"Book's genre\"\n            value={searchGenre}\n            onChange={handleInputChange}\n          ></input>\n          <input\n            className=\"textInputDark\"\n            type=\"text\"\n            id=\"searchLocation\"\n            placeholder=\"Location\"\n            value={searchLocation}\n            onChange={handleInputChange}\n          ></input>\n          <input className=\"buttonDark\" type=\"submit\" value=\"Search\"></input>\n          <div className=\"status\">\n            {status === \"Searching...\" ? (\n              <div className=\"loader\"></div>\n            ) : (\n              status\n            )}\n          </div>\n        </form>\n      </div>\n      <div ref={scrollTo}>\n        {books.length > onPageLimit && (\n          <Pagination\n            page={page}\n            setPage={setPage}\n            list={books}\n            limit={onPageLimit}\n            scrollTo={scrollTo}\n          />\n        )}\n        <div className=\"booksList\">{bookList}</div>\n        {books.length > onPageLimit && (\n          <Pagination\n            page={page}\n            setPage={setPage}\n            list={books}\n            limit={onPageLimit}\n            scrollTo={scrollTo}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Search;\n","export const fetchLoggedUser = (accessToken) => {\n  return fetchUser(\"https://pikabook.herokuapp.com/api/me\", accessToken);\n};\n\nexport const fetchOtherUser = (id) => {\n  return fetchUser(`https://pikabook.herokuapp.com/api/users/${id}`);\n};\n\nconst fetchUser = async (url, accessToken) => {\n  let res = await fetch(url, {\n    method: \"get\",\n    headers: {\n      Authorization: `Bearer ${accessToken}`\n    }\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { user: res };\n  }\n};\n","const addBooksToList = (e, books, chosenBooks) => {\n  if (!e.target.checked) {\n    return chosenBooks.filter((book) => book._id !== e.target.id);\n  }\n  if (e.target.checked) {\n    const newBook = books.find((book) => book._id === e.target.id);\n    return [...chosenBooks, newBook];\n  }\n};\n\nexport default addBooksToList;\n","import listProperties from \"../SharedFunctions/listProperties\";\n\nconst Book = ({\n  book: { _id, name, author, genres, publisher, year, description },\n  type,\n  handleCheckboxChange,\n  inputDisabled,\n  chosenBooks,\n}) => {\n  return (\n    <div className=\"bookContainer\">\n      <div className=\"bookInfo\">\n        <p className=\"bookTitle\">\n          <b>{name}</b>\n        </p>\n        {author.length > 0 && (\n          <p className=\"author\">\n            <b>Author:</b> {listProperties(author)}\n          </p>\n        )}\n        {publisher && (\n          <p className=\"publisher\">\n            <b>Publisher:</b> {publisher}\n          </p>\n        )}\n        {year && (\n          <p className=\"year\">\n            <b>Publication year:</b> {year}\n          </p>\n        )}\n        {genres.length > 0 && (\n          <p className=\"genres\">\n            <b>Genre:</b> {listProperties(genres)}\n          </p>\n        )}\n        {description && (\n          <p className=\"description\">\n            <b>Description:</b> {description}\n          </p>\n        )}\n      </div>\n      {type === \"checkbox\" && (\n        <input\n          className=\"checkboxStyled\"\n          type=\"checkbox\"\n          onChange={handleCheckboxChange}\n          id={_id}\n          disabled={inputDisabled}\n          checked={chosenBooks.some((book) =>\n            book._id === _id ? true : false\n          )}\n        ></input>\n      )}\n    </div>\n  );\n};\n\nexport default Book;\n","import listProperties from \"../SharedFunctions/listProperties\";\n\nconst BookListItem = ( { book: { name, author, publisher, year, _id } }) => {\n    return (\n      <li key={_id}>\n        <b>{name}</b>\n        {author.length > 0 && ` by ${listProperties(author)}`} {publisher}{\" \"}\n        {year}\n      </li>\n    );\n}\n \nexport default BookListItem;\n","export const sendPoke = async (accessToken, recipient, books) => {\n  let res = await fetch(\"https://pikabook.herokuapp.com/api/pokes\", {\n    method: \"post\",\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${accessToken}`,\n    },\n    body: JSON.stringify({\n      recipient,\n      books,\n    }),\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { created: true };\n  }\n};\n\nexport default sendPoke;\n","import { useState } from \"react\";\n\nimport BookListItem from \"../../SharedComponents/BookListItem\";\nimport sendPoke from \"../../API/sendPoke\";\n\nconst PokeCreator = ({\n  accessToken,\n  books,\n  recipient,\n  setPokeCreatorVisible,\n}) => {\n  const [status, setStatus] = useState(\"\");\n\n  const handleConfirm = async () => {\n    const booksId = books.map((book) => book._id);\n    const res = await sendPoke(accessToken, recipient._id, booksId);\n    if (res.error) setStatus(res.error);\n    if (res.created) setStatus(\"Poke successfully sent!\");\n  };\n\n  const handleCancel = () => {\n    setPokeCreatorVisible(false);\n  };\n\n  const bookList = books.map((book) => (\n    <BookListItem key={book._id} book={book} />\n  ));\n\n  return (\n    <div className=\"creatorContainer\" id=\"pokeCreator\">\n      {!status && (\n        <>\n          <p>\n            Invite {<b>{recipient.name}</b>} to browse your book collection and make\n            him/her know that you showed interest in the following books in\n            their possession:\n          </p>\n          <ul>{bookList.length > 0 ? bookList : \"None\"}</ul>\n        </>\n      )}\n      {status && (\n        <p>\n          <b>{status}</b>\n        </p>\n      )}\n      <div>\n        {!status && (\n          <button className=\"buttonDark\" onClick={handleConfirm}>\n            Confirm\n          </button>\n        )}\n        <button className=\"buttonDark\" onClick={handleCancel}>\n          {status ? \"Back\" : \"Cancel\"}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default PokeCreator;\n","export const sendMessage = async (accessToken, recipient, content) => {\n  let res = await fetch(\"https://pikabook.herokuapp.com/api/conversations\", {\n    method: \"post\",\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${accessToken}`,\n    },\n    body: JSON.stringify({\n      recipient,\n      content,\n    }),\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { created: false, error: res };\n  } else {\n    res = await res.json();\n    return { created: true, message: res.content };\n  }\n};\n\nexport default sendMessage;\n","import { useState } from \"react\";\n\nimport sendMessage from \"../../API/sendMessage\";\n\nconst MessageCreator = ({\n  accessToken,\n  recipient,\n  setMessageCreatorVisible,\n}) => {\n  const [messageContent, setMessageContent] = useState(\"\");\n  const [sentMessage, setSentMessage] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n\n  const handleTextareaChange = (e) => {\n    setMessageContent(e.target.value);\n  };\n\n  const handleConfirm = async () => {\n    const res = await sendMessage(accessToken, recipient._id, messageContent);\n    if (res.error) setStatus(res.error);\n    if (res.created) setStatus(\"Message successfully sent!\");\n    if (res.message) setSentMessage(res.message);\n  };\n\n  const handleCancel = () => {\n    setMessageCreatorVisible(false);\n  };\n\n  return (\n    <div className=\"creatorContainer\" id=\"messageCreator\">\n      <h1>Send a message to {recipient.name}</h1>\n      {sentMessage ? (\n        <>\n          <p className=\"sentMessage\">{sentMessage}</p>\n        </>\n      ) : (\n        <textarea\n          onChange={handleTextareaChange}\n          value={messageContent}\n        ></textarea>\n      )}\n      {status && (\n        <p>\n          <b>{status}</b>\n        </p>\n      )}\n      <div>\n        {!sentMessage && (\n          <button className=\"buttonDark\" onClick={handleConfirm}>\n            Confirm\n          </button>\n        )}\n        <button className=\"buttonDark\" onClick={handleCancel}>\n          {sentMessage ? \"Back\" : \"Cancel\"}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default MessageCreator;\n","import { useState, useEffect, useRef } from \"react\";\nimport { useParams, useHistory, useLocation } from \"react-router-dom\";\n\nimport { searchUsersBooks } from \"../../API/fetchBooks\";\nimport { fetchOtherUser } from \"../../API/fetchUser\";\nimport addBooksToList from \"../../SharedFunctions/addBooksToList\";\nimport Book from \"../../SharedComponents/Book\";\nimport PokeCreator from \"./PokeCreator\";\nimport MessageCreator from \"./MessageCreator\";\nimport getPagination from \"../../SharedFunctions/getPagination\";\nimport Pagination from \"../../SharedComponents/Pagination\";\n\nconst User = ({ accessToken }) => {\n  const { id } = useParams();\n  const [books, setBooks] = useState([]);\n  const [user, setUser] = useState(\"\");\n  const [chosenBooks, setChosenBooks] = useState([]);\n  const [pokeCreatorVisible, setPokeCreatorVisible] = useState(false);\n  const [messageCreatorVisible, setMessageCreatorVisible] = useState(false);\n  const [status, setStatus] = useState(\"\");\n  const [page, setPage] = useState(1);\n  const onPageLimit = 4;\n  const scrollTo = useRef();\n  const history = useHistory();\n  const location = useLocation();\n\n  useEffect(() => {\n    setStatus(\"Loading...\");\n    const getBooks = async () => {\n      const chosenBookId = location.state.bookId;\n      const res = await searchUsersBooks(id);\n      if (res.error) setStatus(res.error);\n      if (res.books) {\n        const bookList = res.books.sort((bookOne, bookTwo) => {\n          return bookOne._id === chosenBookId\n            ? -1\n            : bookTwo._id === chosenBookId\n            ? 1\n            : 0;\n        });\n        setBooks(bookList);\n        setStatus(\"\");\n      }\n    };\n    const getUserData = async () => {\n      const res = await fetchOtherUser(id);\n      if (res.error) console.log(res.error);\n      if (res.user) {\n        setUser(res.user);\n      }\n    };\n    getBooks();\n    getUserData();\n  }, [id, location.state.bookId]);\n\n  const handleSendMessage = () => {\n    !pokeCreatorVisible && setMessageCreatorVisible(true);\n  };\n\n  const handleSendPoke = async () => {\n    !messageCreatorVisible && setPokeCreatorVisible(true);\n  };\n\n  const handleCreateBasket = () => {\n    history.push(\"/basket\", { chosenBooks, user });\n  };\n\n  const handleCheckboxChange = (e) => {\n    setChosenBooks(addBooksToList(e, books, chosenBooks));\n  };\n\n  let bookList = getPagination(page, onPageLimit, books);\n  bookList = bookList.map((book) => (\n    <Book\n      key={book._id}\n      book={book}\n      type=\"checkbox\"\n      handleCheckboxChange={handleCheckboxChange}\n      inputDisabled={pokeCreatorVisible || messageCreatorVisible}\n      chosenBooks={chosenBooks}\n    />\n  ));\n\n  return (\n    <div className=\"userContainer\">\n      <div className=\"usersBooks\" ref={scrollTo}>\n        <h1 className=\"booksHeading\">Books</h1>\n        {status ? status : bookList}\n        {books.length > onPageLimit && (\n          <Pagination\n            page={page}\n            setPage={setPage}\n            list={books}\n            limit={onPageLimit}\n            scrollTo={scrollTo}\n          />\n        )}\n      </div>\n      <div className=\"userPanel\">\n        <div className=\"userInfo\">\n          <p>{user.name}</p>\n          {user.location && (\n            <p>\n              <i className=\"fas fa-map-marker-alt\"></i> {user.location}\n            </p>\n          )}\n          <button className=\"buttonDark\" onClick={handleSendMessage}>\n            Send message\n          </button>\n        </div>\n        <div className=\"userInfo\">\n          <button\n            className=\"buttonDark\"\n            onClick={handleCreateBasket}\n            disabled={chosenBooks.length < 1}\n          >\n            Add to basket\n          </button>\n          <p className=\"or\">OR</p>\n          <button className=\"buttonDark\" onClick={handleSendPoke}>\n            Create poke\n          </button>\n        </div>\n      </div>\n      {pokeCreatorVisible && (\n        <PokeCreator\n          accessToken={accessToken}\n          recipient={user}\n          books={chosenBooks}\n          setPokeCreatorVisible={setPokeCreatorVisible}\n        />\n      )}\n      {messageCreatorVisible && (\n        <MessageCreator\n          accessToken={accessToken}\n          recipient={user}\n          setMessageCreatorVisible={setMessageCreatorVisible}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default User;\n","const Me  = ({ loggedUser: { name, email, location } }) => {\n\n    return ( \n        <div className=\"meContainer\">\n            <h1>Account details</h1>\n            <p><b>Name:</b> {name}</p>\n            <p><b>E-mail:</b> {email}</p>\n            <p><b>Location:</b> {location ? location : \"-\"}</p>\n        </div>\n      );\n}\n \nexport default Me;","export const updateBook = async (\n    accessToken, \n    id,\n    name, \n    author, \n    genres, \n    year, \n    publisher, \n    description\n    ) => {\n    \n    const bookBody = {}\n    bookBody.name = name\n    if (author.length !== 0) { bookBody.author = author }\n    if (genres.length !== 0) { bookBody.genres = genres }\n    if (year) { bookBody.year = year }\n    if (publisher) { bookBody.publisher = publisher }\n    if (description) { bookBody.description = description }\n\n    let res = await fetch(`https://pikabook.herokuapp.com/api/books/${id}`, {\n      method: \"put\",\n      headers: {\n        Accept: \"application/json, text/plain, */*\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${accessToken}`,\n      },\n      body: JSON.stringify(bookBody),\n    });\n    if (!res.ok) {\n      res = await res.text();\n      return { error: res };\n    } else {\n      res = await res.json();\n      return { updated: true };\n    }\n  };\n  \n  export default updateBook;","import { useState } from \"react\";\nimport { updateBook } from \"../../API/updateBook\";\n\nconst EditBook = ({\n  accessToken,\n  setEditBookVisible,\n  bookData: { name, author, genres, year, publisher, description, _id },\n  getBooks,\n  setCreatorVisible,\n}) => {\n  const [titleInput, setTitleInput] = useState(name);\n  const [authorInput, setAuthorInput] = useState(author.join(\", \"));\n  const [genresInput, setGeneresInput] = useState(genres.join(\", \"));\n  const [releaseDateInput, setReleaseDateInput] = useState(year);\n  const [publisherInput, setPublisherInput] = useState(publisher);\n  const [descriptionInput, setDescriptionInput] = useState(description);\n  const [status, setStatus] = useState(\"\");\n\n  const handleInputChange = (e) => {\n    if (e.target.id === \"bookTitle\") return setTitleInput(e.target.value);\n    if (e.target.id === \"author\") return setAuthorInput(e.target.value);\n    if (e.target.id === \"genres\") return setGeneresInput(e.target.value);\n    if (e.target.id === \"releaseDate\")\n      return setReleaseDateInput(e.target.value);\n    if (e.target.id === \"publisher\") return setPublisherInput(e.target.value);\n    if (e.target.id === \"description\")\n      return setDescriptionInput(e.target.value);\n  };\n\n  const handleUpdate = async (e) => {\n    e.preventDefault();\n    let authorListInput = authorInput.split(\",\");\n    if (authorInput === \"\") {\n      authorListInput = [];\n    }\n    let genresListInput = genresInput.split(\",\");\n    if (genresInput === \"\") {\n      genresListInput = [];\n    }\n    const res = await updateBook(\n      accessToken,\n      _id,\n      titleInput,\n      authorListInput,\n      genresListInput,\n      releaseDateInput,\n      publisherInput,\n      descriptionInput\n    );\n    if (res.error) setStatus(res.error);\n    if (res.updated) {\n      setTitleInput(\"\");\n      setAuthorInput(\"\");\n      setGeneresInput(\"\");\n      setReleaseDateInput(\"\");\n      setPublisherInput(\"\");\n      setDescriptionInput(\"\");\n      getBooks(accessToken);\n      setCreatorVisible(false);\n      setEditBookVisible(false);\n    }\n  };\n\n  const handleCancel = () => {\n    setCreatorVisible(false);\n    setEditBookVisible(false);\n  };\n\n  return (\n    <div className=\"creatorContainer\" id=\"editBookCreator\">\n      <form className=\"bookForm\" onSubmit={handleUpdate}>\n        <h1>Edit book</h1>\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"bookTitle\"\n          placeholder={\"Book's title\"}\n          value={titleInput}\n          onChange={handleInputChange}\n          required\n        />\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"author\"\n          placeholder=\"Author\"\n          value={authorInput}\n          onChange={handleInputChange}\n        />\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"genres\"\n          placeholder=\"Genres\"\n          value={genresInput}\n          onChange={handleInputChange}\n        />\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"releaseDate\"\n          placeholder=\"Release date\"\n          value={releaseDateInput}\n          onChange={handleInputChange}\n        />\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"publisher\"\n          placeholder=\"Publisher\"\n          value={publisherInput}\n          onChange={handleInputChange}\n        />\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"description\"\n          placeholder=\"Description\"\n          value={descriptionInput}\n          onChange={handleInputChange}\n        />\n        <div>\n          <input className=\"buttonDark\" type=\"submit\" value=\"Update\" />\n          <button className=\"buttonDark\" onClick={handleCancel}>\n            Cancel\n          </button>\n        </div>\n      </form>\n      {status && <div className=\"status\">{status}</div>}\n    </div>\n  );\n};\n\nexport default EditBook;\n","export const deleteBook = async (accessToken, id) => {\n    let res = await fetch(`https://pikabook.herokuapp.com/api/books/${id}`, {\n      method: \"delete\",\n      headers: {\n        Accept: \"application/json, text/plain, */*\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${accessToken}`,\n      },\n    });\n    if (!res.ok) {\n      res = await res.text();\n      return { error: res };\n    } else {\n      res = await res.json();\n      return { deleted: true };\n    }\n  };\n  \n  export default deleteBook;","import { useState } from \"react\";\nimport EditBook from \"./EditBook\";\nimport listProperties from \"../../SharedFunctions/listProperties\";\nimport { deleteBook } from \"../../API/deleteBook\";\n\nconst Book = ({\n  accessToken,\n  data,\n  getBooks,\n  creatorVisible,\n  setCreatorVisible,\n}) => {\n  const { name, author, genres, year, publisher, description, _id } = data;\n  const [editBookVisible, setEditBookVisible] = useState(false);\n  const [status, setStatus] = useState();\n\n  const handleEditBook = async () => {\n    setCreatorVisible(true);\n    setEditBookVisible(true);\n  };\n\n  const handleRemoval = async (e) => {\n    setStatus(\"Request...\");\n    e.preventDefault();\n    const res = await deleteBook(accessToken, _id);\n    if (res.error) setStatus(res.error);\n    if (res.deleted) setStatus(\"Book deleted\");\n    getBooks(accessToken);\n  };\n\n  return (\n    <div className=\"bookContainer\">\n      <div className=\"bookInfo\">\n        <p className=\"bookTitle\">\n          <b>{name}</b>\n        </p>\n        {author.length > 0 && (\n          <p className=\"author\">\n            <b>Author:</b> {listProperties(author)}\n          </p>\n        )}\n        {publisher && (\n          <p className=\"publisher\">\n            <b>Publisher:</b> {publisher}\n          </p>\n        )}\n        {year && (\n          <p className=\"year\">\n            <b>Publication year:</b> {year}\n          </p>\n        )}\n        {genres.length > 0 && (\n          <p className=\"genres\">\n            <b>Genre:</b> {listProperties(genres)}\n          </p>\n        )}\n        {description && (\n          <p className=\"description\">\n            <b>Description:</b> {description}\n          </p>\n        )}\n        <div className=\"meBooksButtons\">\n          <button className=\"buttonDark\" onClick={handleRemoval} disabled={creatorVisible}>\n            Delete\n          </button>\n          <button className=\"buttonDark\" onClick={handleEditBook} disabled={creatorVisible}>\n            Edit\n          </button>\n        </div>\n        {status && (\n          <div className=\"status\">\n            {status === \"Request...\" ? <div className=\"loader\"></div> : status}\n          </div>\n        )}\n        {editBookVisible && (\n          <EditBook\n            accessToken={accessToken}\n            setEditBookVisible={setEditBookVisible}\n            bookData={data}\n            getBooks={getBooks}\n            setCreatorVisible={setCreatorVisible}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Book;\n","export const addBook = async (\n  accessToken, \n  name, \n  author, \n  genres, \n  year, \n  publisher, \n  description\n  ) => {\n    const bookBody = {}\n    bookBody.name = name\n    if (author.length !== 0) { bookBody.author = author }\n    if (genres.length !== 0) { bookBody.genres = genres }\n    if (year) { bookBody.year = year }\n    if (publisher) { bookBody.publisher = publisher }\n    if (description) { bookBody.description = description }\n\n    let res = await fetch(\"https://pikabook.herokuapp.com/api/books\", {\n      method: \"post\",\n      headers: {\n        Accept: \"application/json, text/plain, */*\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${accessToken}`\n      },\n      body: JSON.stringify(bookBody),\n    });\n    if (!res.ok) {\n      res = await res.text();\n      return { added: false, error: res };\n    } else {\n      res = await res.json();\n      return { added: true };\n    }\n};","import { useState } from \"react\";\nimport { addBook } from \"../../API/addBook\";\n\nconst AddBook = ({ accessToken, getBooks, creatorVisible }) => {\n  const [titleInput, setTitleInput] = useState(\"\");\n  const [authorInput, setAuthorInput] = useState(\"\");\n  const [genresInput, setGeneresInput] = useState(\"\");\n  const [releaseDateInput, setReleaseDateInput] = useState(\"\");\n  const [publisherInput, setPublisherInput] = useState(\"\");\n  const [descriptionInput, setDescriptionInput] = useState(\"\");\n  const [status, setStatus] = useState();\n\n  const handleInputChange = (e) => {\n    if (e.target.id === \"bookTitle\") return setTitleInput(e.target.value);\n    if (e.target.id === \"author\") return setAuthorInput(e.target.value);\n    if (e.target.id === \"genres\") return setGeneresInput(e.target.value);\n    if (e.target.id === \"releaseDate\")\n      return setReleaseDateInput(e.target.value);\n    if (e.target.id === \"publisher\") return setPublisherInput(e.target.value);\n    if (e.target.id === \"description\")\n      return setDescriptionInput(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    setStatus(\"Request...\");\n    e.preventDefault();\n    let autorListInput = authorInput.split(\",\");\n    if (authorInput === \"\") {\n      autorListInput = [];\n    }\n    let genresListInput = genresInput.split(\",\");\n    if (genresInput === \"\") {\n      genresListInput = [];\n    }\n    const res = await addBook(\n      accessToken,\n      titleInput,\n      autorListInput,\n      genresListInput,\n      releaseDateInput,\n      publisherInput,\n      descriptionInput\n    );\n    if (res.error) setStatus(res.error);\n    if (res.added) {\n      setStatus(\"Book successfully added\");\n    }\n    setTitleInput(\"\");\n    setAuthorInput(\"\");\n    setGeneresInput(\"\");\n    setReleaseDateInput(\"\");\n    setPublisherInput(\"\");\n    setDescriptionInput(\"\");\n    getBooks(accessToken);\n  };\n\n  return (\n    <div className=\"meAddBook\">\n      <h1 className=\"booksHeading\">Add a new book</h1>\n      <form className=\"bookForm\" onSubmit={handleSubmit}>\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"bookTitle\"\n          placeholder=\"Book's title\"\n          value={titleInput}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"author\"\n          placeholder=\"Author\"\n          value={authorInput}\n          onChange={handleInputChange}\n        ></input>\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"genres\"\n          placeholder=\"Genres\"\n          value={genresInput}\n          onChange={handleInputChange}\n        ></input>\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"releaseDate\"\n          placeholder=\"Release date\"\n          value={releaseDateInput}\n          onChange={handleInputChange}\n        ></input>\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"publisher\"\n          placeholder=\"Publisher\"\n          value={publisherInput}\n          onChange={handleInputChange}\n        ></input>\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"description\"\n          placeholder=\"Description\"\n          value={descriptionInput}\n          onChange={handleInputChange}\n        ></input>\n        <input type=\"submit\" value=\"Add\" className=\"buttonDark\" disabled={creatorVisible}></input>\n        {status && (\n          <div className=\"status\">\n            {status === \"Request...\" ? <div className=\"loader\"></div> : status}\n          </div>\n        )}\n      </form>\n    </div>\n  );\n};\n\nexport default AddBook;\n","import { useState, useRef, useEffect } from \"react\";\nimport Book from \"./Book\";\nimport AddBook from \"./AddBook\";\nimport Pagination from \"../../SharedComponents/Pagination\";\nimport { searchMyBooks } from \"../../API/fetchBooks\";\nimport getPagination from \"../../SharedFunctions/getPagination\";\n\nconst MeBooks = ({ accessToken }) => {\n  const [myBooks, setMyBooks] = useState([]);\n  const [status, setStatus] = useState(\"Loading...\");\n  const [page, setPage] = useState(1);\n  const [creatorVisible, setCreatorVisible] = useState(false);\n  const onPageLimit = 10;\n  const scrollTo = useRef();\n\n  const getBooks = async (accessToken) => {\n    const res = await searchMyBooks(accessToken);\n    if (res.error) {\n      console.log(res.error);\n      setStatus(\"No books found.\");\n    }\n    if (res.books) {\n      setMyBooks(res.books.reverse());\n      setStatus(\"\");\n    }\n  };\n\n  useEffect(() => {\n    getBooks(accessToken);\n  }, [accessToken]);\n\n  let bookList = getPagination(page, onPageLimit, myBooks);\n  bookList = bookList.map((book) => (\n    <Book\n      key={book._id}\n      accessToken={accessToken}\n      data={book}\n      getBooks={getBooks}\n      creatorVisible={creatorVisible}\n      setCreatorVisible={setCreatorVisible}\n    />\n  ));\n\n  return (\n    <div className=\"meBooksContainer\">\n      <div className=\"meBooks\" ref={scrollTo}>\n        <h1 className=\"booksHeading\">My books</h1>\n        {bookList.length > 0 && bookList}\n        {status && (\n          <div className=\"status\">\n            {status === \"Loading...\" ? <div className=\"loader\"></div> : status}\n          </div>\n        )}\n        {myBooks.length > onPageLimit && (\n          <Pagination\n            page={page}\n            setPage={setPage}\n            list={myBooks}\n            limit={onPageLimit}\n            scrollTo={scrollTo}\n          />\n        )}\n      </div>\n      <AddBook\n        accessToken={accessToken}\n        getBooks={getBooks}\n        creatorVisible={creatorVisible}\n      ></AddBook>\n    </div>\n  );\n};\n\nexport default MeBooks;\n","import React from 'react'\n\nconst MeBaskets  = () => {\n    return ( \n        <div>\n            Me_Baskets\n        </div>\n      );\n}\n \nexport default MeBaskets;","import { useHistory } from \"react-router-dom\";\n\nconst ConversationRecap = ({\n  conversation: { interlocutors, messages },\n  loggedUser,\n}) => {\n  const history = useHistory();\n  const interlocutor = interlocutors.find(\n    (interlocutor) => interlocutor._id !== loggedUser._id\n  );\n  const lastMessage = messages[0];\n  const date = new Date(lastMessage.date).toLocaleString();\n  const sender =\n    lastMessage.sender === interlocutor._id ? interlocutor.name : \"You\";\n  const content = lastMessage.content.split(\"\").slice(0, 9).join(\"\");\n\n  const openConversation = () => {\n    history.push(`/me/conversations/conversation`, { interlocutor });\n  };\n\n  const isRead = !lastMessage.read && lastMessage.recipient === loggedUser._id;\n\n  return (\n    <div className={isRead ? \"conversationContainer newMessage\" : \"conversationContainer\"}>\n      <div>\n        <b>{interlocutor.name}</b>\n      </div>\n      <div>{date}</div>\n      <div>\n        <b>{sender}</b> wrote:{\" \"}\n        {content === lastMessage.content ? content : `${content}...`}\n      </div>\n      <button className=\"buttonDark\" onClick={openConversation}>Go to conversation</button>\n    </div>\n  );\n};\n\nexport default ConversationRecap;\n","import { useState, useRef } from \"react\";\n\nimport ConversationRecap from \"./ConversationRecap\";\nimport getPagination from \"../../SharedFunctions/getPagination\";\nimport Pagination from \"../../SharedComponents/Pagination\";\n\nconst Conversations = ({\n  loggedUser,\n  loggedUsersConversations,\n}) => {\n\n  const [page, setPage] = useState(1);\n  const onPageLimit = 10;\n  const scrollTo = useRef();\n\n  let conversationsList = loggedUsersConversations.sort((a,b) => {\n    const dateA = new Date(a.messages[0].date);\n    const dateB = new Date(b.messages[0].date);\n    return dateB - dateA;\n  });\n  conversationsList = getPagination(page, onPageLimit, conversationsList);\n  conversationsList = conversationsList.map((conversation) => {\n    return (\n      <ConversationRecap\n        key={conversation._id}\n        conversation={conversation}\n        loggedUser={loggedUser}\n      />\n    );\n  });\n\n  return (\n    <div className=\"conversationsContainer\">\n      <h1>My conversations</h1>\n      <div ref={scrollTo}>\n        {loggedUsersConversations.length > onPageLimit && (\n          <Pagination\n            page={page}\n            setPage={setPage}\n            list={loggedUsersConversations}\n            limit={onPageLimit}\n            scrollTo={scrollTo}\n          />\n        )}\n        </div>\n      <div>{conversationsList}</div>\n      {loggedUsersConversations.length > onPageLimit && (\n          <Pagination\n            page={page}\n            setPage={setPage}\n            list={loggedUsersConversations}\n            limit={onPageLimit}\n            scrollTo={scrollTo}\n          />\n        )}\n    </div>\n  );\n};\n\nexport default Conversations;\n","export const fetchConversations = async (accessToken) => {\n  let res = await fetch(\"https://pikabook.herokuapp.com/api/me/conversations\", {\n    method: \"get\",\n    headers: { Authorization: `Bearer ${accessToken}` },\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { conversations: res };\n  }\n};\n\nexport const fetchConversationByInterlocutor = async (\n  accessToken,\n  interlocutorsId,\n  params\n) => {\n  let res = await fetch(\n    `https://pikabook.herokuapp.com/api/me/conversations/${interlocutorsId}?` +\n      new URLSearchParams(params),\n    {\n      method: \"get\",\n      headers: { Authorization: `Bearer ${accessToken}` },\n    }\n  );\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { conversation: res };\n  }\n};\n","export const updateConversation = async (accessToken, id) => {\n    let res = await fetch(`https://pikabook.herokuapp.com/api/conversations/${id}`, {\n      method: \"put\",\n      headers: {\n        Accept: \"application/json, text/plain, */*\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${accessToken}`,\n      },\n    });\n    if (!res.ok) {\n      res = await res.text();\n      return { error: res };\n    } else {\n      res = await res.json();\n      return { updated: true };\n    }\n  };\n  \n  export default updateConversation;\n  ","import { useLocation, useHistory } from \"react-router-dom\";\nimport { useState, useEffect, useRef } from \"react\";\nimport _ from \"lodash\";\n\nimport { fetchConversationByInterlocutor } from \"../../API/fetchConversations\";\nimport { updateConversation } from \"../../API/updateConversation\";\nimport sendMessage from \"../../API/sendMessage\";\n\nconst Message = ({ message: { sender, content, date }, interlocutor }) => {\n  const creationDate = new Date(date).toLocaleString();\n  const name = interlocutor._id === sender ? `${interlocutor.name}:` : \"You:\";\n  return (\n    <div className={name === \"You:\" ? \"yourMessage\" : \"interlocutorsMessage\"}>\n      <div className=\"date\">{creationDate}</div>\n      <div className=\"message\">\n        <div>{name}</div>\n        <div>{content}</div>\n      </div>\n    </div>\n  );\n};\n\nconst SingleConversation = ({\n  accessToken,\n  getLoggedUsersConversations,\n  conversationsInterval,\n}) => {\n  const location = useLocation();\n  const history = useHistory();\n  const interlocutor = location.state.interlocutor;\n  const [messages, setMessages] = useState([]);\n  const prevMessages = useRef();\n  const [messageInput, setMessageInput] = useState(\"\");\n  const conversationInterval = useRef();\n  const [limit, setLimit] = useState(10);\n  const [status, setStatus] = useState(\"\");\n  const messagesDiv = useRef();\n\n  useEffect(() => {\n    const updateMessages = async (conversation) => {\n      if (conversation.some((message) => !message.read))\n        await updateConversation(accessToken, interlocutor._id);\n      clearTimeout(conversationsInterval.current);\n      getLoggedUsersConversations(accessToken);\n    };\n    const getMessages = async () => {\n      setStatus(\"Loading...\");\n      prevMessages.current = messages;\n      const res = await fetchConversationByInterlocutor(\n        accessToken,\n        interlocutor._id,\n        { limit }\n      );\n      if (res.error) setStatus(res.error);\n      const newMessages = res.conversation.messages.reverse();\n      if (!_.isEqual(newMessages, prevMessages.current)) {\n        setMessages(newMessages);\n        updateMessages(newMessages);\n      }\n    };\n    clearInterval(conversationInterval.current);\n    getMessages();\n    const interval = setInterval(async () => getMessages(), 1000);\n    conversationInterval.current = interval;\n    return () => clearInterval(conversationInterval.current);\n  }, [\n    accessToken,\n    interlocutor._id,\n    limit,\n    messages,\n    getLoggedUsersConversations,\n    conversationsInterval,\n  ]);\n\n  useEffect(() => {\n    const scrollTo = messagesDiv.current;\n    const scrollToMyRef = () => {\n      const scroll = scrollTo.scrollHeight - scrollTo.clientHeight;\n      scrollTo.scrollTo(0, scroll);\n    };\n    scrollToMyRef();\n  }, [messages]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const res = await sendMessage(accessToken, interlocutor._id, messageInput);\n    if (res.error) setStatus(res.error);\n    setMessageInput(\"\");\n  };\n\n  const handleChange = (e) => {\n    setMessageInput(e.target.value);\n  };\n\n  const handleLoadMore = (e) => {\n    setLimit(limit + 10);\n  };\n\n  const handleExit = () => {\n    history.push(\"/me/conversations\");\n  };\n\n  const messageList = messages.map((message) => (\n    <Message key={message._id} message={message} interlocutor={interlocutor} />\n  ));\n\n  return (\n    <div className=\"singleConversationContainer\">\n      <div className=\"exit\" onClick={handleExit}>&#10006;</div>\n      <button className=\"buttonDark loadMore\" onClick={handleLoadMore}>&#x2191;</button>\n      <div className=\"messagesList\" ref={messagesDiv}>\n        {messages.length === 0 ? ( <div className=\"status\"> {status === \"Loading...\" ? ( <div className=\"loader\"></div> ) : ( status )} </div> ) : messageList}\n      </div>\n      <form onSubmit={handleSubmit}>\n        <textarea onChange={handleChange} value={messageInput}></textarea>\n        <input className=\"buttonDark\" type=\"submit\" value=\"Send\"></input>\n      </form>\n    </div>\n  );\n};\n\nexport default SingleConversation;\n","import { useHistory } from \"react-router-dom\";\n\nimport BookListItem from \"../../SharedComponents/BookListItem\";\n\nconst PokeReceived = ({ bookList, creationDate, sender, read, handleOnClick }) => {\n  return (\n    <div className={read ? \"poke\" : \"newPoke poke\"}>\n      {bookList.length > 0 ? (\n        <>\n          <p>\n            On {creationDate} <b>{sender.name}</b> showed interest in the\n            following books in your collection:\n          </p>\n          <ul>{bookList}</ul>\n          {/* <p>and invited you to browse his/hers collection.</p>{\" \"} */}\n        </>\n      ) : (\n        <p>\n          On {creationDate} <b>{sender.name}</b> showed interest in your\n          collection. {/*and invited you to browse his/hers collection*/}\n        </p>\n      )}\n      <button className=\"buttonDark\" onClick={handleOnClick}>\n        Visit <b>{sender.name}</b>'s profile\n      </button>\n    </div>\n  );\n};\n\nconst PokeSent = ({\n  bookList,\n  creationDate,\n  recipient,\n  handleOnClick,\n}) => {\n  return (\n    <div className=\"poke\" >\n      {bookList.length > 0 ? (\n        <>\n          <p>\n            On {creationDate} you showed interest in the following books in{\" \"}\n            <b>{recipient.name}</b>'s collection:\n          </p>\n          <ul>{bookList}</ul>\n          {/* <p>and invited him/her to browse your collection.</p>{\" \"} */}\n        </>\n      ) : (\n        <p>\n          On {creationDate} you showed interest in <b>{recipient.name}</b>'s'\n          collection. {/*and invited you him/her browse your collection.*/}\n        </p>\n      )}\n      <button className=\"buttonDark\" onClick={handleOnClick}>\n        Visit <b>{recipient.name}</b>'s profile\n      </button>\n    </div>\n  );\n};\n\nconst Poke = ({ poke: { sender, recipient, books, date, read }, type }) => {\n  const history = useHistory();\n  const creationDate = new Date(date).toLocaleString();\n\n  const handleOnClick = () => {\n    if (type === 'received') history.push(`/user/${sender._id}`, { bookId: \"\" });\n    if (type === 'sent') history.push(`/user/${recipient._id}`, { bookId: \"\" });\n  };\n\n  const bookList = books.map((book) => (\n    <BookListItem key={book._id} book={book} />\n  ));\n\n  return (\n    <div>\n      {type === \"received\" && (\n        <PokeReceived\n          bookList={bookList}\n          creationDate={creationDate}\n          sender={sender}\n          read={read}\n          handleOnClick={handleOnClick}\n        />\n      )}\n      {type === \"sent\" && (\n        <PokeSent\n          bookList={bookList}\n          creationDate={creationDate}\n          recipient={recipient}\n          handleOnClick={handleOnClick}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Poke;\n","export const updatePoke = async (accessToken, id) => {\n    let res = await fetch(`https://pikabook.herokuapp.com/api/pokes/${id}`, {\n      method: \"put\",\n      headers: {\n        Accept: \"application/json, text/plain, */*\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${accessToken}`,\n      },\n    });\n    if (!res.ok) {\n      res = await res.text();\n      return { error: res };\n    } else {\n      res = await res.json();\n      return { updated: true };\n    }\n  };\n  \n  export default updatePoke;\n  ","import { useEffect, useState, useRef } from \"react\";\nimport Poke from \"./Poke\";\nimport getPagination from \"../../SharedFunctions/getPagination\";\nimport Pagination from \"../../SharedComponents/Pagination\";\nimport updatePoke from \"../../API/updatePoke\";\n\nconst Pokes = ({\n  accessToken,\n  loggedUsersPokes,\n  setLoggedUsersPokes,\n  loggedUser: { _id },\n}) => {\n  const [receivedPage, setReceivedPage] = useState(1);\n  const [offeredPage, setOfferedPage] = useState(1);\n  const [prevPokes, setPrevPokes] = useState([]);\n  const onPageLimit = 10;\n  const scrollTo1 = useRef();\n  const scrollTo2 = useRef();\n\n\n  useEffect(() => {\n    if (loggedUsersPokes.length !== prevPokes.length)\n      setPrevPokes(loggedUsersPokes);\n    const receivedPokes = loggedUsersPokes.filter(\n      (poke) => poke.recipient._id === _id\n    );\n    if (receivedPokes.some((poke) => !poke.read)) {\n      const updatedPokes = loggedUsersPokes.map((poke) => {\n        updatePoke(accessToken, poke._id);\n        return { ...poke, read: true };\n      });\n      setLoggedUsersPokes(updatedPokes);\n    }\n  }, [accessToken, loggedUsersPokes, setLoggedUsersPokes, prevPokes, _id]);\n\n  const receivedPokes = prevPokes.filter((poke) => poke.recipient._id === _id);\n\n  const offeredPokes = prevPokes.filter((poke) => poke.sender._id === _id);\n\n  let receivedPokesList = getPagination(\n    receivedPage,\n    onPageLimit,\n    receivedPokes\n  );\n  receivedPokesList = receivedPokesList.map((poke) => {\n    return <Poke key={poke._id} poke={poke} type=\"received\" />;\n  });\n\n  let offeredPokesList = getPagination(offeredPage, onPageLimit, offeredPokes);\n  offeredPokesList = offeredPokesList.map((poke) => {\n    return <Poke key={poke._id} poke={poke} type=\"sent\" />;\n  });\n\n  return (\n    <div className=\"pokesContainer\">\n      <div className=\"pokeColumn1\" ref={scrollTo1}>\n        <h1>Pokes received</h1>\n        <div className=\"pokeContainer\">{receivedPokesList}</div>\n        {receivedPokes.length > onPageLimit && (\n          <Pagination\n            page={receivedPage}\n            setPage={setReceivedPage}\n            list={receivedPokes}\n            limit={onPageLimit}\n            scrollTo={scrollTo1}\n          />\n        )}\n      </div>\n      <div className=\"pokeColumn2\" ref={scrollTo2}>\n        <h1>Pokes sent</h1>\n        <div className=\"pokeContainer\">{offeredPokesList}</div>\n        {offeredPokes.length > onPageLimit && (\n          <Pagination\n            page={offeredPage}\n            setPage={setOfferedPage}\n            list={offeredPokes}\n            limit={onPageLimit}\n            scrollTo={scrollTo2}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Pokes;\n","export const createBasket = async (\n  accessToken,\n  targetUserID,\n  booksOffered,\n  booksRequested\n) => {\n  let res = await fetch(\"https://pikabook.herokuapp.com/api/baskets\", {\n    method: \"post\",\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${accessToken}`,\n    },\n    body: JSON.stringify({\n      targetUserID,\n      booksOffered,\n      booksRequested,\n    }),\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { created: true };\n  }\n};\n\nexport default createBasket;\n","import { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport createBasket from \"../../API/createBasket\";\nimport BookListItem from \"../../SharedComponents/BookListItem\";\n\nconst BasketCreator = ({\n  accessToken,\n  recipient,\n  booksOffered,\n  booksRequested,\n  setBasketCreatorVisible,\n}) => {\n  const [status, setStatus] = useState(\"\");\n  const history = useHistory();\n\n  const handleConfirm = async () => {\n    const requestedBooksId = booksRequested.map((book) => book._id);\n    const offeredBooksId = booksOffered.map((book) => book._id);\n    const res = await createBasket(\n      accessToken,\n      recipient._id,\n      offeredBooksId,\n      requestedBooksId\n    );\n    if (res.error) setStatus(res.error);\n    if (res.created) setStatus(\"Offer successfully sent!\");\n    setTimeout(() => history.push(\"/me/basket\"), 1000);\n  };\n\n  const handleCancel = () => {\n    setBasketCreatorVisible(false);\n  };\n\n  const offeredBooksList = booksOffered.map((book) => (\n    <BookListItem key={book._id} book={book} />\n  ));\n\n  const requestedBooksList = booksRequested.map((book) => (\n    <BookListItem key={book._id} book={book} />\n  ));\n\n  return (\n    <div className=\"creatorContainer\" id=\"basketCreator\">\n      {!status && (\n        <>\n          <p>\n            Confirm that you want to send {recipient.name} an offer to exchange\n            your books:\n          </p>\n          <ul>{offeredBooksList}</ul>\n          <p>against his/her books</p>\n          <ul>{requestedBooksList}</ul>\n        </>\n      )}\n        {status && <p><b>{status}</b></p>}\n      <div>\n        {!status && <button className=\"buttonDark\" onClick={handleConfirm}>Confirm</button>}\n        {!status && <button className=\"buttonDark\" onClick={handleCancel}>Cancel</button>}\n      </div>\n    </div>\n  );\n};\n\nexport default BasketCreator;\n","import { useState, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nimport { searchMyBooks } from \"../../API/fetchBooks\";\nimport { useRef } from \"react\";\n\nimport Book from \"../../SharedComponents/Book\";\nimport BasketCreator from \"./BasketCreator\";\nimport addBooksToList from \"../../SharedFunctions/addBooksToList\";\nimport getPagination from \"../../SharedFunctions/getPagination\";\nimport Pagination from \"../../SharedComponents/Pagination\";\n\nconst CreateBasket = ({ accessToken }) => {\n  const location = useLocation();\n  const user = location.state.user;\n  const chosenBooks = location.state.chosenBooks;\n  const [offeredBooks, setOfferedBooks] = useState([]);\n  const [myBooks, setMyBooks] = useState([]);\n  const [basketCreatorVisible, setBasketCreatorVisible] = useState(false);\n  const [chosenPage, setChosenPage] = useState(1);\n  const [offeredPage, setOfferedPage] = useState(1);\n  const onPageLimit = 10;\n  const chosenScrollTo = useRef();\n  const myScrollTo= useRef();\n\n  useEffect(() => {\n    const getBooks = async () => {\n      const res = await searchMyBooks(accessToken);\n      if (res.error) console.log(res.error);\n      if (res.books) setMyBooks(res.books);\n    };\n    getBooks();\n  }, [accessToken]);\n\n  const handleCheckboxChange = (e) => {\n    setOfferedBooks(addBooksToList(e, myBooks, offeredBooks));\n  };\n\n  const handleCreateBasket = async () => {\n    setBasketCreatorVisible(true);\n  };\n\n  let chosenBooksList = getPagination(chosenPage, onPageLimit, chosenBooks);\n  chosenBooksList = chosenBooksList.map((book) => (\n    <Book key={book._id} book={book} />\n  ));\n\n  let myBooksList = getPagination(offeredPage, onPageLimit, myBooks);\n  myBooksList = myBooksList.map((book) => (\n    <Book\n      key={book._id}\n      book={book}\n      type=\"checkbox\"\n      handleCheckboxChange={handleCheckboxChange}\n      inputDisabled={basketCreatorVisible}\n      chosenBooks={offeredBooks}\n    />\n  ));\n\n  return (\n    <div className=\"createBasketContainer\">\n      <div className=\"basketBookList\" ref={chosenScrollTo}>\n        <div className=\"basketChosenBooks\">\n          <h1 className=\"booksHeading\">{user.name}'s books</h1>\n          {chosenBooksList}\n          {chosenBooks.length > onPageLimit && (\n            <Pagination\n              page={chosenPage}\n              setPage={setChosenPage}\n              list={chosenBooks}\n              limit={onPageLimit}\n              scrollTo={chosenScrollTo}\n            />\n          )}\n        </div>\n        <div className=\"basketMyBooks\" ref={myScrollTo}>\n          <h1 className=\"booksHeading\">My books</h1>\n          {myBooksList}\n          {myBooks.length > onPageLimit && (\n            <Pagination\n              page={offeredPage}\n              setPage={setOfferedPage}\n              list={myBooks}\n              limit={onPageLimit}\n              scrollTo={myScrollTo}\n            />\n          )}\n        </div>\n      </div>\n      <button\n        className=\"buttonDark\"\n        onClick={handleCreateBasket}\n        disabled={offeredBooks.length < 1}\n      >\n        Create a basket\n      </button>\n      {basketCreatorVisible && (\n        <BasketCreator\n          accessToken={accessToken}\n          booksOffered={offeredBooks}\n          booksRequested={chosenBooks}\n          recipient={user}\n          setBasketCreatorVisible={setBasketCreatorVisible}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default CreateBasket;\n","import React from 'react';\n\nconst Error = () => {\n    return ( \n        <div>\n            Page does not exist.\n        </div>\n     );\n}\n \nexport default Error;","const fetchPokes = async (accessToken) => {\n    let res = await fetch(\"https://pikabook.herokuapp.com/api/me/pokes\", {\n      method: \"get\",\n      headers: { Authorization: `Bearer ${accessToken}` },\n    });\n    if (!res.ok) {\n      res = await res.text();\n      return { error: res };\n    } else {\n      res = await res.json();\n      return { pokes: res };\n    }\n  };\n\n  export default fetchPokes","import { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\nimport { useEffect, useState, useRef } from \"react\";\n\nimport Header from \"./Layout/Header/Header\";\nimport Footer from \"./Layout/Footer/Footer\";\nimport Login from \"./Views/Login/Login\";\nimport Registartion from \"./Views/Registration/Registration\";\nimport Search from \"./Views/Search/Search\";\nimport User from \"./Views/User/User\";\nimport Me from \"./Views/Me/Me\";\nimport MeBooks from \"./Views/MeBooks/MeBooks\";\nimport MeBaskets from \"./Views/Me/MeBaskets\";\nimport Conversations from \"./Views/Conversations/Conversations\";\nimport SingleConversation from \"./Views/SingleConversation/SingleConversation\";\nimport Pokes from \"./Views/Pokes/Pokes\";\nimport Basket from \"./Views/Basket/Basket\";\nimport Error from \"./Views/Error\";\n\nimport fetchPokes from \"./API/fetchPokes\";\nimport { fetchLoggedUser } from \"./API/fetchUser\";\nimport { fetchConversations } from \"./API/fetchConversations\";\n\nfunction App() {\n  const [accessToken, setAccessToken] = useState(\"\");\n  const [loggedUser, setLoggedUser] = useState({});\n  const [loggedUsersPokes, setLoggedUsersPokes] = useState([]);\n  const [loggedUsersConversations, setLoggedUsersConversations] = useState([]);\n  const pokesInterval = useRef();\n  const conversationsInterval = useRef();\n\n  useEffect(() => {\n    clearInterval(pokesInterval.current);\n    clearInterval(conversationsInterval.current);\n    if (accessToken) {\n      getLoggedUserData(accessToken);\n      getLoggedUsersPokes(accessToken);\n      getLoggedUsersConversations(accessToken);\n    }\n    if (!accessToken) {\n      setLoggedUsersPokes([]);\n      setLoggedUser({});\n      setLoggedUsersConversations([]);\n    }\n  }, [accessToken]);\n\n  const getLoggedUserData = async (accessToken) => {\n    const res = await fetchLoggedUser(accessToken);\n    if (res.error) console.log(res.error);\n    if (res.user) setLoggedUser(res.user);\n  };\n\n  const getLoggedUsersPokes = async (accessToken) => {\n    const getPokes = async () => {\n      const res = await fetchPokes(accessToken);\n      if (res.error) console.log(res.error);\n      if (res.pokes) setLoggedUsersPokes(res.pokes.reverse());\n    };\n    getPokes();\n    const interval = setInterval(async () => getPokes(), 5000);\n    pokesInterval.current = interval;\n    return () => clearInterval(pokesInterval.current);\n  };\n\n  const getLoggedUsersConversations = async (accessToken) => {\n    const getConversations = async () => {\n      const res = await fetchConversations(accessToken);\n      if (res.error) console.log(res.error);\n      if (res.conversations) setLoggedUsersConversations(res.conversations);\n    };\n    getConversations();\n    const interval = setInterval(async () => getConversations(), 5000);\n    conversationsInterval.current = interval;\n    return () => clearInterval(conversationsInterval.current);\n  };\n\n  return (\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <Header\n        setAccessToken={setAccessToken}\n        accessToken={accessToken}\n        loggedUser={loggedUser}\n        loggedUsersPokes={loggedUsersPokes}\n        loggedUsersConversations={loggedUsersConversations}\n      />\n      <main>\n        <Switch>\n          <Route\n            path=\"/\"\n            exact\n            render={() =>\n              accessToken ? (\n                <Redirect to=\"/search\" />\n              ) : (\n                <Login\n                  setAccessToken={setAccessToken}\n                  setLoggedUser={setLoggedUser}\n                />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/registration\"\n            render={() =>\n              accessToken ? (\n                <Redirect to=\"/search\" />\n              ) : (\n                <Registartion setAccessToken={setAccessToken} />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/search\"\n            exact\n            render={() =>\n              accessToken ? (\n                <Search accessToken={accessToken} loggedUser={loggedUser} />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/user/:id\"\n            exact\n            render={() =>\n              accessToken ? (\n                <User accessToken={accessToken} />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/basket\"\n            render={() =>\n              accessToken ? (\n                <Basket accessToken={accessToken} />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/me\"\n            exact\n            render={() =>\n              accessToken ? (\n                <Me accessToken={accessToken} loggedUser={loggedUser} />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/me/books\"\n            render={() =>\n              accessToken ? (\n                <MeBooks accessToken={accessToken} />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/me/pokes\"\n            render={() =>\n              accessToken ? (\n                <Pokes\n                  accessToken={accessToken}\n                  loggedUsersPokes={loggedUsersPokes}\n                  setLoggedUsersPokes={setLoggedUsersPokes}\n                  loggedUser={loggedUser}\n                />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/me/conversations\"\n            exact\n            render={() =>\n              accessToken ? (\n                <Conversations\n                  accessToken={accessToken}\n                  loggedUser={loggedUser}\n                  loggedUsersConversations={loggedUsersConversations}\n                />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/me/conversations/conversation\"\n            render={() =>\n              accessToken ? (\n                <SingleConversation\n                  accessToken={accessToken}\n                  getLoggedUsersConversations={getLoggedUsersConversations}\n                  conversationsInterval={conversationsInterval}\n                />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/me/basket\"\n            render={() =>\n              accessToken ? (\n                <MeBaskets accessToken={accessToken} />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route render={() => <Error />}></Route>\n        </Switch>\n      </main>\n      <Footer />\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}