(this.webpackJsonppikabook=this.webpackJsonppikabook||[]).push([[0],{30:function(e,t,r){},38:function(e,t,r){"use strict";r.r(t);var n=r(1),s=r.n(n),a=r(22),c=r.n(a),o=(r(30),r(2)),i=r.n(o),u=r(3),l=r(4),j=r(6),b=r(5),d=r.p+"static/media/pikabook.d219f79b.png",p=function(e,t){var r=e.filter((function(e){return!e.read})),n=["accepted","rejected","failedByRequestor","successByTarget","success"],s=["pending","cancelled","failedByTarget","successByRequestor","success"],a=r.filter((function(e){return e.createdByUserId._id===t&&n.includes(e.status)})),c=r.filter((function(e){return e.createdByUserId._id!==t&&s.includes(e.status)}));return a.concat(c)},h=r(0),O=function(e){var t=e.setAccessToken,r=e.loggedUser._id,n=e.loggedUsersPokes,s=e.loggedUsersConversations,a=e.loggedUsersBaskets,c=function(){return n.filter((function(e){return e.recipient._id===r})).filter((function(e){return!e.read})).length},o=function(){return s.filter((function(e){var t=e.messages[0],n=t.read,s=t.recipient;return!n&&s===r})).length},i=function(){return p(a,r).length};return Object(h.jsxs)("div",{className:"nav",children:[Object(h.jsxs)(j.c,{className:"nav-item",activeClassName:"is-active",to:"/search",children:[Object(h.jsx)("i",{className:"fas fa-search"}),Object(h.jsx)("span",{children:"Search"})]}),Object(h.jsxs)(j.c,{className:"nav-item",activeClassName:"is-active",to:"/me/conversations",children:[Object(h.jsx)("i",{className:"fas fa-envelope"}),Object(h.jsx)("span",{children:"Messages"}),o()>0&&Object(h.jsx)("div",{className:"alert",children:o()})]}),Object(h.jsxs)(j.c,{className:"nav-item",activeClassName:"is-active",to:"/me/baskets",children:[Object(h.jsx)("i",{className:"fas fa-shopping-basket"}),Object(h.jsx)("span",{children:"Baskets"}),i()>0&&Object(h.jsx)("div",{className:"alert",children:i()})]}),Object(h.jsxs)(j.c,{className:"nav-item",activeClassName:"is-active",to:"/me",exact:!0,children:[Object(h.jsx)("i",{className:"fas fa-user-circle"}),Object(h.jsx)("span",{children:"My profile"})]}),Object(h.jsxs)(j.c,{className:"nav-item",activeClassName:"is-active",to:"/me/books",children:[Object(h.jsx)("i",{className:"fas fa-book"}),Object(h.jsx)("span",{children:"My books"})]}),Object(h.jsxs)(j.c,{className:"nav-item",activeClassName:"is-active",to:"/me/pokes",children:[Object(h.jsx)("i",{class:"fas fa-bell"}),c()>0&&Object(h.jsx)("div",{className:"alert",children:c()})]}),Object(h.jsx)(j.c,{className:"nav-item log-out",to:"/",onClick:function(){t("")},children:Object(h.jsx)("i",{className:"fas fa-power-off"})})]})},x=function(e){var t=e.setAccessToken,r=e.accessToken,n=e.loggedUser,s=e.loggedUsersPokes,a=e.loggedUsersConversations,c=e.loggedUsersBaskets;return Object(h.jsxs)("header",{children:[Object(h.jsx)("img",{className:"img-logo",src:d,alt:"Pikabook"}),r&&Object(h.jsx)(O,{setAccessToken:t,loggedUser:n,loggedUsersPokes:s,loggedUsersConversations:a,loggedUsersBaskets:c})]})},f=r.p+"static/media/pikachu.8624571d.png",k=function(){return Object(h.jsxs)("footer",{children:[Object(h.jsx)("div",{className:"books"}),Object(h.jsxs)("div",{className:"about",children:[Object(h.jsxs)("p",{children:["Pikabook APP is for book lovers. Are you one of them? If so,"," ",Object(h.jsx)("span",{children:"pick a book"})," you want to read. Then suggest yours you have already read. That's all. ",Object(h.jsx)("span",{children:"Connect with other bookworms!"})]}),Object(h.jsxs)("div",{className:"github",children:["Application made as part of the ",Object(h.jsx)("b",{children:"CodersCamp2020"})," project.",Object(h.jsx)("br",{}),Object(h.jsx)("a",{href:"https://github.com/lukaszdutka/CodersCamp2020.Project.FullStack-Node-React.PikaBook-frontend",target:"_blank",children:"Visit Github for more information."})]})]}),Object(h.jsxs)("div",{className:"authors",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"Created by Mangosteam"}),Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:"Mentor: \u0141ukasz Dutka"}),Object(h.jsx)("li",{children:"Aleksandra Cypko"}),Object(h.jsx)("li",{children:"Ma\u0142gorzata Dziewit"}),Object(h.jsx)("li",{children:"Daria Dziuba\u0142towska"}),Object(h.jsx)("li",{children:"Agata Ludwiczy\u0144ska"}),Object(h.jsx)("li",{children:"Mariusz Smar\u017c"})]})]}),Object(h.jsx)("img",{src:f,alt:"pikachu"})]})]})},m=function(){var e=Object(u.a)(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/auth",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})});case 2:if((n=e.sent).ok){e.next=10;break}return e.next=6,n.text();case 6:return n=e.sent,e.abrupt("return",{error:n});case 10:return e.next=12,n.json();case 12:return n=e.sent,e.abrupt("return",{accessToken:n.token});case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),v=function(e){var t=e.setAccessToken,r=Object(n.useState)(""),s=Object(l.a)(r,2),a=s[0],c=s[1],o=Object(n.useState)(""),b=Object(l.a)(o,2),d=b[0],p=b[1],O=Object(n.useState)(),x=Object(l.a)(O,2),f=x[0],k=x[1],v=function(e){return"loginEmail"===e.target.id?c(e.target.value):"loginPassword"===e.target.id?p(e.target.value):void 0},g=function(){var e=Object(u.a)(i.a.mark((function e(r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),k("Wait..."),e.next=4,m(a,d);case 4:(n=e.sent).error&&k(n.error),c(""),p(""),n.accessToken&&t(n.accessToken);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"logInAndRegistration",children:Object(h.jsxs)("form",{onSubmit:g,children:[Object(h.jsx)("h1",{children:"Log in"}),Object(h.jsx)("input",{className:"textInputDark",type:"email",id:"loginEmail",placeholder:"E-mail",value:a,onChange:v,required:!0}),Object(h.jsx)("input",{className:"textInputDark",type:"password",id:"loginPassword",placeholder:"Password",value:d,onChange:v,required:!0}),Object(h.jsx)("input",{type:"submit",value:"Log in",className:"buttonDark"}),Object(h.jsx)("div",{className:"status",children:"Wait..."===f?Object(h.jsx)("div",{className:"loader"}):f}),Object(h.jsx)("p",{children:Object(h.jsx)(j.b,{to:"/registration",children:"CREATE A NEW ACCOUNT!"})})]})})},g=function(){var e=Object(u.a)(i.a.mark((function e(t,r,n,s){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/users",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({name:t,email:r,password:n,location:s})});case 2:if((a=e.sent).ok){e.next=10;break}return e.next=6,a.text();case 6:return a=e.sent,e.abrupt("return",{created:!1,error:a});case 10:return e.next=12,a.json();case 12:return a=e.sent,e.abrupt("return",{created:!0});case 14:case"end":return e.stop()}}),e)})));return function(t,r,n,s){return e.apply(this,arguments)}}(),N=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),r=t[0],s=t[1],a=Object(n.useState)(""),c=Object(l.a)(a,2),o=c[0],j=c[1],d=Object(n.useState)(""),p=Object(l.a)(d,2),O=p[0],x=p[1],f=Object(n.useState)(""),k=Object(l.a)(f,2),m=k[0],v=k[1],N=Object(n.useState)(),y=Object(l.a)(N,2),C=y[0],w=y[1],S=Object(b.g)(),B=function(e){return"registerUsername"===e.target.id?s(e.target.value):"registerEmail"===e.target.id?j(e.target.value):"registerPassword"===e.target.id?x(e.target.value):"registerLocation"===e.target.id?v(e.target.value):void 0},D=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w("Request is being sent"),t.preventDefault(),e.next=4,g(r,o,O,m);case 4:(n=e.sent).error?w(n.error):w("Account successfully created"),s(""),j(""),x(""),v(""),n.created&&setTimeout((function(){S.push("/")}),2e3);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"logInAndRegistration",children:Object(h.jsxs)("form",{onSubmit:D,children:[Object(h.jsx)("h1",{children:"Register"}),Object(h.jsx)("input",{type:"text",className:"textInputDark",id:"registerUsername",placeholder:"Name",value:r,onChange:B,required:!0}),Object(h.jsx)("input",{type:"email",className:"textInputDark",id:"registerEmail",placeholder:"E-mail",value:o,onChange:B,required:!0}),Object(h.jsx)("input",{type:"password",className:"textInputDark",id:"registerPassword",placeholder:"Password",value:O,onChange:B,required:!0}),Object(h.jsx)("input",{type:"text",className:"textInputDark",id:"registerLocation",placeholder:"Location",value:m,onChange:B,required:!0}),Object(h.jsx)("input",{type:"submit",value:"Create a new account",className:"buttonDark"}),Object(h.jsx)("div",{className:"status",children:"Request is being sent"===C?Object(h.jsx)("div",{className:"loader"}):C})]})})},y=function(e){return e.map((function(t,r){return r<e.length-1?t+", ":t})).join("")},C=function(e){var t=e.book,r=t.name,n=t.author,s=t.ownerId,a=t._id,c=Object(b.g)();return Object(h.jsxs)("div",{className:"book",children:[Object(h.jsxs)("div",{className:"bookData",children:[Object(h.jsx)("h3",{children:r}),Object(h.jsx)("p",{children:y(n)})]}),Object(h.jsxs)("div",{className:"userData",children:[Object(h.jsx)("p",{children:s.name}),Object(h.jsxs)("p",{children:[s.location," ",s.location&&Object(h.jsx)("i",{className:"fas fa-map-marker-alt",children:" "})]})]}),Object(h.jsx)("input",{className:"buttonDark",type:"button",value:"User's profile",id:a,onClick:function(e){c.push("/user/".concat(s._id),{bookId:e.target.id})}})]})},w=function(e){return B("https://pikabook.herokuapp.com/api/me/books",{},e)},S=function(e){return B("https://pikabook.herokuapp.com/api/users/".concat(e,"/books"))},B=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,n,s,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},n=a.length>2&&void 0!==a[2]?a[2]:"",e.next=4,fetch(t+new URLSearchParams(r),{method:"get",headers:{Authorization:"Bearer ".concat(n)}});case 4:if((s=e.sent).ok){e.next=12;break}return e.next=8,s.text();case 8:return s=e.sent,e.abrupt("return",{books:[],error:s});case 12:return e.next=14,s.json();case 14:return s=e.sent,e.abrupt("return",{books:s});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e,t,r){var n=e*t-t,s=n+t-1;return r.filter((function(e,t){return t>=n&&t<=s}))},T=function(e){var t=e.page,r=e.setPage,n=e.list,s=e.limit,a=e.scrollTo,c=function(){var e=Math.ceil(n.length/s);return e<1?1:e},o=function(e,n){var s=c();"next"===n&&t<s&&r(t+1),"previous"===n&&t>1&&r(t-1),"input"===n&&r(e.target.value),a&&a.current.scrollIntoView({behavior:"smooth",block:"start"})},i=c();return Object(h.jsxs)("div",{className:"pagination",children:[t>1&&Object(h.jsx)("button",{className:"buttonArrow prev",onClick:function(e){return o(e,"previous")},children:"\u2190"}),Object(h.jsx)("span",{children:"Page "}),Object(h.jsx)("input",{type:"number",value:t,min:"1",max:i,onChange:function(e){return o(e,"input")}}),Object(h.jsxs)("span",{children:[" out of ",i]}),t<i&&Object(h.jsx)("button",{className:"buttonArrow next",onClick:function(e){return o(e,"next")},children:"\u2192"})]})},I=function(e){var t=e.loggedUser,r=Object(n.useState)(""),s=Object(l.a)(r,2),a=s[0],c=s[1],o=Object(n.useState)(""),j=Object(l.a)(o,2),b=j[0],d=j[1],p=Object(n.useState)(""),O=Object(l.a)(p,2),x=O[0],f=O[1],k=Object(n.useState)(""),m=Object(l.a)(k,2),v=m[0],g=m[1],N=Object(n.useState)([]),y=Object(l.a)(N,2),w=y[0],S=y[1],I=Object(n.useState)("Let's start searching!"),_=Object(l.a)(I,2),U=_[0],A=_[1],R=Object(n.useState)(1),P=Object(l.a)(R,2),L=P[0],q=P[1],E=Object(n.useRef)(),z=function(e){return"searchTitle"===e.target.id?c(e.target.value):"searchAuthor"===e.target.id?f(e.target.value):"searchGenre"===e.target.id?g(e.target.value):"searchLocation"===e.target.id?d(e.target.value):void 0},M=function(){var e=Object(u.a)(i.a.mark((function e(r){var n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),A("Searching..."),q(1),e.next=5,B("https://pikabook.herokuapp.com/api/books?",{name:a,location:b,author:x,genres:v});case 5:(n=e.sent).error&&A(n.error),s=n.books.filter((function(e){return e.ownerId._id!==t._id&&!e.exchanged})),S(s.reverse()),0===s.length?A("No books found"):A("".concat(s.length," book(s) found"));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=D(L,10,w);return V=V.map((function(e){return Object(h.jsx)(C,{book:e},e._id)})),Object(h.jsxs)("div",{className:"search",children:[Object(h.jsx)("div",{className:"logInAndRegistration",children:Object(h.jsxs)("form",{onSubmit:M,children:[Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"searchTitle",placeholder:"Book's title",value:a,onChange:z}),Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"searchAuthor",placeholder:"Book's author",value:x,onChange:z}),Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"searchGenre",placeholder:"Book's genre",value:v,onChange:z}),Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"searchLocation",placeholder:"Location",value:b,onChange:z}),Object(h.jsx)("input",{className:"buttonDark",type:"submit",value:"Search"}),Object(h.jsx)("div",{className:"status",children:"Searching..."===U?Object(h.jsx)("div",{className:"loader"}):U})]})}),Object(h.jsxs)("div",{ref:E,children:[w.length>10&&Object(h.jsx)(T,{page:L,setPage:q,list:w,limit:10,scrollTo:E}),Object(h.jsx)("div",{className:"booksList",children:V}),w.length>10&&Object(h.jsx)(T,{page:L,setPage:q,list:w,limit:10,scrollTo:E})]})]})},_=function(e){return A("https://pikabook.herokuapp.com/api/me",e)},U=function(e){return A("https://pikabook.herokuapp.com/api/users/".concat(e))},A=function(){var e=Object(u.a)(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"get",headers:{Authorization:"Bearer ".concat(r)}});case 2:if((n=e.sent).ok){e.next=10;break}return e.next=6,n.text();case 6:return n=e.sent,e.abrupt("return",{error:n});case 10:return e.next=12,n.json();case 12:return n=e.sent,e.abrupt("return",{user:n});case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),R=r(25),P=function(e,t,r){if(!e.target.checked)return r.filter((function(t){return t._id!==e.target.id}));if(e.target.checked){var n=t.find((function(t){return t._id===e.target.id}));return[].concat(Object(R.a)(r),[n])}},L=function(e){var t=e.book,r=t._id,n=t.name,s=t.author,a=t.genres,c=t.publisher,o=t.year,i=t.description,u=e.type,l=e.handleCheckboxChange,j=e.inputDisabled,b=e.chosenBooks;return Object(h.jsxs)("div",{className:"bookContainer",children:[Object(h.jsxs)("div",{className:"bookInfo",children:[Object(h.jsx)("p",{className:"bookTitle",children:Object(h.jsx)("b",{children:n})}),s.length>0&&Object(h.jsxs)("p",{className:"author",children:[Object(h.jsx)("b",{children:"Author:"})," ",y(s)]}),c&&Object(h.jsxs)("p",{className:"publisher",children:[Object(h.jsx)("b",{children:"Publisher:"})," ",c]}),o&&Object(h.jsxs)("p",{className:"year",children:[Object(h.jsx)("b",{children:"Publication year:"})," ",o]}),a.length>0&&Object(h.jsxs)("p",{className:"genres",children:[Object(h.jsx)("b",{children:"Genre:"})," ",y(a)]}),i&&Object(h.jsxs)("p",{className:"description",children:[Object(h.jsx)("b",{children:"Description:"})," ",i]})]}),"checkbox"===u&&Object(h.jsx)("input",{className:"checkboxStyled",type:"checkbox",onChange:l,id:r,disabled:j,checked:b.some((function(e){return e._id===r}))})]})},q=function(e){var t=e.book,r=t.name,n=t.author,s=t.publisher,a=t.year,c=t._id;return Object(h.jsxs)("li",{children:[Object(h.jsx)("b",{children:r}),n.length>0&&" by ".concat(y(n))," ",s," ",a]},c)},E=function(){var e=Object(u.a)(i.a.mark((function e(t,r,n){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/pokes",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({recipient:r,books:n})});case 2:if((s=e.sent).ok){e.next=10;break}return e.next=6,s.text();case 6:return s=e.sent,e.abrupt("return",{error:s});case 10:return e.next=12,s.json();case 12:return s=e.sent,e.abrupt("return",{created:!0});case 14:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),z=function(e){var t=e.accessToken,r=e.books,s=e.recipient,a=e.setPokeCreatorVisible,c=Object(n.useState)(""),o=Object(l.a)(c,2),j=o[0],b=o[1],d=function(){var e=Object(u.a)(i.a.mark((function e(){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.map((function(e){return e._id})),e.next=3,E(t,s._id,n);case 3:(a=e.sent).error&&b(a.error),a.created&&b("Poke successfully sent!");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=r.map((function(e){return Object(h.jsx)(q,{book:e},e._id)}));return Object(h.jsxs)("div",{className:"creatorContainer",id:"pokeCreator",children:[!j&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["Invite ",Object(h.jsx)("b",{children:s.name})," to browse your book collection and make him/her know that you showed interest in the following books in their possession:"]}),Object(h.jsx)("ul",{children:p.length>0?p:"None"})]}),j&&Object(h.jsx)("p",{children:Object(h.jsx)("b",{children:j})}),Object(h.jsxs)("div",{children:[!j&&Object(h.jsx)("button",{className:"buttonDark",onClick:d,children:"Confirm"}),Object(h.jsx)("button",{className:"buttonDark",onClick:function(){a(!1)},children:j?"Back":"Cancel"})]})]})},M=function(){var e=Object(u.a)(i.a.mark((function e(t,r,n){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/conversations",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({recipient:r,content:n})});case 2:if((s=e.sent).ok){e.next=10;break}return e.next=6,s.text();case 6:return s=e.sent,e.abrupt("return",{created:!1,error:s});case 10:return e.next=12,s.json();case 12:return s=e.sent,e.abrupt("return",{created:!0,message:s.content});case 14:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),V=function(e){var t=e.accessToken,r=e.recipient,s=e.setMessageCreatorVisible,a=Object(n.useState)(""),c=Object(l.a)(a,2),o=c[0],j=c[1],b=Object(n.useState)(""),d=Object(l.a)(b,2),p=d[0],O=d[1],x=Object(n.useState)(""),f=Object(l.a)(x,2),k=f[0],m=f[1],v=function(){var e=Object(u.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t,r._id,o);case 2:(n=e.sent).error&&m(n.error),n.created&&m("Message successfully sent!"),n.message&&O(n.message);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"creatorContainer",id:"messageCreator",children:[Object(h.jsxs)("h1",{children:["Send a message to ",r.name]}),p?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("p",{className:"sentMessage",children:p})}):Object(h.jsx)("textarea",{onChange:function(e){j(e.target.value)},value:o}),k&&Object(h.jsx)("p",{children:Object(h.jsx)("b",{children:k})}),Object(h.jsxs)("div",{children:[!p&&Object(h.jsx)("button",{className:"buttonDark",onClick:v,children:"Confirm"}),Object(h.jsx)("button",{className:"buttonDark",onClick:function(){s(!1)},children:p?"Back":"Cancel"})]})]})},F=function(e){var t=e.accessToken,r=Object(b.i)().id,s=Object(n.useState)([]),a=Object(l.a)(s,2),c=a[0],o=a[1],j=Object(n.useState)(""),d=Object(l.a)(j,2),p=d[0],O=d[1],x=Object(n.useState)([]),f=Object(l.a)(x,2),k=f[0],m=f[1],v=Object(n.useState)(!1),g=Object(l.a)(v,2),N=g[0],y=g[1],C=Object(n.useState)(!1),w=Object(l.a)(C,2),B=w[0],I=w[1],_=Object(n.useState)(""),A=Object(l.a)(_,2),R=A[0],q=A[1],E=Object(n.useState)(1),M=Object(l.a)(E,2),F=M[0],H=M[1],J=Object(n.useRef)(),Y=Object(b.g)(),G=Object(b.h)();Object(n.useEffect)((function(){q("Loading...");var e=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=G.state.bookId,e.next=3,S(r);case 3:(n=e.sent).error&&q(n.error),n.books&&(s=(s=n.books.filter((function(e){return!e.exchanged}))).sort((function(e,r){return e._id===t?-1:r._id===t?1:0})),o(s),q(""));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(r);case 2:(t=e.sent).error&&console.log(t.error),t.user&&O(t.user);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[r,G.state.bookId]);var W=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!B&&y(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e){m(P(e,c,k))},Q=D(F,10,c);return Q=Q.map((function(e){return Object(h.jsx)(L,{book:e,type:"checkbox",handleCheckboxChange:K,inputDisabled:N||B,chosenBooks:k},e._id)})),Object(h.jsxs)("div",{className:"userContainer",children:[Object(h.jsxs)("div",{className:"usersBooks",ref:J,children:[Object(h.jsx)("h1",{className:"booksHeading",children:"Books"}),R||Q,c.length>10&&Object(h.jsx)(T,{page:F,setPage:H,list:c,limit:10,scrollTo:J})]}),Object(h.jsxs)("div",{className:"userPanel",children:[Object(h.jsxs)("div",{className:"userInfo",children:[Object(h.jsx)("p",{children:p.name}),p.location&&Object(h.jsxs)("p",{children:[Object(h.jsx)("i",{className:"fas fa-map-marker-alt"})," ",p.location]}),Object(h.jsx)("button",{className:"buttonDark",onClick:function(){!N&&I(!0)},children:"Send message"})]}),Object(h.jsxs)("div",{className:"userInfo",children:[Object(h.jsx)("button",{className:"buttonDark",onClick:function(){Y.push("/basket",{chosenBooks:k,user:p})},disabled:k.length<1,children:"Add to basket"}),Object(h.jsx)("p",{className:"or",children:"OR"}),Object(h.jsx)("button",{className:"buttonDark",onClick:W,children:"Create poke"})]})]}),N&&Object(h.jsx)(z,{accessToken:t,recipient:p,books:k,setPokeCreatorVisible:y}),B&&Object(h.jsx)(V,{accessToken:t,recipient:p,setMessageCreatorVisible:I})]})},H=function(e){var t=e.loggedUser,r=t.name,n=t.email,s=t.location,a=e.loggedUsersBaskets.filter((function(e){return"success"===e.status})).length;return Object(h.jsxs)("div",{className:"meContainer",children:[Object(h.jsx)("h1",{children:"Account details"}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Name:"})," ",r]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"E-mail:"})," ",n]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Location:"})," ",s||"-"]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Successful exchanges:"})," ",a]})]})},J=function(){var e=Object(u.a)(i.a.mark((function e(t,r,n,s,a,c,o,u){var l,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(l={}).name=n,0!==s.length&&(l.author=s),0!==a.length&&(l.genres=a),c&&(l.year=c),o&&(l.publisher=o),u&&(l.description=u),e.next=9,fetch("https://pikabook.herokuapp.com/api/books/".concat(r),{method:"put",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(l)});case 9:if((j=e.sent).ok){e.next=17;break}return e.next=13,j.text();case 13:return j=e.sent,e.abrupt("return",{error:j});case 17:return e.next=19,j.json();case 19:return j=e.sent,e.abrupt("return",{updated:!0});case 21:case"end":return e.stop()}}),e)})));return function(t,r,n,s,a,c,o,i){return e.apply(this,arguments)}}(),Y=function(e){var t=e.accessToken,r=e.setEditBookVisible,s=e.bookData,a=s.name,c=s.author,o=s.genres,j=s.year,b=s.publisher,d=s.description,p=s._id,O=e.getBooks,x=e.setCreatorVisible,f=Object(n.useState)(a),k=Object(l.a)(f,2),m=k[0],v=k[1],g=Object(n.useState)(c.join(", ")),N=Object(l.a)(g,2),y=N[0],C=N[1],w=Object(n.useState)(o.join(", ")),S=Object(l.a)(w,2),B=S[0],D=S[1],T=Object(n.useState)(j),I=Object(l.a)(T,2),_=I[0],U=I[1],A=Object(n.useState)(b),R=Object(l.a)(A,2),P=R[0],L=R[1],q=Object(n.useState)(d),E=Object(l.a)(q,2),z=E[0],M=E[1],V=Object(n.useState)(""),F=Object(l.a)(V,2),H=F[0],Y=F[1],G=function(e){return"bookTitle"===e.target.id?v(e.target.value):"author"===e.target.id?C(e.target.value):"genres"===e.target.id?D(e.target.value):"releaseDate"===e.target.id?U(e.target.value):"publisher"===e.target.id?L(e.target.value):"description"===e.target.id?M(e.target.value):void 0},W=function(){var e=Object(u.a)(i.a.mark((function e(n){var s,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),s=y.split(","),""===y&&(s=[]),a=B.split(","),""===B&&(a=[]),e.next=7,J(t,p,m,s,a,_,P,z);case 7:(c=e.sent).error&&Y(c.error),c.updated&&(v(""),C(""),D(""),U(""),L(""),M(""),O(t),x(!1),r(!1));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"creatorContainer",id:"editBookCreator",children:[Object(h.jsxs)("form",{className:"bookForm",onSubmit:W,children:[Object(h.jsx)("h1",{children:"Edit book"}),Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"bookTitle",placeholder:"Book's title",value:m,onChange:G,required:!0}),Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"author",placeholder:"Author",value:y,onChange:G}),Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"genres",placeholder:"Genres",value:B,onChange:G}),Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"releaseDate",placeholder:"Release date",value:_,onChange:G}),Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"publisher",placeholder:"Publisher",value:P,onChange:G}),Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"description",placeholder:"Description",value:z,onChange:G}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{className:"buttonDark",type:"submit",value:"Update"}),Object(h.jsx)("button",{className:"buttonDark",onClick:function(){x(!1),r(!1)},children:"Cancel"})]})]}),H&&Object(h.jsx)("div",{className:"status",children:H})]})},G=function(){var e=Object(u.a)(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/books/".concat(r),{method:"delete",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:if((n=e.sent).ok){e.next=10;break}return e.next=6,n.text();case 6:return n=e.sent,e.abrupt("return",{error:n});case 10:return e.next=12,n.json();case 12:return n=e.sent,e.abrupt("return",{deleted:!0});case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),W=function(e){var t=e.accessToken,r=e.data,s=e.getBooks,a=e.creatorVisible,c=e.setCreatorVisible,o=r.name,j=r.author,b=r.genres,d=r.year,p=r.publisher,O=r.description,x=r._id,f=Object(n.useState)(!1),k=Object(l.a)(f,2),m=k[0],v=k[1],g=Object(n.useState)(),N=Object(l.a)(g,2),C=N[0],w=N[1],S=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!0),v(!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(i.a.mark((function e(r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w("Request..."),r.preventDefault(),e.next=4,G(t,x);case 4:(n=e.sent).error&&w(n.error),n.deleted&&w("Book deleted"),s(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"bookContainer",children:Object(h.jsxs)("div",{className:"bookInfo",children:[Object(h.jsx)("p",{className:"bookTitle",children:Object(h.jsx)("b",{children:o})}),j.length>0&&Object(h.jsxs)("p",{className:"author",children:[Object(h.jsx)("b",{children:"Author:"})," ",y(j)]}),p&&Object(h.jsxs)("p",{className:"publisher",children:[Object(h.jsx)("b",{children:"Publisher:"})," ",p]}),d&&Object(h.jsxs)("p",{className:"year",children:[Object(h.jsx)("b",{children:"Publication year:"})," ",d]}),b.length>0&&Object(h.jsxs)("p",{className:"genres",children:[Object(h.jsx)("b",{children:"Genre:"})," ",y(b)]}),O&&Object(h.jsxs)("p",{className:"description",children:[Object(h.jsx)("b",{children:"Description:"})," ",O]}),Object(h.jsxs)("div",{className:"meBooksButtons",children:[Object(h.jsx)("button",{className:"buttonDark",onClick:B,disabled:a,children:"Delete"}),Object(h.jsx)("button",{className:"buttonDark",onClick:S,disabled:a,children:"Edit"})]}),C&&Object(h.jsx)("div",{className:"status",children:"Request..."===C?Object(h.jsx)("div",{className:"loader"}):C}),m&&Object(h.jsx)(Y,{accessToken:t,setEditBookVisible:v,bookData:r,getBooks:s,setCreatorVisible:c})]})})},K=function(){var e=Object(u.a)(i.a.mark((function e(t,r,n,s,a,c,o){var u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(u={}).name=r,0!==n.length&&(u.author=n),0!==s.length&&(u.genres=s),a&&(u.year=a),c&&(u.publisher=c),o&&(u.description=o),e.next=9,fetch("https://pikabook.herokuapp.com/api/books",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(u)});case 9:if((l=e.sent).ok){e.next=17;break}return e.next=13,l.text();case 13:return l=e.sent,e.abrupt("return",{added:!1,error:l});case 17:return e.next=19,l.json();case 19:return l=e.sent,e.abrupt("return",{added:!0});case 21:case"end":return e.stop()}}),e)})));return function(t,r,n,s,a,c,o){return e.apply(this,arguments)}}(),Q=function(e){var t=e.accessToken,r=e.getBooks,s=e.creatorVisible,a=Object(n.useState)(""),c=Object(l.a)(a,2),o=c[0],j=c[1],b=Object(n.useState)(""),d=Object(l.a)(b,2),p=d[0],O=d[1],x=Object(n.useState)(""),f=Object(l.a)(x,2),k=f[0],m=f[1],v=Object(n.useState)(""),g=Object(l.a)(v,2),N=g[0],y=g[1],C=Object(n.useState)(""),w=Object(l.a)(C,2),S=w[0],B=w[1],D=Object(n.useState)(""),T=Object(l.a)(D,2),I=T[0],_=T[1],U=Object(n.useState)(),A=Object(l.a)(U,2),R=A[0],P=A[1],L=function(e){return"bookTitle"===e.target.id?j(e.target.value):"author"===e.target.id?O(e.target.value):"genres"===e.target.id?m(e.target.value):"releaseDate"===e.target.id?y(e.target.value):"publisher"===e.target.id?B(e.target.value):"description"===e.target.id?_(e.target.value):void 0},q=function(){var e=Object(u.a)(i.a.mark((function e(n){var s,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P("Request..."),n.preventDefault(),s=p.split(","),""===p&&(s=[]),a=k.split(","),""===k&&(a=[]),e.next=8,K(t,o,s,a,N,S,I);case 8:(c=e.sent).error&&P(c.error),c.added&&P("Book successfully added"),j(""),O(""),m(""),y(""),B(""),_(""),r(t);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"meAddBook",children:[Object(h.jsx)("h1",{className:"booksHeading",children:"Add a new book"}),Object(h.jsxs)("form",{className:"bookForm",onSubmit:q,children:[Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"bookTitle",placeholder:"Book's title",value:o,onChange:L,required:!0}),Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"author",placeholder:"Author",value:p,onChange:L}),Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"genres",placeholder:"Genres",value:k,onChange:L}),Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"releaseDate",placeholder:"Release date",value:N,onChange:L}),Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"publisher",placeholder:"Publisher",value:S,onChange:L}),Object(h.jsx)("input",{className:"textInputDark",type:"text",id:"description",placeholder:"Description",value:I,onChange:L}),Object(h.jsx)("input",{type:"submit",value:"Add",className:"buttonDark",disabled:s}),R&&Object(h.jsx)("div",{className:"status",children:"Request..."===R?Object(h.jsx)("div",{className:"loader"}):R})]})]})},X=function(e){var t=e.accessToken,r=Object(n.useState)([]),s=Object(l.a)(r,2),a=s[0],c=s[1],o=Object(n.useState)("Loading..."),j=Object(l.a)(o,2),b=j[0],d=j[1],p=Object(n.useState)(1),O=Object(l.a)(p,2),x=O[0],f=O[1],k=Object(n.useState)(!1),m=Object(l.a)(k,2),v=m[0],g=m[1],N=Object(n.useRef)(),y=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:(r=e.sent).error&&(console.log(r.error),d("No books found.")),r.books&&(n=r.books.filter((function(e){return!e.exchanged})),c(n.reverse()),d(""));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){y(t)}),[t]);var C=D(x,10,a);return C=C.map((function(e){return Object(h.jsx)(W,{accessToken:t,data:e,getBooks:y,creatorVisible:v,setCreatorVisible:g},e._id)})),Object(h.jsxs)("div",{className:"meBooksContainer",children:[Object(h.jsxs)("div",{className:"meBooks",ref:N,children:[Object(h.jsx)("h1",{className:"booksHeading",children:"My books"}),C.length>0&&C,b&&Object(h.jsx)("div",{className:"status",children:"Loading..."===b?Object(h.jsx)("div",{className:"loader"}):b}),a.length>10&&Object(h.jsx)(T,{page:x,setPage:f,list:a,limit:10,scrollTo:N})]}),Object(h.jsx)(Q,{accessToken:t,getBooks:y,creatorVisible:v})]})},Z=function(){var e=Object(u.a)(i.a.mark((function e(t,r,n){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/baskets/status/".concat(n),{method:"put",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({status:r})});case 2:if((s=e.sent).ok){e.next=10;break}return e.next=6,s.text();case 6:return s=e.sent,e.abrupt("return",{error:s});case 10:return e.next=12,s.json();case 12:return s=e.sent,e.abrupt("return",{baskets:s});case 14:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),$=function(){var e=Object(u.a)(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/baskets/read/".concat(r),{method:"put",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:if((n=e.sent).ok){e.next=10;break}return e.next=6,n.text();case 6:return n=e.sent,e.abrupt("return",{error:n});case 10:return e.next=12,n.json();case 12:return n=e.sent,e.abrupt("return",{updated:!0});case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ee=function(e){var t=e.accessToken,r=e.status,n=e._id,s=e.isUserRequestor,a=e.coOwnerName,c=e.getLoggedUsersBaskets,o=e.basketsInterval,l=function(){var e=Object(u.a)(i.a.mark((function e(r){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t,r.target.name,n);case 2:(s=e.sent).error&&console.log(s.error),clearTimeout(o.current),c(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"buttonsAndStatus",children:["pending"===r&&s&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["You made an offer to ",a]}),Object(h.jsx)("button",{name:"cancelled",onClick:l,className:"buttonDark",children:"Cancel"})]}),"pending"===r&&!s&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:[a," made an offer"]}),Object(h.jsx)("button",{name:"accepted",onClick:l,className:"buttonDark",children:"Accept"})," ",Object(h.jsx)("button",{name:"rejected",onClick:l,className:"buttonDark",children:"Reject"})]}),"accepted"===r&&s&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:[a," accepted your offer"]}),Object(h.jsx)("button",{name:"successByRequestor",onClick:l,className:"buttonDark",children:"Success"}),Object(h.jsx)("button",{name:"failedByTarget",onClick:l,className:"buttonDark",children:"Failed"})]}),"accepted"===r&&!s&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["You accepted ",a,"'s offer"]}),Object(h.jsx)("button",{name:"successByTarget",onClick:l,className:"buttonDark",children:"Success"}),Object(h.jsx)("button",{name:"failedByRequestor",onClick:l,className:"buttonDark",children:"Failed"})]}),"successByRequestor"===r&&s&&Object(h.jsx)("p",{children:"Success on your side"}),"successByRequestor"===r&&!s&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:[a," stated you delivered your books"]}),Object(h.jsx)("button",{name:"success",onClick:l,className:"buttonDark",children:"Success"}),Object(h.jsx)("button",{name:"failedByRequestor",onClick:l,className:"buttonDark",children:"Failed"})]}),"successByTarget"===r&&s&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:[a," stated you delivered your books"]}),Object(h.jsx)("button",{name:"success",onClick:l,className:"buttonDark",children:"Success"}),Object(h.jsx)("button",{name:"failedByTarget",onClick:l,className:"buttonDark",children:"Failed"})]}),"successByTarget"===r&&!s&&Object(h.jsx)("p",{children:"Success on your side"}),"rejected"===r&&s&&Object(h.jsxs)("p",{children:[a," rejected your offer"]}),"rejected"===r&&!s&&Object(h.jsx)("p",{children:"You rejected the offer"}),"cancelled"===r&&s&&Object(h.jsx)("p",{children:"You cancelled your offer"}),"cancelled"===r&&!s&&Object(h.jsxs)("p",{children:[a," cancelled his/her offer"]}),"failedByRequestor"===r&&s&&Object(h.jsxs)("p",{children:[a," stated you failed to delived your books"]}),"failedByRequestor"===r&&!s&&Object(h.jsxs)("p",{children:["You stated ",a," failed to delived his/her books"]}),"failedByTarget"===r&&s&&Object(h.jsxs)("p",{children:["You stated ",a," failed to delived his/her books"]}),"failedByTarget"===r&&!s&&Object(h.jsxs)("p",{children:[a," stated you failed to delived your books"]}),"success"===r&&Object(h.jsx)("p",{children:"Success on both sides!"})]})},te=function(e){var t=e.basket,r=t._id,n=t.booksOffered,s=t.booksRequested,a=t.status,c=t.createdByUserId,o=t.targetUserID,i=t.timeCreated,u=e.loggedUser,l=e.accessToken,j=e.getLoggedUsersBaskets,b=e.basketsInterval,d=c._id===u._id,p=new Date(i).toLocaleString(),O=d?o:c,x=d?s:n,f=(d?n:s).map((function(e){return Object(h.jsx)(L,{book:e},e._id)})),k=x.map((function(e){return Object(h.jsx)(L,{book:e},e._id)}));return Object(h.jsxs)("div",{className:"singleBasket",children:[Object(h.jsxs)("div",{className:["cancelled","rejected","failedByRequestor","failedByTarget","success"].includes(a)?"basketData endedBasket":"basketData",children:[Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Time of creation: "}),p]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Status: "}),function(){switch(a){case"failedByRequestor":return"failed by requestor";case"failedByTarget":return"failed by target";case"successByRequestor":return"success by requestor";case"successByTarget":return"success by target";default:return a}}()]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Co-owner of the basket: "}),O.name]}),Object(h.jsx)(ee,{accessToken:l,status:a,_id:r,isUserRequestor:d,coOwnerName:O.name,getLoggedUsersBaskets:j,basketsInterval:b})]}),Object(h.jsxs)("div",{className:"basketBooks",children:[Object(h.jsx)("h1",{className:"booksHeading",children:"My Books"}),f]}),Object(h.jsxs)("div",{className:"basketBooks",children:[Object(h.jsxs)("h1",{className:"booksHeading",children:[O.name,"'s books"]}),k]})]})},re=function(e){var t=e.accessToken,r=e.loggedUser,s=e.loggedUsersBaskets,a=e.getLoggedUsersBaskets,c=e.basketsInterval,o=Object(n.useState)(1),j=Object(l.a)(o,2),b=j[0],d=j[1],O=Object(n.useRef)();Object(n.useEffect)((function(){var e=p(s,r._id),n=function(){var r=Object(u.a)(i.a.mark((function r(){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.forEach((function(e){return $(t,e._id)}));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();e.length>0&&n()}),[t,r._id,s]);var x=D(b,4,s);return x=x.map((function(e){return Object(h.jsx)(te,{basket:e,loggedUser:r,accessToken:t,getLoggedUsersBaskets:a,basketsInterval:c},e._id)})),Object(h.jsxs)("div",{className:"meBaskestsContainer",children:[Object(h.jsx)("h1",{ref:O,className:"basketHeader",children:"My baskets"}),x,s.length>4&&Object(h.jsx)(T,{page:b,setPage:d,list:s,limit:4,scrollTo:O})]})},ne=function(e){var t=e.conversation,r=t.interlocutors,n=t.messages,s=e.loggedUser,a=Object(b.g)(),c=r.find((function(e){return e._id!==s._id})),o=n[0],i=new Date(o.date).toLocaleString(),u=o.sender===c._id?c.name:"You",l=o.content.split("").slice(0,9).join(""),j=!o.read&&o.recipient===s._id;return Object(h.jsxs)("div",{className:j?"conversationContainer newMessage":"conversationContainer",children:[Object(h.jsx)("div",{children:Object(h.jsx)("b",{children:c.name})}),Object(h.jsx)("div",{children:i}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:u})," wrote:"," ",l===o.content?l:"".concat(l,"...")]}),Object(h.jsx)("button",{className:"buttonDark",onClick:function(){a.push("/me/conversations/conversation",{interlocutor:c})},children:"Go to conversation"})]})},se=function(e){var t=e.loggedUser,r=e.loggedUsersConversations,s=Object(n.useState)(1),a=Object(l.a)(s,2),c=a[0],o=a[1],i=Object(n.useRef)(),u=r.sort((function(e,t){var r=new Date(e.messages[0].date);return new Date(t.messages[0].date)-r}));return u=(u=D(c,10,u)).map((function(e){return Object(h.jsx)(ne,{conversation:e,loggedUser:t},e._id)})),Object(h.jsxs)("div",{className:"conversationsContainer",children:[Object(h.jsx)("h1",{children:"My conversations"}),Object(h.jsx)("div",{ref:i,children:r.length>10&&Object(h.jsx)(T,{page:c,setPage:o,list:r,limit:10,scrollTo:i})}),Object(h.jsx)("div",{children:u}),r.length>10&&Object(h.jsx)(T,{page:c,setPage:o,list:r,limit:10,scrollTo:i})]})},ae=r(24),ce=r.n(ae),oe=function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/me/conversations",{method:"get",headers:{Authorization:"Bearer ".concat(t)}});case 2:if((r=e.sent).ok){e.next=10;break}return e.next=6,r.text();case 6:return r=e.sent,e.abrupt("return",{error:r});case 10:return e.next=12,r.json();case 12:return r=e.sent,e.abrupt("return",{conversations:r});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(u.a)(i.a.mark((function e(t,r,n){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/me/conversations/".concat(r,"?")+new URLSearchParams(n),{method:"get",headers:{Authorization:"Bearer ".concat(t)}});case 2:if((s=e.sent).ok){e.next=10;break}return e.next=6,s.text();case 6:return s=e.sent,e.abrupt("return",{error:s});case 10:return e.next=12,s.json();case 12:return s=e.sent,e.abrupt("return",{conversation:s});case 14:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(u.a)(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/conversations/".concat(r),{method:"put",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:if((n=e.sent).ok){e.next=10;break}return e.next=6,n.text();case 6:return n=e.sent,e.abrupt("return",{error:n});case 10:return e.next=12,n.json();case 12:return n=e.sent,e.abrupt("return",{updated:!0});case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),le=function(e){var t=e.message,r=t.sender,n=t.content,s=t.date,a=e.interlocutor,c=new Date(s).toLocaleString(),o=a._id===r?"".concat(a.name,":"):"You:";return Object(h.jsxs)("div",{className:"You:"===o?"yourMessage":"interlocutorsMessage",children:[Object(h.jsx)("div",{className:"date",children:c}),Object(h.jsxs)("div",{className:"message",children:[Object(h.jsx)("div",{children:o}),Object(h.jsx)("div",{children:n})]})]})},je=function(e){var t=e.accessToken,r=e.getLoggedUsersConversations,s=e.conversationsInterval,a=Object(b.h)(),c=Object(b.g)(),o=a.state.interlocutor,j=Object(n.useState)([]),d=Object(l.a)(j,2),p=d[0],O=d[1],x=Object(n.useRef)(),f=Object(n.useState)(""),k=Object(l.a)(f,2),m=k[0],v=k[1],g=Object(n.useRef)(),N=Object(n.useState)(10),y=Object(l.a)(N,2),C=y[0],w=y[1],S=Object(n.useState)(""),B=Object(l.a)(S,2),D=B[0],T=B[1],I=Object(n.useRef)();Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.some((function(e){return!e.read}))){e.next=3;break}return e.next=3,ue(t,o._id);case 3:clearTimeout(s.current),r(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var r=Object(u.a)(i.a.mark((function r(){var n,s;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return T("Loading..."),x.current=p,r.next=4,ie(t,o._id,{limit:C});case 4:(n=r.sent).error&&T(n.error),s=n.conversation.messages.reverse(),ce.a.isEqual(s,x.current)||(O(s),e(s));case 8:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();clearInterval(g.current),n();var a=setInterval(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n());case 1:case"end":return e.stop()}}),e)}))),1e3);return g.current=a,function(){return clearInterval(g.current)}}),[t,o._id,C,p,r,s]),Object(n.useEffect)((function(){var e=I.current;!function(){var t=e.scrollHeight-e.clientHeight;e.scrollTo(0,t)}()}),[p]);var _=function(){var e=Object(u.a)(i.a.mark((function e(r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,M(t,o._id,m);case 3:(n=e.sent).error&&T(n.error),v("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=p.map((function(e){return Object(h.jsx)(le,{message:e,interlocutor:o},e._id)}));return Object(h.jsxs)("div",{className:"singleConversationContainer",children:[Object(h.jsx)("div",{className:"exit",onClick:function(){c.push("/me/conversations")},children:"\u2716"}),Object(h.jsx)("button",{className:"buttonDark loadMore",onClick:function(e){w(C+10)},children:"\u2191"}),Object(h.jsx)("div",{className:"messagesList",ref:I,children:0===p.length?Object(h.jsxs)("div",{className:"status",children:[" ","Loading..."===D?Object(h.jsx)("div",{className:"loader"}):D," "]}):U}),Object(h.jsxs)("form",{onSubmit:_,children:[Object(h.jsx)("textarea",{onChange:function(e){v(e.target.value)},value:m}),Object(h.jsx)("input",{className:"buttonDark",type:"submit",value:"Send"})]})]})},be=r(19),de=function(e){var t=e.bookList,r=e.creationDate,n=e.sender,s=e.read,a=e.handleOnClick;return Object(h.jsxs)("div",{className:s?"poke":"newPoke poke",children:[t.length>0?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["On ",r," ",Object(h.jsx)("b",{children:n.name})," showed interest in the following books in your collection:"]}),Object(h.jsx)("ul",{children:t})]}):Object(h.jsxs)("p",{children:["On ",r," ",Object(h.jsx)("b",{children:n.name})," showed interest in your collection."]}),Object(h.jsxs)("button",{className:"buttonDark",onClick:a,children:["Visit ",Object(h.jsx)("b",{children:n.name}),"'s profile"]})]})},pe=function(e){var t=e.bookList,r=e.creationDate,n=e.recipient,s=e.handleOnClick;return Object(h.jsxs)("div",{className:"poke",children:[t.length>0?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["On ",r," you showed interest in the following books in"," ",Object(h.jsx)("b",{children:n.name}),"'s collection:"]}),Object(h.jsx)("ul",{children:t})]}):Object(h.jsxs)("p",{children:["On ",r," you showed interest in ",Object(h.jsx)("b",{children:n.name}),"'s' collection."]}),Object(h.jsxs)("button",{className:"buttonDark",onClick:s,children:["Visit ",Object(h.jsx)("b",{children:n.name}),"'s profile"]})]})},he=function(e){var t=e.poke,r=t.sender,n=t.recipient,s=t.books,a=t.date,c=t.read,o=e.type,i=Object(b.g)(),u=new Date(a).toLocaleString(),l=function(){"received"===o&&i.push("/user/".concat(r._id),{bookId:""}),"sent"===o&&i.push("/user/".concat(n._id),{bookId:""})},j=s.map((function(e){return Object(h.jsx)(q,{book:e},e._id)}));return Object(h.jsxs)("div",{children:["received"===o&&Object(h.jsx)(de,{bookList:j,creationDate:u,sender:r,read:c,handleOnClick:l}),"sent"===o&&Object(h.jsx)(pe,{bookList:j,creationDate:u,recipient:n,handleOnClick:l})]})},Oe=function(){var e=Object(u.a)(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/pokes/".concat(r),{method:"put",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:if((n=e.sent).ok){e.next=10;break}return e.next=6,n.text();case 6:return n=e.sent,e.abrupt("return",{error:n});case 10:return e.next=12,n.json();case 12:return n=e.sent,e.abrupt("return",{updated:!0});case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),xe=function(e){var t=e.accessToken,r=e.loggedUsersPokes,s=e.setLoggedUsersPokes,a=e.loggedUser._id,c=Object(n.useState)(1),o=Object(l.a)(c,2),i=o[0],u=o[1],j=Object(n.useState)(1),b=Object(l.a)(j,2),d=b[0],p=b[1],O=Object(n.useState)([]),x=Object(l.a)(O,2),f=x[0],k=x[1],m=10,v=Object(n.useRef)(),g=Object(n.useRef)();Object(n.useEffect)((function(){if(r.length!==f.length&&k(r),r.filter((function(e){return e.recipient._id===a})).some((function(e){return!e.read}))){var e=r.map((function(e){return Oe(t,e._id),Object(be.a)(Object(be.a)({},e),{},{read:!0})}));s(e)}}),[t,r,s,f,a]);var N=f.filter((function(e){return e.recipient._id===a})),y=f.filter((function(e){return e.sender._id===a})),C=D(i,m,N);C=C.map((function(e){return Object(h.jsx)(he,{poke:e,type:"received"},e._id)}));var w=D(d,m,y);return w=w.map((function(e){return Object(h.jsx)(he,{poke:e,type:"sent"},e._id)})),Object(h.jsxs)("div",{className:"pokesContainer",children:[Object(h.jsxs)("div",{className:"pokeColumn1",ref:v,children:[Object(h.jsx)("h1",{children:"Pokes received"}),Object(h.jsx)("div",{className:"pokeContainer",children:C}),N.length>m&&Object(h.jsx)(T,{page:i,setPage:u,list:N,limit:m,scrollTo:v})]}),Object(h.jsxs)("div",{className:"pokeColumn2",ref:g,children:[Object(h.jsx)("h1",{children:"Pokes sent"}),Object(h.jsx)("div",{className:"pokeContainer",children:w}),y.length>m&&Object(h.jsx)(T,{page:d,setPage:p,list:y,limit:m,scrollTo:g})]})]})},fe=function(){var e=Object(u.a)(i.a.mark((function e(t,r,n,s){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/baskets",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({targetUserID:r,booksOffered:n,booksRequested:s})});case 2:if((a=e.sent).ok){e.next=10;break}return e.next=6,a.text();case 6:return a=e.sent,e.abrupt("return",{error:a});case 10:return e.next=12,a.json();case 12:return a=e.sent,e.abrupt("return",{created:!0});case 14:case"end":return e.stop()}}),e)})));return function(t,r,n,s){return e.apply(this,arguments)}}(),ke=function(e){var t=e.accessToken,r=e.recipient,s=e.booksOffered,a=e.booksRequested,c=e.setBasketCreatorVisible,o=Object(n.useState)(""),j=Object(l.a)(o,2),d=j[0],p=j[1],O=Object(b.g)(),x=function(){var e=Object(u.a)(i.a.mark((function e(){var n,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.map((function(e){return e._id})),c=s.map((function(e){return e._id})),e.next=4,fe(t,r._id,c,n);case 4:(o=e.sent).error&&p(o.error),o.created&&p("Offer successfully sent!"),setTimeout((function(){return O.push("/me/baskets")}),1e3);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=s.map((function(e){return Object(h.jsx)(q,{book:e},e._id)})),k=a.map((function(e){return Object(h.jsx)(q,{book:e},e._id)}));return Object(h.jsxs)("div",{className:"creatorContainer",id:"basketCreator",children:[!d&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["Confirm that you want to send ",r.name," an offer to exchange your books:"]}),Object(h.jsx)("ul",{children:f}),Object(h.jsx)("p",{children:"against his/her books"}),Object(h.jsx)("ul",{children:k})]}),d&&Object(h.jsx)("p",{children:Object(h.jsx)("b",{children:d})}),Object(h.jsxs)("div",{children:[!d&&Object(h.jsx)("button",{className:"buttonDark",onClick:x,children:"Confirm"}),!d&&Object(h.jsx)("button",{className:"buttonDark",onClick:function(){c(!1)},children:"Cancel"})]})]})},me=function(e){var t=e.accessToken,r=Object(b.h)(),s=r.state.user,a=r.state.chosenBooks,c=Object(n.useState)([]),o=Object(l.a)(c,2),j=o[0],d=o[1],p=Object(n.useState)([]),O=Object(l.a)(p,2),x=O[0],f=O[1],k=Object(n.useState)(!1),m=Object(l.a)(k,2),v=m[0],g=m[1],N=Object(n.useState)(1),y=Object(l.a)(N,2),C=y[0],S=y[1],B=Object(n.useState)(1),I=Object(l.a)(B,2),_=I[0],U=I[1],A=10,R=Object(n.useRef)(),q=Object(n.useRef)();Object(n.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:(r=e.sent).error&&console.log(r.error),r.books&&(n=r.books.filter((function(e){return!e.exchanged})),f(n));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var E=function(e){d(P(e,x,j))},z=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=D(C,A,a);M=M.map((function(e){return Object(h.jsx)(L,{book:e},e._id)}));var V=D(_,A,x);return V=V.map((function(e){return Object(h.jsx)(L,{book:e,type:"checkbox",handleCheckboxChange:E,inputDisabled:v,chosenBooks:j},e._id)})),Object(h.jsxs)("div",{className:"createBasketContainer",children:[Object(h.jsxs)("div",{className:"basketBookList",ref:R,children:[Object(h.jsxs)("div",{className:"basketChosenBooks",children:[Object(h.jsxs)("h1",{className:"booksHeading",children:[s.name,"'s books"]}),M,a.length>A&&Object(h.jsx)(T,{page:C,setPage:S,list:a,limit:A,scrollTo:R})]}),Object(h.jsxs)("div",{className:"basketMyBooks",ref:q,children:[Object(h.jsx)("h1",{className:"booksHeading",children:"My books"}),V,x.length>A&&Object(h.jsx)(T,{page:_,setPage:U,list:x,limit:A,scrollTo:q})]})]}),Object(h.jsx)("button",{className:"buttonDark",onClick:z,disabled:j.length<1,children:"Create a basket"}),v&&Object(h.jsx)(ke,{accessToken:t,booksOffered:j,booksRequested:a,recipient:s,setBasketCreatorVisible:g})]})},ve=function(){return Object(h.jsx)("div",{children:"Page does not exist."})},ge=function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/me/pokes",{method:"get",headers:{Authorization:"Bearer ".concat(t)}});case 2:if((r=e.sent).ok){e.next=10;break}return e.next=6,r.text();case 6:return r=e.sent,e.abrupt("return",{error:r});case 10:return e.next=12,r.json();case 12:return r=e.sent,e.abrupt("return",{pokes:r});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/me/baskets",{method:"get",headers:{Authorization:"Bearer ".concat(t)}});case 2:if((r=e.sent).ok){e.next=10;break}return e.next=6,r.text();case 6:return r=e.sent,e.abrupt("return",{error:r});case 10:return e.next=12,r.json();case 12:return r=e.sent,e.abrupt("return",{baskets:r});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var ye=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),r=t[0],s=t[1],a=Object(n.useState)({}),c=Object(l.a)(a,2),o=c[0],d=c[1],p=Object(n.useState)([]),O=Object(l.a)(p,2),f=O[0],m=O[1],g=Object(n.useState)([]),y=Object(l.a)(g,2),C=y[0],w=y[1],S=Object(n.useState)([]),B=Object(l.a)(S,2),D=B[0],T=B[1],U=Object(n.useRef)(),A=Object(n.useRef)(),R=Object(n.useRef)();Object(n.useEffect)((function(){clearInterval(U.current),clearInterval(A.current),clearInterval(R.current),r&&(P(r),L(r),E(r),q(r)),r||(m([]),d({}),w([]),T([]))}),[r]);var P=function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:(r=e.sent).error&&console.log(r.error),r.user&&d(r.user);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=function(){var e=Object(u.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(t);case 2:(r=e.sent).error&&console.log(r.error),r.pokes&&m(r.pokes.reverse());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())(),n=setInterval(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r());case 1:case"end":return e.stop()}}),e)}))),5e3),U.current=n,e.abrupt("return",(function(){return clearInterval(U.current)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=function(){var e=Object(u.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(t);case 2:(r=e.sent).error&&console.log(r.error),r.conversations&&T(r.conversations);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())(),n=setInterval(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r());case 1:case"end":return e.stop()}}),e)}))),5e3),A.current=n,e.abrupt("return",(function(){return clearInterval(A.current)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=function(){var e=Object(u.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(t);case 2:(r=e.sent).error&&console.log(r.error),r.baskets&&w(r.baskets.reverse());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())(),n=setInterval(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r());case 1:case"end":return e.stop()}}),e)}))),5e3),R.current=n,e.abrupt("return",(function(){return clearInterval(R.current)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(j.a,{basename:"/CodersCamp2020.Project.FullStack-Node-React.PikaBook-frontend",children:[Object(h.jsx)(x,{setAccessToken:s,accessToken:r,loggedUser:o,loggedUsersPokes:f,loggedUsersConversations:D,loggedUsersBaskets:C}),Object(h.jsx)("main",{children:Object(h.jsxs)(b.d,{children:[Object(h.jsx)(b.b,{path:"/",exact:!0,render:function(){return r?Object(h.jsx)(b.a,{to:"/search"}):Object(h.jsx)(v,{setAccessToken:s,setLoggedUser:d})}}),Object(h.jsx)(b.b,{path:"/registration",render:function(){return r?Object(h.jsx)(b.a,{to:"/search"}):Object(h.jsx)(N,{setAccessToken:s})}}),Object(h.jsx)(b.b,{path:"/search",exact:!0,render:function(){return r?Object(h.jsx)(I,{accessToken:r,loggedUser:o}):Object(h.jsx)(b.a,{to:"/"})}}),Object(h.jsx)(b.b,{path:"/user/:id",exact:!0,render:function(){return r?Object(h.jsx)(F,{accessToken:r}):Object(h.jsx)(b.a,{to:"/"})}}),Object(h.jsx)(b.b,{path:"/basket",render:function(){return r?Object(h.jsx)(me,{accessToken:r}):Object(h.jsx)(b.a,{to:"/"})}}),Object(h.jsx)(b.b,{path:"/me",exact:!0,render:function(){return r?Object(h.jsx)(H,{accessToken:r,loggedUser:o,loggedUsersBaskets:C}):Object(h.jsx)(b.a,{to:"/"})}}),Object(h.jsx)(b.b,{path:"/me/books",render:function(){return r?Object(h.jsx)(X,{accessToken:r}):Object(h.jsx)(b.a,{to:"/"})}}),Object(h.jsx)(b.b,{path:"/me/pokes",render:function(){return r?Object(h.jsx)(xe,{accessToken:r,loggedUsersPokes:f,setLoggedUsersPokes:m,loggedUser:o}):Object(h.jsx)(b.a,{to:"/"})}}),Object(h.jsx)(b.b,{path:"/me/conversations",exact:!0,render:function(){return r?Object(h.jsx)(se,{accessToken:r,loggedUser:o,loggedUsersConversations:D}):Object(h.jsx)(b.a,{to:"/"})}}),Object(h.jsx)(b.b,{path:"/me/conversations/conversation",render:function(){return r?Object(h.jsx)(je,{accessToken:r,getLoggedUsersConversations:q,conversationsInterval:A}):Object(h.jsx)(b.a,{to:"/"})}}),Object(h.jsx)(b.b,{path:"/me/baskets",render:function(){return r?Object(h.jsx)(re,{accessToken:r,loggedUser:o,loggedUsersBaskets:C,getLoggedUsersBaskets:E,basketsInterval:R}):Object(h.jsx)(b.a,{to:"/"})}}),Object(h.jsx)(b.b,{render:function(){return Object(h.jsx)(ve,{})}})]})}),Object(h.jsx)(k,{})]})};c.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(ye,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.44a0a855.chunk.js.map