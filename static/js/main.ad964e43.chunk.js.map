{"version":3,"sources":["Assets/Images/pikabook.png","SharedFunctions/filterBaskets.js","Layout/Nav/Nav.js","Layout/Header/Header.js","Assets/Images/pikachu.png","Layout/Footer/Footer.js","API/logIn.js","Views/Login/Login.js","API/createAccount.js","Views/Registration/Registration.js","SharedFunctions/listProperties.js","SharedComponents/BookMini.js","API/fetchBooks.js","SharedFunctions/getPagination.js","SharedComponents/Pagination.js","Views/Search/Search.js","API/fetchUser.js","SharedFunctions/addBooksToList.js","SharedComponents/Book.js","SharedComponents/BookListItem.js","API/sendPoke.js","Views/User/PokeCreator.js","API/sendMessage.js","Views/User/MessageCreator.js","Views/User/User.js","Views/Me/Me.js","API/updateBook.js","Views/MeBooks/EditBook.js","API/deleteBook.js","Views/MeBooks/Book.js","API/addBook.js","Views/MeBooks/AddBook.js","Views/MeBooks/MeBooks.js","API/updateBasket.js","Views/MeBaskets/Buttons.js","Views/MeBaskets/SingleBasket.js","Views/MeBaskets/MeBaskets.js","Views/Conversations/ConversationRecap.js","Views/Conversations/Conversations.js","API/fetchConversations.js","API/updateConversation.js","Views/SingleConversation/SingleConversation.js","Views/Pokes/Poke.js","API/updatePoke.js","Views/Pokes/Pokes.js","API/createBasket.js","Views/Basket/BasketCreator.js","Views/Basket/Basket.js","Views/Error.js","API/fetchPokes.js","API/fetchBaskets.js","App.js","index.js"],"names":["newBasketsToLoggedUser","loggedUsersBaskets","userId","notReadBaskets","filter","basket","read","newToRequestor","newToTarget","createdByLoggedUser","createdByUserId","_id","includes","status","createdByOtherUser","concat","Nav","setAccessToken","loggedUser","loggedUsersPokes","loggedUsersConversations","newPokes","poke","recipient","length","newMessages","conversation","messages","newBaskets","className","activeClassName","to","exact","class","onClick","Header","accessToken","src","logo","alt","Footer","href","target","pikachu","logIn","email","password","a","fetch","method","headers","Accept","body","JSON","stringify","res","ok","text","error","json","token","Login","useState","emailInput","setEmailInput","passwordInput","setPasswordInput","setStatus","handleInputChange","e","id","value","handleSubmit","preventDefault","onSubmit","type","placeholder","onChange","required","createAccount","name","location","created","Registration","usernameInput","setUsernameInput","locationInput","setLocationInput","creationStatus","setCreationStatus","history","useHistory","setTimeout","push","listProperties","list","map","singleProperty","index","join","BookMini","book","author","ownerId","bookId","searchMyBooks","searchBooks","searchUsersBooks","url","params","URLSearchParams","Authorization","books","getPagination","page","limit","min","max","item","Pagination","setPage","scrollTo","getMaxPageNumber","result","Math","ceil","handlePageChange","maxNumber","current","scrollIntoView","behavior","block","maxPageNumber","Search","searchTitle","setSearchTitle","searchLocation","setSearchLocation","searchAuthor","setSearchAuthor","searchGenre","setSearchGenre","setBooks","useRef","genres","otherUsersBooks","exchanged","reverse","bookList","ref","fetchLoggedUser","fetchUser","fetchOtherUser","user","addBooksToList","chosenBooks","checked","newBook","find","Book","publisher","year","description","handleCheckboxChange","inputDisabled","disabled","some","BookListItem","sendPoke","PokeCreator","setPokeCreatorVisible","handleConfirm","booksId","sendMessage","content","message","MessageCreator","setMessageCreatorVisible","messageContent","setMessageContent","sentMessage","setSentMessage","User","useParams","setUser","setChosenBooks","pokeCreatorVisible","messageCreatorVisible","useLocation","useEffect","getBooks","chosenBookId","state","sort","bookOne","bookTwo","getUserData","console","log","handleSendPoke","Me","successfulExchanges","updateBook","bookBody","updated","EditBook","setEditBookVisible","bookData","setCreatorVisible","titleInput","setTitleInput","authorInput","setAuthorInput","genresInput","setGeneresInput","releaseDateInput","setReleaseDateInput","publisherInput","setPublisherInput","descriptionInput","setDescriptionInput","handleUpdate","authorListInput","split","genresListInput","deleteBook","deleted","data","creatorVisible","editBookVisible","handleEditBook","handleRemoval","addBook","added","AddBook","autorListInput","MeBooks","myBooks","setMyBooks","updateBasketStatus","basketStatus","basketId","baskets","updateBasketRead","Buttons","isUserRequestor","coOwnerName","getLoggedUsersBaskets","basketsInterval","handleOnClick","clearTimeout","SingleBasket","booksOffered","booksRequested","targetUserID","timeCreated","timeOfCreation","Date","toLocaleString","coOwner","coOwnersBooks","myBooksList","coOwnersBooksList","getStatus","MeBaskets","updateRead","forEach","basketList","ConversationRecap","interlocutors","interlocutor","lastMessage","date","sender","slice","isRead","Conversations","conversationsList","b","dateA","fetchConversations","conversations","fetchConversationByInterlocutor","interlocutorsId","updateConversation","Message","creationDate","SingleConversation","getLoggedUsersConversations","conversationsInterval","setMessages","prevMessages","messageInput","setMessageInput","conversationInterval","setLimit","messagesDiv","updateMessages","getMessages","_","isEqual","clearInterval","interval","setInterval","scroll","scrollHeight","clientHeight","scrollToMyRef","messageList","PokeReceived","PokeSent","Poke","updatePoke","Pokes","setLoggedUsersPokes","receivedPage","setReceivedPage","offeredPage","setOfferedPage","prevPokes","setPrevPokes","onPageLimit","scrollTo1","scrollTo2","updatedPokes","receivedPokes","offeredPokes","receivedPokesList","offeredPokesList","createBasket","BasketCreator","setBasketCreatorVisible","requestedBooksId","offeredBooksId","offeredBooksList","requestedBooksList","CreateBasket","offeredBooks","setOfferedBooks","basketCreatorVisible","chosenPage","setChosenPage","chosenScrollTo","myScrollTo","handleCreateBasket","chosenBooksList","Error","fetchPokes","pokes","fetchBaskets","App","setLoggedUser","setLoggedUsersBaskets","setLoggedUsersConversations","pokesInterval","getLoggedUserData","getLoggedUsersPokes","getPokes","getConversations","getBaskets","basename","process","path","render","Basket","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ad964e43.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/pikabook.d219f79b.png\";","const newBasketsToLoggedUser = (loggedUsersBaskets, userId) => {\nconst notReadBaskets = loggedUsersBaskets.filter(basket => !basket.read);\n    const newToRequestor = [\"accepted\", \"rejected\", \"failedByRequestor\", \"successByTarget\", \"success\"];\n    const newToTarget = [\"pending\", \"cancelled\", \"failedByTarget\", \"successByRequestor\", \"success\"];\n    const createdByLoggedUser = notReadBaskets.filter(\n      (basket) => basket.createdByUserId._id === userId && newToRequestor.includes(basket.status));\n    const createdByOtherUser = notReadBaskets.filter(\n      (basket) => basket.createdByUserId._id !== userId && newToTarget.includes(basket.status)\n    );\n    return createdByLoggedUser.concat(createdByOtherUser);\n}\n\nexport default newBasketsToLoggedUser;","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nimport newBasketsToLoggedUser from '../../SharedFunctions/filterBaskets';\n\nconst Nav = ({\n  setAccessToken,\n  loggedUser: { _id },\n  loggedUsersPokes,\n  loggedUsersConversations,\n  loggedUsersBaskets,\n}) => {\n  const handleLogOut = () => {\n    setAccessToken(\"\");\n  };\n\n  const newPokes = () => {\n    const receivedPokes = loggedUsersPokes.filter(\n      (poke) => poke.recipient._id === _id\n    );\n    return receivedPokes.filter((poke) => !poke.read).length;\n  };\n\n  const newMessages = () => {\n    return loggedUsersConversations.filter((conversation) => {\n      const { read, recipient } = conversation.messages[0];\n      return !read && recipient === _id;\n    }).length;\n  };\n\n  const newBaskets = () => {\n    return newBasketsToLoggedUser(loggedUsersBaskets, _id).length;\n  };\n\n  return (\n    <div className=\"nav\">\n      <NavLink className=\"nav-item\" activeClassName=\"is-active\" to=\"/search\">\n        <i className=\"fas fa-search\"></i>\n        <span>Search</span>\n      </NavLink>\n      <NavLink\n        className=\"nav-item\"\n        activeClassName=\"is-active\"\n        to=\"/me/conversations\"\n      >\n        <i className=\"fas fa-envelope\"></i>\n        <span>Messages</span>\n        {newMessages() > 0 && <div className=\"alert\">{newMessages()}</div>}\n      </NavLink>\n      <NavLink className=\"nav-item\" activeClassName=\"is-active\" to=\"/me/baskets\">\n        <i className=\"fas fa-shopping-basket\"></i>\n        <span>Baskets</span>\n        {newBaskets() > 0 && <div className=\"alert\">{newBaskets()}</div>}\n      </NavLink>\n      <NavLink className=\"nav-item\" activeClassName=\"is-active\" to=\"/me\" exact>\n        <i className=\"fas fa-user-circle\"></i>\n        <span>My profile</span>\n      </NavLink>\n      <NavLink className=\"nav-item\" activeClassName=\"is-active\" to=\"/me/books\">\n        <i className=\"fas fa-book\"></i>\n        <span>My books</span>\n      </NavLink>\n      <NavLink className=\"nav-item\" activeClassName=\"is-active\" to=\"/me/pokes\">\n        <i class=\"fas fa-bell\"></i>\n        {newPokes() > 0 && <div className=\"alert\">{newPokes()}</div>}\n      </NavLink>\n      <NavLink className=\"nav-item log-out\" to=\"/\" onClick={handleLogOut}>\n        <i className=\"fas fa-power-off\"></i>\n      </NavLink>\n    </div>\n  );\n};\n\nexport default Nav;\n","import React from \"react\";\nimport logo from \"../../Assets/Images/pikabook.png\";\nimport Nav from \"../Nav/Nav\";\n\nconst Header = ({\n  setAccessToken,\n  accessToken,\n  loggedUser,\n  loggedUsersPokes,\n  loggedUsersConversations,\n  loggedUsersBaskets\n}) => {\n  return (\n    <header>\n      <img className=\"img-logo\" src={logo} alt=\"Pikabook\" />\n      {accessToken && (\n        <Nav\n          setAccessToken={setAccessToken}\n          loggedUser={loggedUser}\n          loggedUsersPokes={loggedUsersPokes}\n          loggedUsersConversations={loggedUsersConversations}\n          loggedUsersBaskets={loggedUsersBaskets}\n        />\n      )}\n    </header>\n  );\n};\n\nexport default Header;\n","export default __webpack_public_path__ + \"static/media/pikachu.8624571d.png\";","import React from \"react\";\nimport pikachu from \"../../Assets/Images/pikachu.png\";\n\nconst Footer = () => {\n  return (\n    <footer>\n      <div className=\"books\"></div>\n      <div className=\"about\">\n        <p>\n          Pikabook APP is for book lovers. Are you one of them? If so,{\" \"}\n          <span>pick a book</span> you want to read. Then suggest yours you have\n          already read. That's all. <span>Connect with other bookworms!</span>\n        </p>\n        <div className=\"github\">\n          Application made as part of the <b>CodersCamp2020</b> project.\n          <br />\n          <a\n            href=\"https://github.com/lukaszdutka/CodersCamp2020.Project.FullStack-Node-React.PikaBook-frontend\"\n            target=\"_blank\"\n          >\n            Visit Github for more information.\n          </a>\n        </div>\n      </div>\n      <div className=\"authors\">\n        <div>\n          <b>Created by Mangosteam</b>\n          <ul>\n            <li>Mentor: ukasz Dutka</li>\n            <li>Aleksandra Cypko</li>\n            <li>Magorzata Dziewit</li>\n            <li>Daria Dziubatowska</li>\n            <li>Agata Ludwiczyska</li>\n            <li>Mariusz Smar</li>\n          </ul>\n        </div>\n        <img src={pikachu} alt=\"pikachu\" />\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;\n","const logIn = async (email, password) => {\n  let res = await fetch(\"https://pikabook.herokuapp.com/api/auth\", {\n    method: \"post\",\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { accessToken: res.token };\n  }\n};\n\nexport default logIn;\n","import { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport logIn from \"../../API/logIn\";\n\nconst Login = ({ setAccessToken }) => {\n  const [emailInput, setEmailInput] = useState(\"\");\n  const [passwordInput, setPasswordInput] = useState(\"\");\n  const [status, setStatus] = useState();\n\n  const handleInputChange = (e) => {\n    if (e.target.id === \"loginEmail\") return setEmailInput(e.target.value);\n    if (e.target.id === \"loginPassword\")\n      return setPasswordInput(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setStatus(\"Wait...\");\n    const res = await logIn(emailInput, passwordInput);\n    if (res.error) setStatus(res.error);\n    setEmailInput(\"\");\n    setPasswordInput(\"\");\n    if (res.accessToken) {\n      setAccessToken(res.accessToken);\n    } \n  };\n\n  return (\n    <div className=\"logInAndRegistration\">\n      <form onSubmit={handleSubmit}>\n        <h1>Log in</h1>\n        <input\n          className=\"textInputDark\"\n          type=\"email\"\n          id=\"loginEmail\"\n          placeholder=\"E-mail\"\n          value={emailInput}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <input\n          className=\"textInputDark\"\n          type=\"password\"\n          id=\"loginPassword\"\n          placeholder=\"Password\"\n          value={passwordInput}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <input type=\"submit\" value=\"Log in\" className=\"buttonDark\"></input>\n        <div className='status'>\n          {status === \"Wait...\" ? <div className=\"loader\"></div> : status}\n        </div>\n        <p>\n          <Link to=\"/registration\">CREATE A NEW ACCOUNT!</Link>\n        </p>\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n","export const createAccount = async (name, email, password, location) => {\n  let res = await fetch(\"https://pikabook.herokuapp.com/api/users\", {\n    method: \"post\",\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      name,\n      email,\n      password,\n      location,\n    }),\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { created: false, error: res };\n  } else {\n    res = await res.json();\n    return { created: true };\n  }\n};\n\nexport default createAccount;\n","import { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport createAccount from \"../../API/createAccount\"\n\nconst Registration = () => {\n  const [usernameInput, setUsernameInput] = useState(\"\");\n  const [emailInput, setEmailInput] = useState(\"\");\n  const [passwordInput, setPasswordInput] = useState(\"\");\n  const [locationInput, setLocationInput] = useState(\"\");\n  const [creationStatus, setCreationStatus] = useState();\n  const history = useHistory();\n\n  const handleInputChange = (e) => {\n    if (e.target.id === \"registerUsername\")\n      return setUsernameInput(e.target.value);\n    if (e.target.id === \"registerEmail\") return setEmailInput(e.target.value);\n    if (e.target.id === \"registerPassword\")\n      return setPasswordInput(e.target.value);\n    if (e.target.id === \"registerLocation\")\n      return setLocationInput(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    setCreationStatus(\"Request is being sent\");\n    e.preventDefault();\n    const res = await createAccount(\n      usernameInput,\n      emailInput,\n      passwordInput,\n      locationInput\n    );\n    res.error\n      ? setCreationStatus(res.error)\n      : setCreationStatus(\"Account successfully created\");\n    setUsernameInput(\"\");\n    setEmailInput(\"\");\n    setPasswordInput(\"\");\n    setLocationInput(\"\");\n    if (res.created) {\n      setTimeout(() => {\n        history.push(\"/\");\n      }, 2000);\n    }\n  };\n\n  return (\n    <div className=\"logInAndRegistration\"> \n      <form onSubmit={handleSubmit}>\n        <h1>Register</h1>\n        <input\n          type=\"text\"\n          className=\"textInputDark\"\n          id=\"registerUsername\"\n          placeholder=\"Name\"\n          value={usernameInput}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <input\n          type=\"email\"\n          className=\"textInputDark\"\n          id=\"registerEmail\"\n          placeholder=\"E-mail\"\n          value={emailInput}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <input\n          type=\"password\"\n          className=\"textInputDark\"\n          id=\"registerPassword\"\n          placeholder=\"Password\"\n          value={passwordInput}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <input\n          type=\"text\"\n          className=\"textInputDark\"\n          id=\"registerLocation\"\n          placeholder=\"Location\"\n          value={locationInput}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <input\n          type=\"submit\"\n          value=\"Create a new account\"\n          className=\"buttonDark\"\n        ></input>\n        <div className='status'>\n          {creationStatus === \"Request is being sent\" ? <div className=\"loader\"></div> : creationStatus}\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Registration;\n","const listProperties = (list) => {\n    return list.map((singleProperty, index) => {\n      if (index < list.length - 1) return singleProperty + \", \";\n      return singleProperty;\n    }).join(\"\");\n  };\n\nexport default listProperties","import { useHistory } from \"react-router-dom\";\nimport listProperties from \"../SharedFunctions/listProperties\";\n\nconst BookMini = ({ book: { name, author, ownerId, _id } }) => {\n  const history = useHistory();\n\n  const handleOnClick = (e) => {\n    history.push(`/user/${ownerId._id}`, {bookId: e.target.id});\n  };\n\n  return (\n    <div className=\"book\">\n      <div className=\"bookData\">\n        <h3>{name}</h3>\n        <p>{listProperties(author)}</p>\n      </div>\n      <div className=\"userData\">\n        <p>{ownerId.name}</p>\n        <p>{ownerId.location} {ownerId.location && <i className=\"fas fa-map-marker-alt\"> </i>}</p>\n      </div>\n      <input\n        className=\"buttonDark\"\n        type=\"button\"\n        value=\"User's profile\"\n        id={_id}\n        onClick={handleOnClick}\n      ></input>\n    </div>\n  );\n};\n\nexport default BookMini;\n","export const searchAllBooks = (params) => {\n  return searchBooks(\"https://pikabook.herokuapp.com/api/books?\", params);\n};\n\nexport const searchMyBooks = (accessToken) => {\n  return searchBooks(\n    \"https://pikabook.herokuapp.com/api/me/books\",\n    {},\n    accessToken\n  );\n};\n\nexport const searchUsersBooks = (id) => {\n  return searchBooks(`https://pikabook.herokuapp.com/api/users/${id}/books`);\n};\n\nexport const searchOneBook = async (id) => {\n  let res = await fetch(`https://pikabook.herokuapp.com/api/books/${id}`);\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { book: res };\n  }\n}\n\nconst searchBooks = async (url, params = {}, accessToken = '') => {\n  let res = await fetch(url + new URLSearchParams(params), {\n    method: \"get\",\n    headers: { Authorization: `Bearer ${accessToken}`}\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { books: [], error: res };\n  } else {\n    res = await res.json();\n    return { books: res };\n  }\n};\n","const getPagination = (page, limit, list) => {\n    const min = page * limit - limit;\n    const max = min + limit - 1;\n    return list.filter((item, index) => index >= min && index <= max);\n  };\n\nexport default getPagination","const Pagination = ({ page, setPage, list, limit, scrollTo }) => {\n\n  const getMaxPageNumber = () => {\n    const result = Math.ceil(list.length / limit);\n    if (result < 1) return 1;\n    return result;\n  };\n\n  const handlePageChange = (e, type) => {\n    const maxNumber = getMaxPageNumber(limit);\n    if (type === \"next\" && page < maxNumber) setPage(page + 1);\n    if (type === \"previous\" && page > 1) setPage(page - 1);\n    if (type === \"input\") setPage(e.target.value);\n    if (scrollTo) scrollTo.current.scrollIntoView({ behavior: 'smooth', block: 'start' })\n  };\n\n  const maxPageNumber = getMaxPageNumber(limit);\n\n  return (\n    <div className=\"pagination\">\n      {page > 1 && (\n        <button className=\"buttonArrow prev\" onClick={(e) => handlePageChange(e, \"previous\")}>\n          &#x2190;\n        </button>\n      )}\n      <span>Page </span>\n      <input\n        type=\"number\"\n        value={page}\n        min=\"1\"\n        max={maxPageNumber}\n        onChange={(e) => handlePageChange(e, \"input\")}\n      ></input>\n      <span> out of {maxPageNumber}</span>\n      {page < maxPageNumber && (\n        <button className=\"buttonArrow next\" onClick={(e) => handlePageChange(e, \"next\")}>&#x2192;</button>\n      )}\n    </div>\n  );\n};\n\nexport default Pagination;\n","import { useState, useRef } from \"react\";\nimport Book from \"../../SharedComponents/BookMini\";\nimport { searchAllBooks } from \"../../API/fetchBooks\";\nimport getPagination from \"../../SharedFunctions/getPagination\";\nimport Pagination from \"../../SharedComponents/Pagination\";\n\nconst Search = ({ loggedUser }) => {\n  const [searchTitle, setSearchTitle] = useState(\"\");\n  const [searchLocation, setSearchLocation] = useState(\"\");\n  const [searchAuthor, setSearchAuthor] = useState(\"\");\n  const [searchGenre, setSearchGenre] = useState(\"\");\n  const [books, setBooks] = useState([]);\n  const [status, setStatus] = useState(\"Let's start searching!\");\n  const [page, setPage] = useState(1);\n  const onPageLimit = 10;\n  const scrollTo = useRef();\n\n  const handleInputChange = (e) => {\n    if (e.target.id === \"searchTitle\") return setSearchTitle(e.target.value);\n    if (e.target.id === \"searchAuthor\") return setSearchAuthor(e.target.value);\n    if (e.target.id === \"searchGenre\") return setSearchGenre(e.target.value);\n    if (e.target.id === \"searchLocation\")\n      return setSearchLocation(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setStatus(\"Searching...\");\n    setPage(1);\n    const res = await searchAllBooks({\n      name: searchTitle,\n      location: searchLocation,\n      author: searchAuthor, \n      genres: searchGenre\n    });\n    if (res.error) setStatus(res.error);\n    const otherUsersBooks = res.books.filter(\n      (book) => book.ownerId._id !== loggedUser._id && !book.exchanged\n    );\n    setBooks(otherUsersBooks.reverse());\n    otherUsersBooks.length === 0\n      ? setStatus(\"No books found\")\n      : setStatus(`${otherUsersBooks.length} book(s) found`);\n  };\n\n  let bookList = getPagination(page, onPageLimit, books);\n  bookList = bookList.map((book) => <Book key={book._id} book={book} />);\n\n  return (\n    <div className=\"search\">\n      <div className=\"logInAndRegistration\">\n        <form onSubmit={handleSubmit}>\n          <input\n            className=\"textInputDark\"\n            type=\"text\"\n            id=\"searchTitle\"\n            placeholder=\"Book's title\"\n            value={searchTitle}\n            onChange={handleInputChange}\n          ></input>\n          <input\n            className=\"textInputDark\"\n            type=\"text\"\n            id=\"searchAuthor\"\n            placeholder=\"Book's author\"\n            value={searchAuthor}\n            onChange={handleInputChange}\n          ></input>\n          <input\n            className=\"textInputDark\"\n            type=\"text\"\n            id=\"searchGenre\"\n            placeholder=\"Book's genre\"\n            value={searchGenre}\n            onChange={handleInputChange}\n          ></input>\n          <input\n            className=\"textInputDark\"\n            type=\"text\"\n            id=\"searchLocation\"\n            placeholder=\"Location\"\n            value={searchLocation}\n            onChange={handleInputChange}\n          ></input>\n          <input className=\"buttonDark\" type=\"submit\" value=\"Search\"></input>\n          <div className=\"status\">\n            {status === \"Searching...\" ? (\n              <div className=\"loader\"></div>\n            ) : (\n              status\n            )}\n          </div>\n        </form>\n      </div>\n      <div ref={scrollTo}>\n        {books.length > onPageLimit && (\n          <Pagination\n            page={page}\n            setPage={setPage}\n            list={books}\n            limit={onPageLimit}\n            scrollTo={scrollTo}\n          />\n        )}\n        <div className=\"booksList\">{bookList}</div>\n        {books.length > onPageLimit && (\n          <Pagination\n            page={page}\n            setPage={setPage}\n            list={books}\n            limit={onPageLimit}\n            scrollTo={scrollTo}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Search;\n","export const fetchLoggedUser = (accessToken) => {\n  return fetchUser(\"https://pikabook.herokuapp.com/api/me\", accessToken);\n};\n\nexport const fetchOtherUser = (id) => {\n  return fetchUser(`https://pikabook.herokuapp.com/api/users/${id}`);\n};\n\nconst fetchUser = async (url, accessToken) => {\n  let res = await fetch(url, {\n    method: \"get\",\n    headers: {\n      Authorization: `Bearer ${accessToken}`\n    }\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { user: res };\n  }\n};\n","const addBooksToList = (e, books, chosenBooks) => {\n  if (!e.target.checked) {\n    return chosenBooks.filter((book) => book._id !== e.target.id);\n  }\n  if (e.target.checked) {\n    const newBook = books.find((book) => book._id === e.target.id);\n    return [...chosenBooks, newBook];\n  }\n};\n\nexport default addBooksToList;\n","import listProperties from \"../SharedFunctions/listProperties\";\n\nconst Book = ({\n  book: { _id, name, author, genres, publisher, year, description },\n  type,\n  handleCheckboxChange,\n  inputDisabled,\n  chosenBooks,\n}) => {\n  return (\n    <div className=\"bookContainer\">\n      <div className=\"bookInfo\">\n        <p className=\"bookTitle\">\n          <b>{name}</b>\n        </p>\n        {author.length > 0 && (\n          <p className=\"author\">\n            <b>Author:</b> {listProperties(author)}\n          </p>\n        )}\n        {publisher && (\n          <p className=\"publisher\">\n            <b>Publisher:</b> {publisher}\n          </p>\n        )}\n        {year && (\n          <p className=\"year\">\n            <b>Publication year:</b> {year}\n          </p>\n        )}\n        {genres.length > 0 && (\n          <p className=\"genres\">\n            <b>Genre:</b> {listProperties(genres)}\n          </p>\n        )}\n        {description && (\n          <p className=\"description\">\n            <b>Description:</b> {description}\n          </p>\n        )}\n      </div>\n      {type === \"checkbox\" && (\n        <input\n          className=\"checkboxStyled\"\n          type=\"checkbox\"\n          onChange={handleCheckboxChange}\n          id={_id}\n          disabled={inputDisabled}\n          checked={chosenBooks.some((book) =>\n            book._id === _id ? true : false\n          )}\n        ></input>\n      )}\n    </div>\n  );\n};\n\nexport default Book;\n","import listProperties from \"../SharedFunctions/listProperties\";\n\nconst BookListItem = ( { book: { name, author, publisher, year, _id } }) => {\n    return (\n      <li key={_id}>\n        <b>{name}</b>\n        {author.length > 0 && ` by ${listProperties(author)}`} {publisher}{\" \"}\n        {year}\n      </li>\n    );\n}\n \nexport default BookListItem;\n","export const sendPoke = async (accessToken, recipient, books) => {\n  let res = await fetch(\"https://pikabook.herokuapp.com/api/pokes\", {\n    method: \"post\",\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${accessToken}`,\n    },\n    body: JSON.stringify({\n      recipient,\n      books,\n    }),\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { created: true };\n  }\n};\n\nexport default sendPoke;\n","import { useState } from \"react\";\n\nimport BookListItem from \"../../SharedComponents/BookListItem\";\nimport sendPoke from \"../../API/sendPoke\";\n\nconst PokeCreator = ({\n  accessToken,\n  books,\n  recipient,\n  setPokeCreatorVisible,\n}) => {\n  const [status, setStatus] = useState(\"\");\n\n  const handleConfirm = async () => {\n    const booksId = books.map((book) => book._id);\n    const res = await sendPoke(accessToken, recipient._id, booksId);\n    if (res.error) setStatus(res.error);\n    if (res.created) setStatus(\"Poke successfully sent!\");\n  };\n\n  const handleCancel = () => {\n    setPokeCreatorVisible(false);\n  };\n\n  const bookList = books.map((book) => (\n    <BookListItem key={book._id} book={book} />\n  ));\n\n  return (\n    <div className=\"creatorContainer\" id=\"pokeCreator\">\n      {!status && (\n        <>\n          <p>\n            Invite {<b>{recipient.name}</b>} to browse your book collection and make\n            him/her know that you showed interest in the following books in\n            their possession:\n          </p>\n          <ul>{bookList.length > 0 ? bookList : \"None\"}</ul>\n        </>\n      )}\n      {status && (\n        <p>\n          <b>{status}</b>\n        </p>\n      )}\n      <div>\n        {!status && (\n          <button className=\"buttonDark\" onClick={handleConfirm}>\n            Confirm\n          </button>\n        )}\n        <button className=\"buttonDark\" onClick={handleCancel}>\n          {status ? \"Back\" : \"Cancel\"}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default PokeCreator;\n","export const sendMessage = async (accessToken, recipient, content) => {\n  let res = await fetch(\"https://pikabook.herokuapp.com/api/conversations\", {\n    method: \"post\",\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${accessToken}`,\n    },\n    body: JSON.stringify({\n      recipient,\n      content,\n    }),\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { created: false, error: res };\n  } else {\n    res = await res.json();\n    return { created: true, message: res.content };\n  }\n};\n\nexport default sendMessage;\n","import { useState } from \"react\";\n\nimport sendMessage from \"../../API/sendMessage\";\n\nconst MessageCreator = ({\n  accessToken,\n  recipient,\n  setMessageCreatorVisible,\n}) => {\n  const [messageContent, setMessageContent] = useState(\"\");\n  const [sentMessage, setSentMessage] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n\n  const handleTextareaChange = (e) => {\n    setMessageContent(e.target.value);\n  };\n\n  const handleConfirm = async () => {\n    const res = await sendMessage(accessToken, recipient._id, messageContent);\n    if (res.error) setStatus(res.error);\n    if (res.created) setStatus(\"Message successfully sent!\");\n    if (res.message) setSentMessage(res.message);\n  };\n\n  const handleCancel = () => {\n    setMessageCreatorVisible(false);\n  };\n\n  return (\n    <div className=\"creatorContainer\" id=\"messageCreator\">\n      <h1>Send a message to {recipient.name}</h1>\n      {sentMessage ? (\n        <>\n          <p className=\"sentMessage\">{sentMessage}</p>\n        </>\n      ) : (\n        <textarea\n          onChange={handleTextareaChange}\n          value={messageContent}\n        ></textarea>\n      )}\n      {status && (\n        <p>\n          <b>{status}</b>\n        </p>\n      )}\n      <div>\n        {!sentMessage && (\n          <button className=\"buttonDark\" onClick={handleConfirm}>\n            Confirm\n          </button>\n        )}\n        <button className=\"buttonDark\" onClick={handleCancel}>\n          {sentMessage ? \"Back\" : \"Cancel\"}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default MessageCreator;\n","import { useState, useEffect, useRef } from \"react\";\nimport { useParams, useHistory, useLocation } from \"react-router-dom\";\n\nimport { searchUsersBooks } from \"../../API/fetchBooks\";\nimport { fetchOtherUser } from \"../../API/fetchUser\";\nimport addBooksToList from \"../../SharedFunctions/addBooksToList\";\nimport Book from \"../../SharedComponents/Book\";\nimport PokeCreator from \"./PokeCreator\";\nimport MessageCreator from \"./MessageCreator\";\nimport getPagination from \"../../SharedFunctions/getPagination\";\nimport Pagination from \"../../SharedComponents/Pagination\";\n\nconst User = ({ accessToken }) => {\n  const { id } = useParams();\n  const [books, setBooks] = useState([]);\n  const [user, setUser] = useState(\"\");\n  const [chosenBooks, setChosenBooks] = useState([]);\n  const [pokeCreatorVisible, setPokeCreatorVisible] = useState(false);\n  const [messageCreatorVisible, setMessageCreatorVisible] = useState(false);\n  const [status, setStatus] = useState(\"\");\n  const [page, setPage] = useState(1);\n  const onPageLimit = 10;\n  const scrollTo = useRef();\n  const history = useHistory();\n  const location = useLocation();\n\n  useEffect(() => {\n    setStatus(\"Loading...\");\n    const getBooks = async () => {\n      const chosenBookId = location.state.bookId;\n      const res = await searchUsersBooks(id);\n      if (res.error) setStatus(res.error);\n      if (res.books) {\n        let bookList = res.books.filter(book => !book.exchanged);\n        bookList = bookList.sort((bookOne, bookTwo) => {\n          return bookOne._id === chosenBookId\n            ? -1\n            : bookTwo._id === chosenBookId\n            ? 1\n            : 0;\n        });\n        setBooks(bookList);\n        setStatus(\"\");\n      }\n    };\n    const getUserData = async () => {\n      const res = await fetchOtherUser(id);\n      if (res.error) console.log(res.error);\n      if (res.user) {\n        setUser(res.user);\n      }\n    };\n    getBooks();\n    getUserData();\n  }, [id, location.state.bookId]);\n\n  const handleSendMessage = () => {\n    !pokeCreatorVisible && setMessageCreatorVisible(true);\n  };\n\n  const handleSendPoke = async () => {\n    !messageCreatorVisible && setPokeCreatorVisible(true);\n  };\n\n  const handleCreateBasket = () => {\n    history.push(\"/basket\", { chosenBooks, user });\n  };\n\n  const handleCheckboxChange = (e) => {\n    setChosenBooks(addBooksToList(e, books, chosenBooks));\n  };\n\n  let bookList = getPagination(page, onPageLimit, books);\n  bookList = bookList.map((book) => (\n    <Book\n      key={book._id}\n      book={book}\n      type=\"checkbox\"\n      handleCheckboxChange={handleCheckboxChange}\n      inputDisabled={pokeCreatorVisible || messageCreatorVisible}\n      chosenBooks={chosenBooks}\n    />\n  ));\n\n  return (\n    <div className=\"userContainer\">\n      <div className=\"usersBooks\" ref={scrollTo}>\n        <h1 className=\"booksHeading\">Books</h1>\n        {status ? status : bookList}\n        {books.length > onPageLimit && (\n          <Pagination\n            page={page}\n            setPage={setPage}\n            list={books}\n            limit={onPageLimit}\n            scrollTo={scrollTo}\n          />\n        )}\n      </div>\n      <div className=\"userPanel\">\n        <div className=\"userInfo\">\n          <p>{user.name}</p>\n          {user.location && (\n            <p>\n              <i className=\"fas fa-map-marker-alt\"></i> {user.location}\n            </p>\n          )}\n          <button className=\"buttonDark\" onClick={handleSendMessage}>\n            Send message\n          </button>\n        </div>\n        <div className=\"userInfo\">\n          <button\n            className=\"buttonDark\"\n            onClick={handleCreateBasket}\n            disabled={chosenBooks.length < 1}\n          >\n            Add to basket\n          </button>\n          <p className=\"or\">OR</p>\n          <button className=\"buttonDark\" onClick={handleSendPoke}>\n            Create poke\n          </button>\n        </div>\n      </div>\n      {pokeCreatorVisible && (\n        <PokeCreator\n          accessToken={accessToken}\n          recipient={user}\n          books={chosenBooks}\n          setPokeCreatorVisible={setPokeCreatorVisible}\n        />\n      )}\n      {messageCreatorVisible && (\n        <MessageCreator\n          accessToken={accessToken}\n          recipient={user}\n          setMessageCreatorVisible={setMessageCreatorVisible}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default User;\n","const Me = ({ loggedUser: { name, email, location }, loggedUsersBaskets }) => {\n  const successfulExchanges = loggedUsersBaskets.filter(\n    (basket) => basket.status === \"success\"\n  ).length;\n\n  return (\n    <div className=\"meContainer\">\n      <h1>Account details</h1>\n      <p>\n        <b>Name:</b> {name}\n      </p>\n      <p>\n        <b>E-mail:</b> {email}\n      </p>\n      <p>\n        <b>Location:</b> {location ? location : \"-\"}\n      </p>\n      <p>\n        <b>Successful exchanges:</b> {successfulExchanges}\n      </p>\n    </div>\n  );\n};\n\nexport default Me;\n","export const updateBook = async (\n    accessToken, \n    id,\n    name, \n    author, \n    genres, \n    year, \n    publisher, \n    description\n    ) => {\n    \n    const bookBody = {}\n    bookBody.name = name\n    if (author.length !== 0) { bookBody.author = author }\n    if (genres.length !== 0) { bookBody.genres = genres }\n    if (year) { bookBody.year = year }\n    if (publisher) { bookBody.publisher = publisher }\n    if (description) { bookBody.description = description }\n\n    let res = await fetch(`https://pikabook.herokuapp.com/api/books/${id}`, {\n      method: \"put\",\n      headers: {\n        Accept: \"application/json, text/plain, */*\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${accessToken}`,\n      },\n      body: JSON.stringify(bookBody),\n    });\n    if (!res.ok) {\n      res = await res.text();\n      return { error: res };\n    } else {\n      res = await res.json();\n      return { updated: true };\n    }\n  };\n  \n  export default updateBook;","import { useState } from \"react\";\nimport { updateBook } from \"../../API/updateBook\";\n\nconst EditBook = ({\n  accessToken,\n  setEditBookVisible,\n  bookData: { name, author, genres, year, publisher, description, _id },\n  getBooks,\n  setCreatorVisible,\n}) => {\n  const [titleInput, setTitleInput] = useState(name);\n  const [authorInput, setAuthorInput] = useState(author.join(\", \"));\n  const [genresInput, setGeneresInput] = useState(genres.join(\", \"));\n  const [releaseDateInput, setReleaseDateInput] = useState(year);\n  const [publisherInput, setPublisherInput] = useState(publisher);\n  const [descriptionInput, setDescriptionInput] = useState(description);\n  const [status, setStatus] = useState(\"\");\n\n  const handleInputChange = (e) => {\n    if (e.target.id === \"bookTitle\") return setTitleInput(e.target.value);\n    if (e.target.id === \"author\") return setAuthorInput(e.target.value);\n    if (e.target.id === \"genres\") return setGeneresInput(e.target.value);\n    if (e.target.id === \"releaseDate\")\n      return setReleaseDateInput(e.target.value);\n    if (e.target.id === \"publisher\") return setPublisherInput(e.target.value);\n    if (e.target.id === \"description\")\n      return setDescriptionInput(e.target.value);\n  };\n\n  const handleUpdate = async (e) => {\n    e.preventDefault();\n    let authorListInput = authorInput.split(\",\");\n    if (authorInput === \"\") {\n      authorListInput = [];\n    }\n    let genresListInput = genresInput.split(\",\");\n    if (genresInput === \"\") {\n      genresListInput = [];\n    }\n    const res = await updateBook(\n      accessToken,\n      _id,\n      titleInput,\n      authorListInput,\n      genresListInput,\n      releaseDateInput,\n      publisherInput,\n      descriptionInput\n    );\n    if (res.error) setStatus(res.error);\n    if (res.updated) {\n      setTitleInput(\"\");\n      setAuthorInput(\"\");\n      setGeneresInput(\"\");\n      setReleaseDateInput(\"\");\n      setPublisherInput(\"\");\n      setDescriptionInput(\"\");\n      getBooks(accessToken);\n      setCreatorVisible(false);\n      setEditBookVisible(false);\n    }\n  };\n\n  const handleCancel = () => {\n    setCreatorVisible(false);\n    setEditBookVisible(false);\n  };\n\n  return (\n    <div className=\"creatorContainer\" id=\"editBookCreator\">\n      <form className=\"bookForm\" onSubmit={handleUpdate}>\n        <h1>Edit book</h1>\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"bookTitle\"\n          placeholder={\"Book's title\"}\n          value={titleInput}\n          onChange={handleInputChange}\n          required\n        />\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"author\"\n          placeholder=\"Author\"\n          value={authorInput}\n          onChange={handleInputChange}\n        />\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"genres\"\n          placeholder=\"Genres\"\n          value={genresInput}\n          onChange={handleInputChange}\n        />\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"releaseDate\"\n          placeholder=\"Release date\"\n          value={releaseDateInput}\n          onChange={handleInputChange}\n        />\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"publisher\"\n          placeholder=\"Publisher\"\n          value={publisherInput}\n          onChange={handleInputChange}\n        />\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"description\"\n          placeholder=\"Description\"\n          value={descriptionInput}\n          onChange={handleInputChange}\n        />\n        <div>\n          <input className=\"buttonDark\" type=\"submit\" value=\"Update\" />\n          <button className=\"buttonDark\" onClick={handleCancel}>\n            Cancel\n          </button>\n        </div>\n      </form>\n      {status && <div className=\"status\">{status}</div>}\n    </div>\n  );\n};\n\nexport default EditBook;\n","export const deleteBook = async (accessToken, id) => {\n    let res = await fetch(`https://pikabook.herokuapp.com/api/books/${id}`, {\n      method: \"delete\",\n      headers: {\n        Accept: \"application/json, text/plain, */*\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${accessToken}`,\n      },\n    });\n    if (!res.ok) {\n      res = await res.text();\n      return { error: res };\n    } else {\n      res = await res.json();\n      return { deleted: true };\n    }\n  };\n  \n  export default deleteBook;","import { useState } from \"react\";\nimport EditBook from \"./EditBook\";\nimport listProperties from \"../../SharedFunctions/listProperties\";\nimport { deleteBook } from \"../../API/deleteBook\";\n\nconst Book = ({\n  accessToken,\n  data,\n  getBooks,\n  creatorVisible,\n  setCreatorVisible,\n}) => {\n  const { name, author, genres, year, publisher, description, _id } = data;\n  const [editBookVisible, setEditBookVisible] = useState(false);\n  const [status, setStatus] = useState();\n\n  const handleEditBook = async () => {\n    setCreatorVisible(true);\n    setEditBookVisible(true);\n  };\n\n  const handleRemoval = async (e) => {\n    setStatus(\"Request...\");\n    e.preventDefault();\n    const res = await deleteBook(accessToken, _id);\n    if (res.error) setStatus(res.error);\n    if (res.deleted) setStatus(\"Book deleted\");\n    getBooks(accessToken);\n  };\n\n  return (\n    <div className=\"bookContainer\">\n      <div className=\"bookInfo\">\n        <p className=\"bookTitle\">\n          <b>{name}</b>\n        </p>\n        {author.length > 0 && (\n          <p className=\"author\">\n            <b>Author:</b> {listProperties(author)}\n          </p>\n        )}\n        {publisher && (\n          <p className=\"publisher\">\n            <b>Publisher:</b> {publisher}\n          </p>\n        )}\n        {year && (\n          <p className=\"year\">\n            <b>Publication year:</b> {year}\n          </p>\n        )}\n        {genres.length > 0 && (\n          <p className=\"genres\">\n            <b>Genre:</b> {listProperties(genres)}\n          </p>\n        )}\n        {description && (\n          <p className=\"description\">\n            <b>Description:</b> {description}\n          </p>\n        )}\n        <div className=\"meBooksButtons\">\n          <button className=\"buttonDark\" onClick={handleRemoval} disabled={creatorVisible}>\n            Delete\n          </button>\n          <button className=\"buttonDark\" onClick={handleEditBook} disabled={creatorVisible}>\n            Edit\n          </button>\n        </div>\n        {status && (\n          <div className=\"status\">\n            {status === \"Request...\" ? <div className=\"loader\"></div> : status}\n          </div>\n        )}\n        {editBookVisible && (\n          <EditBook\n            accessToken={accessToken}\n            setEditBookVisible={setEditBookVisible}\n            bookData={data}\n            getBooks={getBooks}\n            setCreatorVisible={setCreatorVisible}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Book;\n","export const addBook = async (\n  accessToken, \n  name, \n  author, \n  genres, \n  year, \n  publisher, \n  description\n  ) => {\n    const bookBody = {}\n    bookBody.name = name\n    if (author.length !== 0) { bookBody.author = author }\n    if (genres.length !== 0) { bookBody.genres = genres }\n    if (year) { bookBody.year = year }\n    if (publisher) { bookBody.publisher = publisher }\n    if (description) { bookBody.description = description }\n\n    let res = await fetch(\"https://pikabook.herokuapp.com/api/books\", {\n      method: \"post\",\n      headers: {\n        Accept: \"application/json, text/plain, */*\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${accessToken}`\n      },\n      body: JSON.stringify(bookBody),\n    });\n    if (!res.ok) {\n      res = await res.text();\n      return { added: false, error: res };\n    } else {\n      res = await res.json();\n      return { added: true };\n    }\n};","import { useState } from \"react\";\nimport { addBook } from \"../../API/addBook\";\n\nconst AddBook = ({ accessToken, getBooks, creatorVisible }) => {\n  const [titleInput, setTitleInput] = useState(\"\");\n  const [authorInput, setAuthorInput] = useState(\"\");\n  const [genresInput, setGeneresInput] = useState(\"\");\n  const [releaseDateInput, setReleaseDateInput] = useState(\"\");\n  const [publisherInput, setPublisherInput] = useState(\"\");\n  const [descriptionInput, setDescriptionInput] = useState(\"\");\n  const [status, setStatus] = useState();\n\n  const handleInputChange = (e) => {\n    if (e.target.id === \"bookTitle\") return setTitleInput(e.target.value);\n    if (e.target.id === \"author\") return setAuthorInput(e.target.value);\n    if (e.target.id === \"genres\") return setGeneresInput(e.target.value);\n    if (e.target.id === \"releaseDate\")\n      return setReleaseDateInput(e.target.value);\n    if (e.target.id === \"publisher\") return setPublisherInput(e.target.value);\n    if (e.target.id === \"description\")\n      return setDescriptionInput(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    setStatus(\"Request...\");\n    e.preventDefault();\n    let autorListInput = authorInput.split(\",\");\n    if (authorInput === \"\") {\n      autorListInput = [];\n    }\n    let genresListInput = genresInput.split(\",\");\n    if (genresInput === \"\") {\n      genresListInput = [];\n    }\n    const res = await addBook(\n      accessToken,\n      titleInput,\n      autorListInput,\n      genresListInput,\n      releaseDateInput,\n      publisherInput,\n      descriptionInput\n    );\n    if (res.error) setStatus(res.error);\n    if (res.added) {\n      setStatus(\"Book successfully added\");\n    }\n    setTitleInput(\"\");\n    setAuthorInput(\"\");\n    setGeneresInput(\"\");\n    setReleaseDateInput(\"\");\n    setPublisherInput(\"\");\n    setDescriptionInput(\"\");\n    getBooks(accessToken);\n  };\n\n  return (\n    <div className=\"meAddBook\">\n      <h1 className=\"booksHeading\">Add a new book</h1>\n      <form className=\"bookForm\" onSubmit={handleSubmit}>\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"bookTitle\"\n          placeholder=\"Book's title\"\n          value={titleInput}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"author\"\n          placeholder=\"Author\"\n          value={authorInput}\n          onChange={handleInputChange}\n        ></input>\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"genres\"\n          placeholder=\"Genres\"\n          value={genresInput}\n          onChange={handleInputChange}\n        ></input>\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"releaseDate\"\n          placeholder=\"Release date\"\n          value={releaseDateInput}\n          onChange={handleInputChange}\n        ></input>\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"publisher\"\n          placeholder=\"Publisher\"\n          value={publisherInput}\n          onChange={handleInputChange}\n        ></input>\n        <input\n          className=\"textInputDark\"\n          type=\"text\"\n          id=\"description\"\n          placeholder=\"Description\"\n          value={descriptionInput}\n          onChange={handleInputChange}\n        ></input>\n        <input type=\"submit\" value=\"Add\" className=\"buttonDark\" disabled={creatorVisible}></input>\n        {status && (\n          <div className=\"status\">\n            {status === \"Request...\" ? <div className=\"loader\"></div> : status}\n          </div>\n        )}\n      </form>\n    </div>\n  );\n};\n\nexport default AddBook;\n","import { useState, useRef, useEffect } from \"react\";\nimport Book from \"./Book\";\nimport AddBook from \"./AddBook\";\nimport Pagination from \"../../SharedComponents/Pagination\";\nimport { searchMyBooks } from \"../../API/fetchBooks\";\nimport getPagination from \"../../SharedFunctions/getPagination\";\n\nconst MeBooks = ({ accessToken }) => {\n  const [myBooks, setMyBooks] = useState([]);\n  const [status, setStatus] = useState(\"Loading...\");\n  const [page, setPage] = useState(1);\n  const [creatorVisible, setCreatorVisible] = useState(false);\n  const onPageLimit = 10;\n  const scrollTo = useRef();\n\n  const getBooks = async (accessToken) => {\n    const res = await searchMyBooks(accessToken);\n    if (res.error) {\n      console.log(res.error);\n      setStatus(\"No books found.\");\n    }\n    if (res.books) {\n      const bookList = res.books.filter((book) => !book.exchanged)\n      setMyBooks(bookList.reverse());\n      setStatus(\"\");\n    }\n  };\n\n  useEffect(() => {\n    getBooks(accessToken);\n  }, [accessToken]);\n\n  let bookList = getPagination(page, onPageLimit, myBooks);\n  bookList = bookList.map((book) => (\n    <Book\n      key={book._id}\n      accessToken={accessToken}\n      data={book}\n      getBooks={getBooks}\n      creatorVisible={creatorVisible}\n      setCreatorVisible={setCreatorVisible}\n    />\n  ));\n\n  return (\n    <div className=\"meBooksContainer\">\n      <div className=\"meBooks\" ref={scrollTo}>\n        <h1 className=\"booksHeading\">My books</h1>\n        {bookList.length > 0 && bookList}\n        {status && (\n          <div className=\"status\">\n            {status === \"Loading...\" ? <div className=\"loader\"></div> : status}\n          </div>\n        )}\n        {myBooks.length > onPageLimit && (\n          <Pagination\n            page={page}\n            setPage={setPage}\n            list={myBooks}\n            limit={onPageLimit}\n            scrollTo={scrollTo}\n          />\n        )}\n      </div>\n      <AddBook\n        accessToken={accessToken}\n        getBooks={getBooks}\n        creatorVisible={creatorVisible}\n      ></AddBook>\n    </div>\n  );\n};\n\nexport default MeBooks;\n","export const updateBasketStatus = async (accessToken, basketStatus, basketId) => {\n  let res = await fetch(\n    `https://pikabook.herokuapp.com/api/baskets/status/${basketId}`,\n    {\n      method: \"put\",\n      headers: {\n        Authorization: `Bearer ${accessToken}`,\n        Accept: \"application/json, text/plain, */*\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ status: basketStatus }),\n    }\n  );\n\n  if (!res.ok) {\n    res = await res.text();\n\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { baskets: res };\n  }\n};\n\nexport const updateBasketRead = async (accessToken, id) => {\n  let res = await fetch(`https://pikabook.herokuapp.com/api/baskets/read/${id}`, {\n    method: \"put\",\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${accessToken}`,\n    },\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { updated: true };\n  }\n};\n","import { updateBasketStatus } from \"../../API/updateBasket\";\n\nconst Buttons = ({\n  accessToken,\n  status,\n  _id,\n  isUserRequestor,\n  coOwnerName,\n  getLoggedUsersBaskets,\n  basketsInterval,\n}) => {\n  const handleOnClick = async (e) => {\n    let res = await updateBasketStatus(accessToken, e.target.name, _id);\n    if (res.error) console.log(res.error);\n    if (res.baskets) {\n      clearTimeout(basketsInterval.current);\n      getLoggedUsersBaskets(accessToken);\n    }\n  };\n\n  return (\n    <div className=\"buttonsAndStatus\">\n      {status === \"pending\" && isUserRequestor && (\n        <>\n          <p>You made an offer to {coOwnerName}</p>\n          <button\n            name=\"cancelled\"\n            onClick={handleOnClick}\n            className=\"buttonDark\"\n          >\n            Cancel\n          </button>\n        </>\n      )}\n      {status === \"pending\" && !isUserRequestor && (\n        <>\n          <p>{coOwnerName} made an offer</p>\n          <button\n            name=\"accepted\"\n            onClick={handleOnClick}\n            className=\"buttonDark\"\n          >\n            Accept\n          </button>{\" \"}\n          <button\n            name=\"rejected\"\n            onClick={handleOnClick}\n            className=\"buttonDark\"\n          >\n            Reject\n          </button>\n        </>\n      )}\n      {status === \"accepted\" && isUserRequestor && (\n        <>\n          <p>{coOwnerName} accepted your offer</p>\n          <button\n            name=\"successByRequestor\"\n            onClick={handleOnClick}\n            className=\"buttonDark\"\n          >\n            Success\n          </button>\n          <button\n            name=\"failedByTarget\"\n            onClick={handleOnClick}\n            className=\"buttonDark\"\n          >\n            Failed\n          </button>\n        </>\n      )}\n      {status === \"accepted\" && !isUserRequestor && (\n        <>\n          <p>You accepted {coOwnerName}'s offer</p>\n          <button\n            name=\"successByTarget\"\n            onClick={handleOnClick}\n            className=\"buttonDark\"\n          >\n            Success\n          </button>\n          <button\n            name=\"failedByRequestor\"\n            onClick={handleOnClick}\n            className=\"buttonDark\"\n          >\n            Failed\n          </button>\n        </>\n      )}\n      {status === \"successByRequestor\" && isUserRequestor && (\n        <p>Success on your side</p>\n      )}\n      {status === \"successByRequestor\" && !isUserRequestor && (\n        <>\n          <p>{coOwnerName} stated you delivered your books</p>\n          <button\n            name=\"success\"\n            onClick={handleOnClick}\n            className=\"buttonDark\"\n          >\n            Success\n          </button>\n          <button\n            name=\"failedByRequestor\"\n            onClick={handleOnClick}\n            className=\"buttonDark\"\n          >\n            Failed\n          </button>\n        </>\n      )}\n      {status === \"successByTarget\" && isUserRequestor && (\n        <>\n          <p>{coOwnerName} stated you delivered your books</p>\n          <button\n            name=\"success\"\n            onClick={handleOnClick}\n            className=\"buttonDark\"\n          >\n            Success\n          </button>\n          <button\n            name=\"failedByTarget\"\n            onClick={handleOnClick}\n            className=\"buttonDark\"\n          >\n            Failed\n          </button>\n        </>\n      )}\n      {status === \"successByTarget\" && !isUserRequestor && (\n        <p>Success on your side</p>\n      )}\n      {status === \"rejected\" && isUserRequestor && (\n        <p>{coOwnerName} rejected your offer</p>\n      )}\n      {status === \"rejected\" && !isUserRequestor && (\n        <p>You rejected the offer</p>\n      )}\n      {status === \"cancelled\" && isUserRequestor && (\n        <p>You cancelled your offer</p>\n      )}\n      {status === \"cancelled\" && !isUserRequestor && (\n        <p>{coOwnerName} cancelled his/her offer</p>\n      )}\n      {status === \"failedByRequestor\" && isUserRequestor && (\n        <p>{coOwnerName} stated you failed to delived your books</p>\n      )}\n      {status === \"failedByRequestor\" && !isUserRequestor && (\n        <p>You stated {coOwnerName} failed to delived his/her books</p>\n      )}\n      {status === \"failedByTarget\" && isUserRequestor && (\n        <p>You stated {coOwnerName} failed to delived his/her books</p>\n      )}\n      {status === \"failedByTarget\" && !isUserRequestor && (\n        <p>{coOwnerName} stated you failed to delived your books</p>\n      )}\n      {status === \"success\" && <p>Success on both sides!</p>}\n    </div>\n  );\n};\n\nexport default Buttons;\n","import Book from \"../../SharedComponents/Book\";\n\nimport Buttons from \"./Buttons\";\n\nconst SingleBasket = ({\n  basket: {\n    _id,\n    booksOffered,\n    booksRequested,\n    status,\n    createdByUserId,\n    targetUserID,\n    timeCreated,\n  },\n  loggedUser,\n  accessToken,\n  getLoggedUsersBaskets,\n  basketsInterval,\n}) => {\n  const isUserRequestor = createdByUserId._id === loggedUser._id;\n  const timeOfCreation = new Date(timeCreated).toLocaleString();\n  const coOwner = isUserRequestor ? targetUserID : createdByUserId;\n  const myBooks = isUserRequestor ? booksOffered : booksRequested;\n  const coOwnersBooks = isUserRequestor ? booksRequested : booksOffered;\n  const myBooksList = myBooks.map((book) => (\n    <Book key={book._id} book={book} />\n  ));\n  const coOwnersBooksList = coOwnersBooks.map((book) => (\n    <Book key={book._id} book={book} />\n  ));\n  const inActiveState = [\n    \"cancelled\",\n    \"rejected\",\n    \"failedByRequestor\",\n    \"failedByTarget\",\n    \"success\",\n  ];\n\n  const getStatus = () => {\n    switch (status) {\n      case \"failedByRequestor\":\n        return \"failed by requestor\";\n      case \"failedByTarget\":\n        return \"failed by target\";\n      case \"successByRequestor\":\n        return \"success by requestor\";\n      case \"successByTarget\":\n        return \"success by target\";\n      default:\n        return status;\n    }\n  };\n  return (\n    <div\n      className={\n        inActiveState.includes(status)\n          ? \"singleBasket endedBasket\"\n          : \"singleBasket\"\n      }\n    >\n      <div className=\"basketData\">\n        <p>\n          <b>Time of creation: </b>\n          {timeOfCreation}\n        </p>\n        <p>\n          <b>Status: </b>\n          {getStatus()}\n        </p>\n        <p>\n          <b>Co-owner of the basket: </b>\n          {coOwner.name}\n        </p>\n        <Buttons\n          accessToken={accessToken}\n          status={status}\n          _id={_id}\n          isUserRequestor={isUserRequestor}\n          coOwnerName={coOwner.name}\n          getLoggedUsersBaskets={getLoggedUsersBaskets}\n          basketsInterval={basketsInterval}\n        />\n      </div>\n      <div className=\"basketBooks\">\n        <h1 className=\"booksHeading\">My Books</h1>\n        {myBooksList}\n      </div>\n      <div className=\"basketBooks\">\n        <h1 className=\"booksHeading\">{coOwner.name}'s books</h1>\n        {coOwnersBooksList}\n      </div>\n    </div>\n  );\n};\n\nexport default SingleBasket;\n","import { useEffect, useState, useRef } from \"react\";\n\nimport SingleBasket from \"./SingleBasket\";\nimport newBasketsToLoggedUser from \"../../SharedFunctions/filterBaskets\";\nimport { updateBasketRead } from \"../../API/updateBasket\";\nimport getPagination from \"../../SharedFunctions/getPagination\";\nimport Pagination from \"../../SharedComponents/Pagination\";\n\nconst MeBaskets = ({\n  accessToken,\n  loggedUser,\n  loggedUsersBaskets,\n  getLoggedUsersBaskets,\n  basketsInterval,\n}) => {\n  const [page, setPage] = useState(1);\n  const onPageLimit = 4;\n  const scrollTo = useRef();\n\n  useEffect(() => {\n    const newBaskets = newBasketsToLoggedUser(\n      loggedUsersBaskets,\n      loggedUser._id\n    );\n    const updateRead = async () => {\n      newBaskets.forEach((basket) => updateBasketRead(accessToken, basket._id));\n    };\n    if (newBaskets.length > 0) updateRead();\n  }, [accessToken, loggedUser._id, loggedUsersBaskets]);\n\n  let basketList = getPagination(page, onPageLimit, loggedUsersBaskets);\n  basketList = basketList.map((basket) => (\n    <SingleBasket\n      key={basket._id}\n      basket={basket}\n      loggedUser={loggedUser}\n      accessToken={accessToken}\n      getLoggedUsersBaskets={getLoggedUsersBaskets}\n      basketsInterval={basketsInterval}\n    />\n  ));\n  return (\n    <div className=\"meBaskestsContainer\">\n      <h1 ref={scrollTo} className=\"basketHeader\">My baskets</h1>\n      {basketList}\n      {loggedUsersBaskets.length > onPageLimit && (\n        <Pagination\n          page={page}\n          setPage={setPage}\n          list={loggedUsersBaskets}\n          limit={onPageLimit}\n          scrollTo={scrollTo}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default MeBaskets;\n","import { useHistory } from \"react-router-dom\";\n\nconst ConversationRecap = ({\n  conversation: { interlocutors, messages },\n  loggedUser,\n}) => {\n  const history = useHistory();\n  const interlocutor = interlocutors.find(\n    (interlocutor) => interlocutor._id !== loggedUser._id\n  );\n  const lastMessage = messages[0];\n  const date = new Date(lastMessage.date).toLocaleString();\n  const sender =\n    lastMessage.sender === interlocutor._id ? interlocutor.name : \"You\";\n  const content = lastMessage.content.split(\"\").slice(0, 9).join(\"\");\n\n  const openConversation = () => {\n    history.push(`/me/conversations/conversation`, { interlocutor });\n  };\n\n  const isRead = !lastMessage.read && lastMessage.recipient === loggedUser._id;\n\n  return (\n    <div className={isRead ? \"conversationContainer newMessage\" : \"conversationContainer\"}>\n      <div>\n        <b>{interlocutor.name}</b>\n      </div>\n      <div>{date}</div>\n      <div>\n        <b>{sender}</b> wrote:{\" \"}\n        {content === lastMessage.content ? content : `${content}...`}\n      </div>\n      <button className=\"buttonDark\" onClick={openConversation}>Go to conversation</button>\n    </div>\n  );\n};\n\nexport default ConversationRecap;\n","import { useState, useRef } from \"react\";\n\nimport ConversationRecap from \"./ConversationRecap\";\nimport getPagination from \"../../SharedFunctions/getPagination\";\nimport Pagination from \"../../SharedComponents/Pagination\";\n\nconst Conversations = ({\n  loggedUser,\n  loggedUsersConversations,\n}) => {\n\n  const [page, setPage] = useState(1);\n  const onPageLimit = 10;\n  const scrollTo = useRef();\n\n  let conversationsList = loggedUsersConversations.sort((a,b) => {\n    const dateA = new Date(a.messages[0].date);\n    const dateB = new Date(b.messages[0].date);\n    return dateB - dateA;\n  });\n  conversationsList = getPagination(page, onPageLimit, conversationsList);\n  conversationsList = conversationsList.map((conversation) => {\n    return (\n      <ConversationRecap\n        key={conversation._id}\n        conversation={conversation}\n        loggedUser={loggedUser}\n      />\n    );\n  });\n\n  return (\n    <div className=\"conversationsContainer\">\n      <h1>My conversations</h1>\n      <div ref={scrollTo}>\n        {loggedUsersConversations.length > onPageLimit && (\n          <Pagination\n            page={page}\n            setPage={setPage}\n            list={loggedUsersConversations}\n            limit={onPageLimit}\n            scrollTo={scrollTo}\n          />\n        )}\n        </div>\n      <div>{conversationsList}</div>\n      {loggedUsersConversations.length > onPageLimit && (\n          <Pagination\n            page={page}\n            setPage={setPage}\n            list={loggedUsersConversations}\n            limit={onPageLimit}\n            scrollTo={scrollTo}\n          />\n        )}\n    </div>\n  );\n};\n\nexport default Conversations;\n","export const fetchConversations = async (accessToken) => {\n  let res = await fetch(\"https://pikabook.herokuapp.com/api/me/conversations\", {\n    method: \"get\",\n    headers: { Authorization: `Bearer ${accessToken}` },\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { conversations: res };\n  }\n};\n\nexport const fetchConversationByInterlocutor = async (\n  accessToken,\n  interlocutorsId,\n  params\n) => {\n  let res = await fetch(\n    `https://pikabook.herokuapp.com/api/me/conversations/${interlocutorsId}?` +\n      new URLSearchParams(params),\n    {\n      method: \"get\",\n      headers: { Authorization: `Bearer ${accessToken}` },\n    }\n  );\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { conversation: res };\n  }\n};\n","export const updateConversation = async (accessToken, id) => {\n    let res = await fetch(`https://pikabook.herokuapp.com/api/conversations/${id}`, {\n      method: \"put\",\n      headers: {\n        Accept: \"application/json, text/plain, */*\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${accessToken}`,\n      },\n    });\n    if (!res.ok) {\n      res = await res.text();\n      return { error: res };\n    } else {\n      res = await res.json();\n      return { updated: true };\n    }\n  };\n  \n  export default updateConversation;\n  ","import { useLocation, useHistory } from \"react-router-dom\";\nimport { useState, useEffect, useRef } from \"react\";\nimport _ from \"lodash\";\n\nimport { fetchConversationByInterlocutor } from \"../../API/fetchConversations\";\nimport { updateConversation } from \"../../API/updateConversation\";\nimport sendMessage from \"../../API/sendMessage\";\n\nconst Message = ({ message: { sender, content, date }, interlocutor }) => {\n  const creationDate = new Date(date).toLocaleString();\n  const name = interlocutor._id === sender ? `${interlocutor.name}:` : \"You:\";\n  return (\n    <div className={name === \"You:\" ? \"yourMessage\" : \"interlocutorsMessage\"}>\n      <div className=\"date\">{creationDate}</div>\n      <div className=\"message\">\n        <div>{name}</div>\n        <div>{content}</div>\n      </div>\n    </div>\n  );\n};\n\nconst SingleConversation = ({\n  accessToken,\n  getLoggedUsersConversations,\n  conversationsInterval,\n}) => {\n  const location = useLocation();\n  const history = useHistory();\n  const interlocutor = location.state.interlocutor;\n  const [messages, setMessages] = useState([]);\n  const prevMessages = useRef();\n  const [messageInput, setMessageInput] = useState(\"\");\n  const conversationInterval = useRef();\n  const [limit, setLimit] = useState(10);\n  const [status, setStatus] = useState(\"\");\n  const messagesDiv = useRef();\n\n  useEffect(() => {\n    const updateMessages = async (conversation) => {\n      if (conversation.some((message) => !message.read))\n        await updateConversation(accessToken, interlocutor._id);\n      clearTimeout(conversationsInterval.current);\n      getLoggedUsersConversations(accessToken);\n    };\n    const getMessages = async () => {\n      setStatus(\"Loading...\");\n      prevMessages.current = messages;\n      const res = await fetchConversationByInterlocutor(\n        accessToken,\n        interlocutor._id,\n        { limit }\n      );\n      if (res.error) setStatus(res.error);\n      const newMessages = res.conversation.messages.reverse();\n      if (!_.isEqual(newMessages, prevMessages.current)) {\n        setMessages(newMessages);\n        updateMessages(newMessages);\n      }\n    };\n    clearInterval(conversationInterval.current);\n    getMessages();\n    const interval = setInterval(async () => getMessages(), 1000);\n    conversationInterval.current = interval;\n    return () => clearInterval(conversationInterval.current);\n  }, [\n    accessToken,\n    interlocutor._id,\n    limit,\n    messages,\n    getLoggedUsersConversations,\n    conversationsInterval,\n  ]);\n\n  useEffect(() => {\n    const scrollTo = messagesDiv.current;\n    const scrollToMyRef = () => {\n      const scroll = scrollTo.scrollHeight - scrollTo.clientHeight;\n      scrollTo.scrollTo(0, scroll);\n    };\n    scrollToMyRef();\n  }, [messages]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const res = await sendMessage(accessToken, interlocutor._id, messageInput);\n    if (res.error) setStatus(res.error);\n    setMessageInput(\"\");\n  };\n\n  const handleChange = (e) => {\n    setMessageInput(e.target.value);\n  };\n\n  const handleLoadMore = (e) => {\n    setLimit(limit + 10);\n  };\n\n  const handleExit = () => {\n    history.push(\"/me/conversations\");\n  };\n\n  const messageList = messages.map((message) => (\n    <Message key={message._id} message={message} interlocutor={interlocutor} />\n  ));\n\n  return (\n    <div className=\"singleConversationContainer\">\n      <div className=\"exit\" onClick={handleExit}>&#10006;</div>\n      <button className=\"buttonDark loadMore\" onClick={handleLoadMore}>&#x2191;</button>\n      <div className=\"messagesList\" ref={messagesDiv}>\n        {messages.length === 0 ? ( <div className=\"status\"> {status === \"Loading...\" ? ( <div className=\"loader\"></div> ) : ( status )} </div> ) : messageList}\n      </div>\n      <form onSubmit={handleSubmit}>\n        <textarea onChange={handleChange} value={messageInput}></textarea>\n        <input className=\"buttonDark\" type=\"submit\" value=\"Send\"></input>\n      </form>\n    </div>\n  );\n};\n\nexport default SingleConversation;\n","import { useHistory } from \"react-router-dom\";\n\nimport BookListItem from \"../../SharedComponents/BookListItem\";\n\nconst PokeReceived = ({ bookList, creationDate, sender, read, handleOnClick }) => {\n  return (\n    <div className={read ? \"poke\" : \"newPoke poke\"}>\n      {bookList.length > 0 ? (\n        <>\n          <p>\n            On {creationDate} <b>{sender.name}</b> showed interest in the\n            following books in your collection:\n          </p>\n          <ul>{bookList}</ul>\n        </>\n      ) : (\n        <p>\n          On {creationDate} <b>{sender.name}</b> showed interest in your\n          collection. \n        </p>\n      )}\n      <button className=\"buttonDark\" onClick={handleOnClick}>\n        Visit <b>{sender.name}</b>'s profile\n      </button>\n    </div>\n  );\n};\n\nconst PokeSent = ({\n  bookList,\n  creationDate,\n  recipient,\n  handleOnClick,\n}) => {\n  return (\n    <div className=\"poke\" >\n      {bookList.length > 0 ? (\n        <>\n          <p>\n            On {creationDate} you showed interest in the following books in{\" \"}\n            <b>{recipient.name}</b>'s collection:\n          </p>\n          <ul>{bookList}</ul>\n        </>\n      ) : (\n        <p>\n          On {creationDate} you showed interest in <b>{recipient.name}</b>'s'\n          collection. \n        </p>\n      )}\n      <button className=\"buttonDark\" onClick={handleOnClick}>\n        Visit <b>{recipient.name}</b>'s profile\n      </button>\n    </div>\n  );\n};\n\nconst Poke = ({ poke: { sender, recipient, books, date, read }, type }) => {\n  const history = useHistory();\n  const creationDate = new Date(date).toLocaleString();\n\n  const handleOnClick = () => {\n    if (type === 'received') history.push(`/user/${sender._id}`, { bookId: \"\" });\n    if (type === 'sent') history.push(`/user/${recipient._id}`, { bookId: \"\" });\n  };\n\n  const bookList = books.map((book) => (\n    <BookListItem key={book._id} book={book} />\n  ));\n\n  return (\n    <div>\n      {type === \"received\" && (\n        <PokeReceived\n          bookList={bookList}\n          creationDate={creationDate}\n          sender={sender}\n          read={read}\n          handleOnClick={handleOnClick}\n        />\n      )}\n      {type === \"sent\" && (\n        <PokeSent\n          bookList={bookList}\n          creationDate={creationDate}\n          recipient={recipient}\n          handleOnClick={handleOnClick}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Poke;\n","export const updatePoke = async (accessToken, id) => {\n    let res = await fetch(`https://pikabook.herokuapp.com/api/pokes/${id}`, {\n      method: \"put\",\n      headers: {\n        Accept: \"application/json, text/plain, */*\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${accessToken}`,\n      },\n    });\n    if (!res.ok) {\n      res = await res.text();\n      return { error: res };\n    } else {\n      res = await res.json();\n      return { updated: true };\n    }\n  };\n  \n  export default updatePoke;\n  ","import { useEffect, useState, useRef } from \"react\";\nimport Poke from \"./Poke\";\nimport getPagination from \"../../SharedFunctions/getPagination\";\nimport Pagination from \"../../SharedComponents/Pagination\";\nimport updatePoke from \"../../API/updatePoke\";\n\nconst Pokes = ({\n  accessToken,\n  loggedUsersPokes,\n  setLoggedUsersPokes,\n  loggedUser: { _id },\n}) => {\n  const [receivedPage, setReceivedPage] = useState(1);\n  const [offeredPage, setOfferedPage] = useState(1);\n  const [prevPokes, setPrevPokes] = useState([]);\n  const onPageLimit = 10;\n  const scrollTo1 = useRef();\n  const scrollTo2 = useRef();\n\n\n  useEffect(() => {\n    if (loggedUsersPokes.length !== prevPokes.length)\n      setPrevPokes(loggedUsersPokes);\n    const receivedPokes = loggedUsersPokes.filter(\n      (poke) => poke.recipient._id === _id\n    );\n    if (receivedPokes.some((poke) => !poke.read)) {\n      const updatedPokes = loggedUsersPokes.map((poke) => {\n        updatePoke(accessToken, poke._id);\n        return { ...poke, read: true };\n      });\n      setLoggedUsersPokes(updatedPokes);\n    }\n  }, [accessToken, loggedUsersPokes, setLoggedUsersPokes, prevPokes, _id]);\n\n  const receivedPokes = prevPokes.filter((poke) => poke.recipient._id === _id);\n\n  const offeredPokes = prevPokes.filter((poke) => poke.sender._id === _id);\n\n  let receivedPokesList = getPagination(\n    receivedPage,\n    onPageLimit,\n    receivedPokes\n  );\n  receivedPokesList = receivedPokesList.map((poke) => {\n    return <Poke key={poke._id} poke={poke} type=\"received\" />;\n  });\n\n  let offeredPokesList = getPagination(offeredPage, onPageLimit, offeredPokes);\n  offeredPokesList = offeredPokesList.map((poke) => {\n    return <Poke key={poke._id} poke={poke} type=\"sent\" />;\n  });\n\n  return (\n    <div className=\"pokesContainer\">\n      <div className=\"pokeColumn1\" ref={scrollTo1}>\n        <h1>Pokes received</h1>\n        <div className=\"pokeContainer\">{receivedPokesList}</div>\n        {receivedPokes.length > onPageLimit && (\n          <Pagination\n            page={receivedPage}\n            setPage={setReceivedPage}\n            list={receivedPokes}\n            limit={onPageLimit}\n            scrollTo={scrollTo1}\n          />\n        )}\n      </div>\n      <div className=\"pokeColumn2\" ref={scrollTo2}>\n        <h1>Pokes sent</h1>\n        <div className=\"pokeContainer\">{offeredPokesList}</div>\n        {offeredPokes.length > onPageLimit && (\n          <Pagination\n            page={offeredPage}\n            setPage={setOfferedPage}\n            list={offeredPokes}\n            limit={onPageLimit}\n            scrollTo={scrollTo2}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Pokes;\n","export const createBasket = async (\n  accessToken,\n  targetUserID,\n  booksOffered,\n  booksRequested\n) => {\n  let res = await fetch(\"https://pikabook.herokuapp.com/api/baskets\", {\n    method: \"post\",\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${accessToken}`,\n    },\n    body: JSON.stringify({\n      targetUserID,\n      booksOffered,\n      booksRequested,\n    }),\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { created: true };\n  }\n};\n\nexport default createBasket;\n","import { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport createBasket from \"../../API/createBasket\";\nimport BookListItem from \"../../SharedComponents/BookListItem\";\n\nconst BasketCreator = ({\n  accessToken,\n  recipient,\n  booksOffered,\n  booksRequested,\n  setBasketCreatorVisible,\n}) => {\n  const [status, setStatus] = useState(\"\");\n  const history = useHistory();\n\n  const handleConfirm = async () => {\n    const requestedBooksId = booksRequested.map((book) => book._id);\n    const offeredBooksId = booksOffered.map((book) => book._id);\n    const res = await createBasket(\n      accessToken,\n      recipient._id,\n      offeredBooksId,\n      requestedBooksId\n    );\n    if (res.error) setStatus(res.error);\n    if (res.created) setStatus(\"Offer successfully sent!\");\n    setTimeout(() => history.push(\"/me/baskets\"), 1000);\n  };\n\n  const handleCancel = () => {\n    setBasketCreatorVisible(false);\n  };\n\n  const offeredBooksList = booksOffered.map((book) => (\n    <BookListItem key={book._id} book={book} />\n  ));\n\n  const requestedBooksList = booksRequested.map((book) => (\n    <BookListItem key={book._id} book={book} />\n  ));\n\n  return (\n    <div className=\"creatorContainer\" id=\"basketCreator\">\n      {!status && (\n        <>\n          <p>\n            Confirm that you want to send {recipient.name} an offer to exchange\n            your books:\n          </p>\n          <ul>{offeredBooksList}</ul>\n          <p>against his/her books</p>\n          <ul>{requestedBooksList}</ul>\n        </>\n      )}\n        {status && <p><b>{status}</b></p>}\n      <div>\n        {!status && <button className=\"buttonDark\" onClick={handleConfirm}>Confirm</button>}\n        {!status && <button className=\"buttonDark\" onClick={handleCancel}>Cancel</button>}\n      </div>\n    </div>\n  );\n};\n\nexport default BasketCreator;\n","import { useState, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nimport { searchMyBooks } from \"../../API/fetchBooks\";\nimport { useRef } from \"react\";\n\nimport Book from \"../../SharedComponents/Book\";\nimport BasketCreator from \"./BasketCreator\";\nimport addBooksToList from \"../../SharedFunctions/addBooksToList\";\nimport getPagination from \"../../SharedFunctions/getPagination\";\nimport Pagination from \"../../SharedComponents/Pagination\";\n\nconst CreateBasket = ({ accessToken }) => {\n  const location = useLocation();\n  const user = location.state.user;\n  const chosenBooks = location.state.chosenBooks;\n  const [offeredBooks, setOfferedBooks] = useState([]);\n  const [myBooks, setMyBooks] = useState([]);\n  const [basketCreatorVisible, setBasketCreatorVisible] = useState(false);\n  const [chosenPage, setChosenPage] = useState(1);\n  const [offeredPage, setOfferedPage] = useState(1);\n  const onPageLimit = 10;\n  const chosenScrollTo = useRef();\n  const myScrollTo = useRef();\n\n  useEffect(() => {\n    const getBooks = async () => {\n      const res = await searchMyBooks(accessToken);\n      if (res.error) console.log(res.error);\n      if (res.books) {\n        const bookList = res.books.filter(book => !book.exchanged);\n        setMyBooks(bookList);\n      }\n    };\n    getBooks();\n  }, [accessToken]);\n\n  const handleCheckboxChange = (e) => {\n    setOfferedBooks(addBooksToList(e, myBooks, offeredBooks));\n  };\n\n  const handleCreateBasket = async () => {\n    setBasketCreatorVisible(true);\n  };\n\n  let chosenBooksList = getPagination(chosenPage, onPageLimit, chosenBooks);\n  chosenBooksList = chosenBooksList.map((book) => (\n    <Book key={book._id} book={book} />\n  ));\n\n  let myBooksList = getPagination(offeredPage, onPageLimit, myBooks);\n  myBooksList = myBooksList.map((book) => (\n    <Book\n      key={book._id}\n      book={book}\n      type=\"checkbox\"\n      handleCheckboxChange={handleCheckboxChange}\n      inputDisabled={basketCreatorVisible}\n      chosenBooks={offeredBooks}\n    />\n  ));\n\n  return (\n    <div className=\"createBasketContainer\">\n      <div className=\"basketBookList\" ref={chosenScrollTo}>\n        <div className=\"basketChosenBooks\">\n          <h1 className=\"booksHeading\">{user.name}'s books</h1>\n          {chosenBooksList}\n          {chosenBooks.length > onPageLimit && (\n            <Pagination\n              page={chosenPage}\n              setPage={setChosenPage}\n              list={chosenBooks}\n              limit={onPageLimit}\n              scrollTo={chosenScrollTo}\n            />\n          )}\n        </div>\n        <div className=\"basketMyBooks\" ref={myScrollTo}>\n          <h1 className=\"booksHeading\">My books</h1>\n          {myBooksList}\n          {myBooks.length > onPageLimit && (\n            <Pagination\n              page={offeredPage}\n              setPage={setOfferedPage}\n              list={myBooks}\n              limit={onPageLimit}\n              scrollTo={myScrollTo}\n            />\n          )}\n        </div>\n      </div>\n      <button\n        className=\"buttonDark\"\n        onClick={handleCreateBasket}\n        disabled={offeredBooks.length < 1}\n      >\n        Create a basket\n      </button>\n      {basketCreatorVisible && (\n        <BasketCreator\n          accessToken={accessToken}\n          booksOffered={offeredBooks}\n          booksRequested={chosenBooks}\n          recipient={user}\n          setBasketCreatorVisible={setBasketCreatorVisible}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default CreateBasket;\n","import React from 'react';\n\nconst Error = () => {\n    return ( \n        <div>\n            Page does not exist.\n        </div>\n     );\n}\n \nexport default Error;","const fetchPokes = async (accessToken) => {\n  let res = await fetch(\"https://pikabook.herokuapp.com/api/me/pokes\", {\n    method: \"get\",\n    headers: { Authorization: `Bearer ${accessToken}` },\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { pokes: res };\n  }\n};\n\nexport default fetchPokes;\n","const fetchBaskets = async (accessToken) => {\n  let res = await fetch(\"https://pikabook.herokuapp.com/api/me/baskets\", {\n    method: \"get\",\n    headers: { Authorization: `Bearer ${accessToken}` },\n  });\n  if (!res.ok) {\n    res = await res.text();\n    return { error: res };\n  } else {\n    res = await res.json();\n    return { baskets: res };\n  }\n};\n\nexport default fetchBaskets;\n","import { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\nimport { useEffect, useState, useRef } from \"react\";\n\nimport Header from \"./Layout/Header/Header\";\nimport Footer from \"./Layout/Footer/Footer\";\nimport Login from \"./Views/Login/Login\";\nimport Registartion from \"./Views/Registration/Registration\";\nimport Search from \"./Views/Search/Search\";\nimport User from \"./Views/User/User\";\nimport Me from \"./Views/Me/Me\";\nimport MeBooks from \"./Views/MeBooks/MeBooks\";\nimport MeBaskets from \"./Views/MeBaskets/MeBaskets\";\nimport Conversations from \"./Views/Conversations/Conversations\";\nimport SingleConversation from \"./Views/SingleConversation/SingleConversation\";\nimport Pokes from \"./Views/Pokes/Pokes\";\nimport Basket from \"./Views/Basket/Basket\";\nimport Error from \"./Views/Error\";\n\nimport fetchPokes from \"./API/fetchPokes\";\nimport fetchBaskets from \"./API/fetchBaskets\";\nimport { fetchLoggedUser } from \"./API/fetchUser\";\nimport { fetchConversations } from \"./API/fetchConversations\";\n\nfunction App() {\n  const [accessToken, setAccessToken] = useState(\"\");\n  const [loggedUser, setLoggedUser] = useState({});\n  const [loggedUsersPokes, setLoggedUsersPokes] = useState([]);\n  const [loggedUsersBaskets, setLoggedUsersBaskets] = useState([]);\n  const [loggedUsersConversations, setLoggedUsersConversations] = useState([]);\n  const pokesInterval = useRef();\n  const conversationsInterval = useRef();\n  const basketsInterval = useRef();\n\n  useEffect(() => {\n    clearInterval(pokesInterval.current);\n    clearInterval(conversationsInterval.current);\n    clearInterval(basketsInterval.current);\n    if (accessToken) {\n      getLoggedUserData(accessToken);\n      getLoggedUsersPokes(accessToken);\n      getLoggedUsersBaskets(accessToken);\n      getLoggedUsersConversations(accessToken);\n    }\n    if (!accessToken) {\n      setLoggedUsersPokes([]);\n      setLoggedUser({});\n      setLoggedUsersBaskets([]);\n      setLoggedUsersConversations([]);\n    }\n  }, [accessToken]);\n\n  const getLoggedUserData = async (accessToken) => {\n    const res = await fetchLoggedUser(accessToken);\n    if (res.error) console.log(res.error);\n    if (res.user) setLoggedUser(res.user);\n  };\n\n  const getLoggedUsersPokes = async (accessToken) => {\n    const getPokes = async () => {\n      const res = await fetchPokes(accessToken);\n      if (res.error) console.log(res.error);\n      if (res.pokes) setLoggedUsersPokes(res.pokes.reverse());\n    };\n    getPokes();\n    const interval = setInterval(async () => getPokes(), 5000);\n    pokesInterval.current = interval;\n    return () => clearInterval(pokesInterval.current);\n  };\n\n  const getLoggedUsersConversations = async (accessToken) => {\n    const getConversations = async () => {\n      const res = await fetchConversations(accessToken);\n      if (res.error) console.log(res.error);\n      if (res.conversations) setLoggedUsersConversations(res.conversations);\n    };\n    getConversations();\n    const interval = setInterval(async () => getConversations(), 5000);\n    conversationsInterval.current = interval;\n    return () => clearInterval(conversationsInterval.current);\n  };\n\n  const getLoggedUsersBaskets = async (accessToken) => {\n    const getBaskets = async () => {\n      const res = await fetchBaskets(accessToken);\n      if (res.error) console.log(res.error);\n      if (res.baskets) setLoggedUsersBaskets(res.baskets.reverse());\n    };\n    getBaskets();\n    const interval = setInterval(async () => getBaskets(), 5000);\n    basketsInterval.current = interval;\n    return () => clearInterval(basketsInterval.current);\n  };\n\n  return (\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <Header\n        setAccessToken={setAccessToken}\n        accessToken={accessToken}\n        loggedUser={loggedUser}\n        loggedUsersPokes={loggedUsersPokes}\n        loggedUsersConversations={loggedUsersConversations}\n        loggedUsersBaskets={loggedUsersBaskets}\n      />\n      <main>\n        <Switch>\n          <Route\n            path=\"/\"\n            exact\n            render={() =>\n              accessToken ? (\n                <Redirect to=\"/search\" />\n              ) : (\n                <Login\n                  setAccessToken={setAccessToken}\n                  setLoggedUser={setLoggedUser}\n                />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/registration\"\n            render={() =>\n              accessToken ? (\n                <Redirect to=\"/search\" />\n              ) : (\n                <Registartion setAccessToken={setAccessToken} />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/search\"\n            exact\n            render={() =>\n              accessToken ? (\n                <Search accessToken={accessToken} loggedUser={loggedUser} />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/user/:id\"\n            exact\n            render={() =>\n              accessToken ? (\n                <User accessToken={accessToken} />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/basket\"\n            render={() =>\n              accessToken ? (\n                <Basket accessToken={accessToken} />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/me\"\n            exact\n            render={() =>\n              accessToken ? (\n                <Me\n                  accessToken={accessToken}\n                  loggedUser={loggedUser}\n                  loggedUsersBaskets={loggedUsersBaskets}\n                />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/me/books\"\n            render={() =>\n              accessToken ? (\n                <MeBooks accessToken={accessToken} />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/me/pokes\"\n            render={() =>\n              accessToken ? (\n                <Pokes\n                  accessToken={accessToken}\n                  loggedUsersPokes={loggedUsersPokes}\n                  setLoggedUsersPokes={setLoggedUsersPokes}\n                  loggedUser={loggedUser}\n                />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/me/conversations\"\n            exact\n            render={() =>\n              accessToken ? (\n                <Conversations\n                  accessToken={accessToken}\n                  loggedUser={loggedUser}\n                  loggedUsersConversations={loggedUsersConversations}\n                />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/me/conversations/conversation\"\n            render={() =>\n              accessToken ? (\n                <SingleConversation\n                  accessToken={accessToken}\n                  getLoggedUsersConversations={getLoggedUsersConversations}\n                  conversationsInterval={conversationsInterval}\n                />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route\n            path=\"/me/baskets\"\n            render={() =>\n              accessToken ? (\n                <MeBaskets\n                  accessToken={accessToken}\n                  loggedUser={loggedUser}\n                  loggedUsersBaskets={loggedUsersBaskets}\n                  getLoggedUsersBaskets={getLoggedUsersBaskets}\n                  basketsInterval={basketsInterval}\n                />\n              ) : (\n                <Redirect to=\"/\" />\n              )\n            }\n          ></Route>\n          <Route render={() => <Error />}></Route>\n        </Switch>\n      </main>\n      <Footer />\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}