(this.webpackJsonppikabook=this.webpackJsonppikabook||[]).push([[0],{30:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),c=n(22),a=n.n(c),o=(n(30),n(2)),i=n.n(o),u=n(3),j=n(4),b=n(5),l=n(6),d=n.p+"static/media/pikabook.d219f79b.png",p=n(0),h=function(e){var t=e.setAccessToken,n=e.loggedUser._id,r=e.loggedUsersPokes,s=e.loggedUsersConversations,c=function(){return r.filter((function(e){return e.recipient._id===n})).filter((function(e){return!e.read})).length},a=function(){return s.filter((function(e){var t=e.messages[0],r=t.read,s=t.recipient;return!r&&s===n})).length};return Object(p.jsxs)("div",{className:"nav",children:[Object(p.jsxs)(b.c,{className:"nav-item",activeClassName:"is-active",to:"/search",children:[Object(p.jsx)("i",{className:"fas fa-search"}),Object(p.jsx)("span",{children:"Search"})]}),Object(p.jsxs)(b.c,{className:"nav-item",activeClassName:"is-active",to:"/me/conversations",children:[Object(p.jsx)("i",{className:"fas fa-envelope"}),Object(p.jsx)("span",{children:"Messages"}),a()>0&&Object(p.jsx)("div",{className:"alert",children:a()})]}),Object(p.jsxs)(b.c,{className:"nav-item",activeClassName:"is-active",to:"/me/basket",children:[Object(p.jsx)("i",{className:"fas fa-shopping-basket"}),Object(p.jsx)("span",{children:"Baskets"})]}),Object(p.jsxs)(b.c,{className:"nav-item",activeClassName:"is-active",to:"/me",exact:!0,children:[Object(p.jsx)("i",{className:"fas fa-user-circle"}),Object(p.jsx)("span",{children:"My profile"})]}),Object(p.jsxs)(b.c,{className:"nav-item",activeClassName:"is-active",to:"/me/books",children:[Object(p.jsx)("i",{className:"fas fa-book"}),Object(p.jsx)("span",{children:"My books"})]}),Object(p.jsx)(b.c,{className:"nav-item",activeClassName:"is-active",to:"/me/pokes",children:Object(p.jsx)("div",{className:"poke",children:c()>0&&Object(p.jsx)("div",{className:"alert",children:c()})})}),Object(p.jsx)(b.c,{className:"nav-item log-out",to:"/",onClick:function(){t("")},children:Object(p.jsx)("i",{className:"fas fa-power-off"})})]})},O=function(e){var t=e.setAccessToken,n=e.accessToken,r=e.loggedUser,s=e.loggedUsersPokes,c=e.loggedUsersConversations;return Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)("img",{className:"img-logo",src:d,alt:"Pikabook"}),n&&Object(p.jsx)(h,{setAccessToken:t,loggedUser:r,loggedUsersPokes:s,loggedUsersConversations:c})]})},x=n.p+"static/media/pikachu.8624571d.png",f=function(){return Object(p.jsxs)("footer",{children:[Object(p.jsx)("div",{className:"books"}),Object(p.jsxs)("div",{className:"about",children:[Object(p.jsxs)("p",{children:["Pikabook APP is for book lovers. Are you one of them? If so,"," ",Object(p.jsx)("span",{children:"pick a book"})," you want to read. Then suggest yours you have already read. That's all. ",Object(p.jsx)("span",{children:"Connect with other bookworms!"})]}),Object(p.jsxs)("div",{className:"github",children:["Application made as part of the ",Object(p.jsx)("b",{children:"CodersCamp2020"})," project.",Object(p.jsx)("br",{}),Object(p.jsx)(b.b,{to:{pathname:"https://github.com/lukaszdutka/CodersCamp2020.Project.FullStack-Node-React.PikaBook-frontend"},target:"_blank",children:"Visit Github for more information."})]})]}),Object(p.jsxs)("div",{className:"authors",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Created by Mangosteam"}),Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:"Mentor: \u0141ukasz Dutka"}),Object(p.jsx)("li",{children:"Aleksandra Cypko"}),Object(p.jsx)("li",{children:"Ma\u0142gorzata Dziewit"}),Object(p.jsx)("li",{children:"Daria Dziuba\u0142towska"}),Object(p.jsx)("li",{children:"Agata Ludwiczy\u0144ska"}),Object(p.jsx)("li",{children:"Mariusz Smar\u017c"})]})]}),Object(p.jsx)("img",{src:x,alt:"pikachu"})]})]})},k=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/auth",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})});case 2:if((r=e.sent).ok){e.next=10;break}return e.next=6,r.text();case 6:return r=e.sent,e.abrupt("return",{error:r});case 10:return e.next=12,r.json();case 12:return r=e.sent,e.abrupt("return",{accessToken:r.token});case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(e){var t=e.setAccessToken,n=Object(r.useState)(""),s=Object(j.a)(n,2),c=s[0],a=s[1],o=Object(r.useState)(""),l=Object(j.a)(o,2),d=l[0],h=l[1],O=Object(r.useState)(),x=Object(j.a)(O,2),f=x[0],m=x[1],v=function(e){return"loginEmail"===e.target.id?a(e.target.value):"loginPassword"===e.target.id?h(e.target.value):void 0},g=function(){var e=Object(u.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),m("Wait..."),e.next=4,k(c,d);case 4:(r=e.sent).error&&m(r.error),a(""),h(""),r.accessToken&&t(r.accessToken);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"logInAndRegistration",children:Object(p.jsxs)("form",{onSubmit:g,children:[Object(p.jsx)("h1",{children:"Log in"}),Object(p.jsx)("input",{className:"textInputDark",type:"email",id:"loginEmail",placeholder:"E-mail",value:c,onChange:v,required:!0}),Object(p.jsx)("input",{className:"textInputDark",type:"password",id:"loginPassword",placeholder:"Password",value:d,onChange:v,required:!0}),Object(p.jsx)("input",{type:"submit",value:"Log in",className:"buttonDark"}),Object(p.jsx)("div",{className:"status",children:"Wait..."===f?Object(p.jsx)("div",{className:"loader"}):f}),Object(p.jsx)("p",{children:Object(p.jsx)(b.b,{to:"/registration",children:"CREATE A NEW ACCOUNT!"})})]})})},v=function(){var e=Object(u.a)(i.a.mark((function e(t,n,r,s){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/users",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({name:t,email:n,password:r,location:s})});case 2:if((c=e.sent).ok){e.next=10;break}return e.next=6,c.text();case 6:return c=e.sent,e.abrupt("return",{created:!1,error:c});case 10:return e.next=12,c.json();case 12:return c=e.sent,e.abrupt("return",{created:!0});case 14:case"end":return e.stop()}}),e)})));return function(t,n,r,s){return e.apply(this,arguments)}}(),g=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)(""),a=Object(j.a)(c,2),o=a[0],b=a[1],d=Object(r.useState)(""),h=Object(j.a)(d,2),O=h[0],x=h[1],f=Object(r.useState)(""),k=Object(j.a)(f,2),m=k[0],g=k[1],w=Object(r.useState)(),N=Object(j.a)(w,2),y=N[0],C=N[1],S=Object(l.g)(),T=function(e){return"registerUsername"===e.target.id?s(e.target.value):"registerEmail"===e.target.id?b(e.target.value):"registerPassword"===e.target.id?x(e.target.value):"registerLocation"===e.target.id?g(e.target.value):void 0},_=function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C("Request is being sent"),t.preventDefault(),e.next=4,v(n,o,O,m);case 4:(r=e.sent).error?C(r.error):C("Account successfully created"),s(""),b(""),x(""),g(""),r.created&&setTimeout((function(){S.push("/")}),2e3);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"logInAndRegistration",children:Object(p.jsxs)("form",{onSubmit:_,children:[Object(p.jsx)("h1",{children:"Register"}),Object(p.jsx)("input",{type:"text",className:"textInputDark",id:"registerUsername",placeholder:"Name",value:n,onChange:T,required:!0}),Object(p.jsx)("input",{type:"email",className:"textInputDark",id:"registerEmail",placeholder:"E-mail",value:o,onChange:T,required:!0}),Object(p.jsx)("input",{type:"password",className:"textInputDark",id:"registerPassword",placeholder:"Password",value:O,onChange:T,required:!0}),Object(p.jsx)("input",{type:"text",className:"textInputDark",id:"registerLocation",placeholder:"Location",value:m,onChange:T}),Object(p.jsx)("input",{type:"submit",value:"Create a new account",className:"buttonDark"}),Object(p.jsx)("div",{className:"status",children:"Request is being sent"===y?Object(p.jsx)("div",{className:"loader"}):y})]})})},w=function(e){return e.map((function(t,n){return n<e.length-1?t+", ":t}))},N=function(e){var t=e.book,n=t.name,r=t.author,s=t.ownerId,c=t._id,a=Object(l.g)();return Object(p.jsxs)("div",{className:"book",children:[Object(p.jsxs)("div",{className:"bookData",children:[Object(p.jsx)("h3",{children:n}),Object(p.jsx)("p",{children:w(r)})]}),Object(p.jsxs)("div",{className:"userData",children:[Object(p.jsx)("p",{children:s.name}),Object(p.jsxs)("p",{children:[s.location," ",s.location&&Object(p.jsx)("i",{className:"fas fa-map-marker-alt",children:" "})]})]}),Object(p.jsx)("input",{className:"buttonDark",type:"button",value:"User's profile",id:c,onClick:function(e){a.push("/user/".concat(s._id),{bookId:e.target.id})}})]})},y=function(e){return S("https://pikabook.herokuapp.com/api/me/books",{},e)},C=function(e){return S("https://pikabook.herokuapp.com/api/users/".concat(e,"/books"))},S=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,s,c=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},r=c.length>2&&void 0!==c[2]?c[2]:"",e.next=4,fetch(t+new URLSearchParams(n),{method:"get",headers:{Authorization:"Bearer ".concat(r)}});case 4:if((s=e.sent).ok){e.next=12;break}return e.next=8,s.text();case 8:return s=e.sent,e.abrupt("return",{books:[],error:s});case 12:return e.next=14,s.json();case 14:return s=e.sent,e.abrupt("return",{books:s});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e,t,n){var r=e*t-t,s=r+t-1;return n.filter((function(e,t){return t>=r&&t<=s}))},_=function(e){var t=e.page,n=e.setPage,r=e.list,s=e.limit,c=e.scrollTo,a=function(){var e=Math.ceil(r.length/s);return e<1?1:e},o=function(e,r){var s=a();"next"===r&&t<s&&n(t+1),"previous"===r&&t>1&&n(t-1),"input"===r&&n(e.target.value),c&&c.current.scrollIntoView({behavior:"smooth",block:"start"})},i=a();return Object(p.jsxs)("div",{className:"pagination",children:[t>1&&Object(p.jsx)("button",{className:"buttonArrow prev",onClick:function(e){return o(e,"previous")},children:"\u2190"}),Object(p.jsx)("span",{children:"Page "}),Object(p.jsx)("input",{type:"number",value:t,min:"1",max:i,onChange:function(e){return o(e,"input")}}),Object(p.jsxs)("span",{children:[" out of ",i]}),t<i&&Object(p.jsx)("button",{className:"buttonArrow next",onClick:function(e){return o(e,"next")},children:"\u2192"})]})},D=function(e){var t=e.loggedUser,n=Object(r.useState)(""),s=Object(j.a)(n,2),c=s[0],a=s[1],o=Object(r.useState)(""),b=Object(j.a)(o,2),l=b[0],d=b[1],h=Object(r.useState)(""),O=Object(j.a)(h,2),x=O[0],f=O[1],k=Object(r.useState)(""),m=Object(j.a)(k,2),v=m[0],g=m[1],w=Object(r.useState)([]),y=Object(j.a)(w,2),C=y[0],D=y[1],P=Object(r.useState)("Let's start searching!"),A=Object(j.a)(P,2),I=A[0],U=A[1],B=Object(r.useState)(1),L=Object(j.a)(B,2),R=L[0],M=L[1],z=Object(r.useRef)(),E=function(e){return"searchTitle"===e.target.id?a(e.target.value):"searchAuthor"===e.target.id?f(e.target.value):"searchGenre"===e.target.id?g(e.target.value):"searchLocation"===e.target.id?d(e.target.value):void 0},q=function(){var e=Object(u.a)(i.a.mark((function e(n){var r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),U("Searching..."),M(1),e.next=5,S("https://pikabook.herokuapp.com/api/books?",{name:c,location:l,author:x,genres:v});case 5:(r=e.sent).error&&U(r.error),s=r.books.filter((function(e){return e.ownerId._id!==t._id})),D(s),0===s.length?U("No books found"):U("".concat(s.length," book(s) found"));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=T(R,10,C);return V=V.map((function(e){return Object(p.jsx)(N,{book:e},e._id)})),Object(p.jsxs)("div",{className:"search",children:[Object(p.jsx)("div",{className:"logInAndRegistration",children:Object(p.jsxs)("form",{onSubmit:q,children:[Object(p.jsx)("input",{className:"textInputDark",type:"text",id:"searchTitle",placeholder:"Book's title",value:c,onChange:E}),Object(p.jsx)("input",{className:"textInputDark",type:"text",id:"searchAuthor",placeholder:"Book's author",value:x,onChange:E}),Object(p.jsx)("input",{className:"textInputDark",type:"text",id:"searchGenre",placeholder:"Book's genre",value:v,onChange:E}),Object(p.jsx)("input",{className:"textInputDark",type:"text",id:"searchLocation",placeholder:"Location",value:l,onChange:E}),Object(p.jsx)("input",{className:"buttonDark",type:"submit",value:"Search"}),Object(p.jsx)("div",{className:"status",children:"Searching..."===I?Object(p.jsx)("div",{className:"loader"}):I})]})}),Object(p.jsxs)("div",{ref:z,children:[C.length>10&&Object(p.jsx)(_,{page:R,setPage:M,list:C,limit:10,scrollTo:z}),Object(p.jsx)("div",{className:"booksList",children:V}),C.length>10&&Object(p.jsx)(_,{page:R,setPage:M,list:C,limit:10,scrollTo:z})]})]})},P=function(e){return I("https://pikabook.herokuapp.com/api/me",e)},A=function(e){return I("https://pikabook.herokuapp.com/api/users/".concat(e))},I=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"get",headers:{Authorization:"Bearer ".concat(n)}});case 2:if((r=e.sent).ok){e.next=10;break}return e.next=6,r.text();case 6:return r=e.sent,e.abrupt("return",{error:r});case 10:return e.next=12,r.json();case 12:return r=e.sent,e.abrupt("return",{user:r});case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=n(25),B=function(e,t,n){if(!e.target.checked)return n.filter((function(t){return t._id!==e.target.id}));if(e.target.checked){var r=t.find((function(t){return t._id===e.target.id}));return[].concat(Object(U.a)(n),[r])}},L=function(e){var t=e.book,n=t._id,r=t.name,s=t.author,c=t.genres,a=t.publisher,o=t.year,i=t.description,u=e.type,j=e.handleCheckboxChange,b=e.inputDisabled,l=e.chosenBooks;return Object(p.jsxs)("div",{className:"bookContainer",children:[Object(p.jsxs)("div",{className:"bookInfo",children:[Object(p.jsx)("p",{className:"bookTitle",children:Object(p.jsx)("b",{children:r})}),s.length>0&&Object(p.jsxs)("p",{className:"author",children:[Object(p.jsx)("b",{children:"Author:"})," ",w(s)]}),a&&Object(p.jsxs)("p",{className:"publisher",children:[Object(p.jsx)("b",{children:"Publisher:"})," ",a]}),o&&Object(p.jsxs)("p",{className:"year",children:[Object(p.jsx)("b",{children:"Publication year:"})," ",o]}),c.length>0&&Object(p.jsxs)("p",{className:"genres",children:[Object(p.jsx)("b",{children:"Genre:"})," ",w(c)]}),i&&Object(p.jsxs)("p",{className:"description",children:[Object(p.jsx)("b",{children:"Description:"})," ",i]})]}),"checkbox"===u&&Object(p.jsx)("input",{className:"checkboxStyled",type:"checkbox",onChange:j,id:n,disabled:b,checked:l.some((function(e){return e._id===n}))})]})},R=function(e){var t=e.book,n=t.name,r=t.author,s=t.publisher,c=t.year,a=t._id;return Object(p.jsxs)("li",{children:[Object(p.jsx)("b",{children:n}),r.length>0&&" by ".concat(w(r))," ",s," ",c]},a)},M=function(){var e=Object(u.a)(i.a.mark((function e(t,n,r){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/pokes",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({recipient:n,books:r})});case 2:if((s=e.sent).ok){e.next=10;break}return e.next=6,s.text();case 6:return s=e.sent,e.abrupt("return",{error:s});case 10:return e.next=12,s.json();case 12:return s=e.sent,e.abrupt("return",{created:!0});case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),z=function(e){var t=e.accessToken,n=e.books,s=e.recipient,c=e.setPokeCreatorVisible,a=Object(r.useState)(""),o=Object(j.a)(a,2),b=o[0],l=o[1],d=function(){var e=Object(u.a)(i.a.mark((function e(){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map((function(e){return e._id})),e.next=3,M(t,s._id,r);case 3:(c=e.sent).error&&l(c.error),c.created&&l("Poke successfully sent!");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=n.map((function(e){return Object(p.jsx)(R,{book:e},e._id)}));return Object(p.jsxs)("div",{className:"creatorContainer",id:"pokeCreator",children:[!b&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{children:["Invite ",Object(p.jsx)("b",{children:s.name})," to browse your book collection and make him/her know that you showed interest in the following books in their possession:"]}),Object(p.jsx)("ul",{children:h.length>0?h:"None"})]}),b&&Object(p.jsx)("p",{children:Object(p.jsx)("b",{children:b})}),Object(p.jsxs)("div",{children:[!b&&Object(p.jsx)("button",{className:"buttonDark",onClick:d,children:"Confirm"}),Object(p.jsx)("button",{className:"buttonDark",onClick:function(){c(!1)},children:b?"Back":"Cancel"})]})]})},E=function(){var e=Object(u.a)(i.a.mark((function e(t,n,r){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/conversations",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({recipient:n,content:r})});case 2:if((s=e.sent).ok){e.next=10;break}return e.next=6,s.text();case 6:return s=e.sent,e.abrupt("return",{created:!1,error:s});case 10:return e.next=12,s.json();case 12:return s=e.sent,e.abrupt("return",{created:!0,message:s.content});case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),q=function(e){var t=e.accessToken,n=e.recipient,s=e.setMessageCreatorVisible,c=Object(r.useState)(""),a=Object(j.a)(c,2),o=a[0],b=a[1],l=Object(r.useState)(""),d=Object(j.a)(l,2),h=d[0],O=d[1],x=Object(r.useState)(""),f=Object(j.a)(x,2),k=f[0],m=f[1],v=function(){var e=Object(u.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t,n._id,o);case 2:(r=e.sent).error&&m(r.error),r.created&&m("Message successfully sent!"),r.message&&O(r.message);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"creatorContainer",id:"messageCreator",children:[Object(p.jsxs)("h1",{children:["Send a message to ",n.name]}),h?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("p",{className:"sentMessage",children:h})}):Object(p.jsx)("textarea",{onChange:function(e){b(e.target.value)},value:o}),k&&Object(p.jsx)("p",{children:Object(p.jsx)("b",{children:k})}),Object(p.jsxs)("div",{children:[!h&&Object(p.jsx)("button",{className:"buttonDark",onClick:v,children:"Confirm"}),Object(p.jsx)("button",{className:"buttonDark",onClick:function(){s(!1)},children:h?"Back":"Cancel"})]})]})},V=function(e){var t=e.accessToken,n=Object(l.i)().id,s=Object(r.useState)([]),c=Object(j.a)(s,2),a=c[0],o=c[1],b=Object(r.useState)(""),d=Object(j.a)(b,2),h=d[0],O=d[1],x=Object(r.useState)([]),f=Object(j.a)(x,2),k=f[0],m=f[1],v=Object(r.useState)(!1),g=Object(j.a)(v,2),w=g[0],N=g[1],y=Object(r.useState)(!1),S=Object(j.a)(y,2),D=S[0],P=S[1],I=Object(r.useState)(""),U=Object(j.a)(I,2),R=U[0],M=U[1],E=Object(r.useState)(1),V=Object(j.a)(E,2),J=V[0],F=V[1],G=Object(r.useRef)(),H=Object(l.g)(),W=Object(l.h)();Object(r.useEffect)((function(){M("Loading...");var e=function(){var e=Object(u.a)(i.a.mark((function e(){var t,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=W.state.bookId,e.next=3,C(n);case 3:(r=e.sent).error&&M(r.error),r.books&&(s=r.books.sort((function(e,n){return e._id===t?-1:n._id===t?1:0})),o(s),M(""));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(n);case 2:(t=e.sent).error&&console.log(t.error),t.user&&O(t.user);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[n,W.state.bookId]);var Y=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!D&&N(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e){m(B(e,a,k))},Q=T(J,4,a);return Q=Q.map((function(e){return Object(p.jsx)(L,{book:e,type:"checkbox",handleCheckboxChange:K,inputDisabled:w||D,chosenBooks:k},e._id)})),Object(p.jsxs)("div",{className:"userContainer",children:[Object(p.jsxs)("div",{className:"usersBooks",ref:G,children:[Object(p.jsx)("h1",{className:"booksHeading",children:"Books"}),R||Q,a.length>4&&Object(p.jsx)(_,{page:J,setPage:F,list:a,limit:4,scrollTo:G})]}),Object(p.jsxs)("div",{className:"userPanel",children:[Object(p.jsxs)("div",{className:"userInfo",children:[Object(p.jsx)("p",{children:h.name}),h.location&&Object(p.jsxs)("p",{children:[Object(p.jsx)("i",{className:"fas fa-map-marker-alt"})," ",h.location]}),Object(p.jsx)("button",{className:"buttonDark",onClick:function(){!w&&P(!0)},children:"Send message"})]}),Object(p.jsxs)("div",{className:"userInfo",children:[Object(p.jsx)("button",{className:"buttonDark",onClick:function(){H.push("/basket",{chosenBooks:k,user:h})},disabled:k.length<1,children:"Add to basket"}),Object(p.jsx)("p",{className:"or",children:"OR"}),Object(p.jsx)("button",{className:"buttonDark",onClick:Y,children:"Create poke"})]})]}),w&&Object(p.jsx)(z,{accessToken:t,recipient:h,books:k,setPokeCreatorVisible:N}),D&&Object(p.jsx)(q,{accessToken:t,recipient:h,setMessageCreatorVisible:P})]})},J=function(){return Object(p.jsx)("div",{children:"Me"})},F=function(){return Object(p.jsx)("div",{children:"Me_Books"})},G=function(){return Object(p.jsx)("div",{children:"Me_Baskets"})},H=function(e){var t=e.conversation,n=t.interlocutors,r=t.messages,s=e.loggedUser,c=Object(l.g)(),a=n.find((function(e){return e._id!==s._id})),o=r[0],i=new Date(o.date).toLocaleString(),u=o.sender===a._id?a.name:"You",j=o.content.split(" ").slice(0,5).join(" "),b=!o.read&&o.recipient===s._id;return Object(p.jsxs)("div",{className:b?"newMessage":"",children:[Object(p.jsx)("div",{children:Object(p.jsx)("b",{children:a.name})}),Object(p.jsx)("div",{children:i}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:u})," wrote:"," ",j===o.content?j:"".concat(j,"...")]}),Object(p.jsx)("button",{onClick:function(){c.push("/me/conversations/conversation",{interlocutor:a})},children:"Go to conversation"})]})},W=function(e){var t=e.loggedUser,n=e.loggedUsersConversations,s=Object(r.useState)(1),c=Object(j.a)(s,2),a=c[0],o=c[1],i=Object(r.useRef)(),u=n.sort((function(e,t){var n=new Date(e.messages[0].date);return new Date(t.messages[0].date)-n}));return u=(u=T(a,10,u)).map((function(e){return Object(p.jsx)(H,{conversation:e,loggedUser:t},e._id)})),Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"My conversations"}),Object(p.jsx)("div",{ref:i,children:n.length>10&&Object(p.jsx)(_,{page:a,setPage:o,list:n,limit:10,scrollTo:i})}),Object(p.jsx)("div",{children:u}),n.length>10&&Object(p.jsx)(_,{page:a,setPage:o,list:n,limit:10,scrollTo:i})]})},Y=n(24),K=n.n(Y),Q=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/me/conversations",{method:"get",headers:{Authorization:"Bearer ".concat(t)}});case 2:if((n=e.sent).ok){e.next=10;break}return e.next=6,n.text();case 6:return n=e.sent,e.abrupt("return",{error:n});case 10:return e.next=12,n.json();case 12:return n=e.sent,e.abrupt("return",{conversations:n});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(u.a)(i.a.mark((function e(t,n,r){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/me/conversations/".concat(n,"?")+new URLSearchParams(r),{method:"get",headers:{Authorization:"Bearer ".concat(t)}});case 2:if((s=e.sent).ok){e.next=10;break}return e.next=6,s.text();case 6:return s=e.sent,e.abrupt("return",{error:s});case 10:return e.next=12,s.json();case 12:return s=e.sent,e.abrupt("return",{conversation:s});case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Z=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/conversations/".concat(n),{method:"put",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:if((r=e.sent).ok){e.next=10;break}return e.next=6,r.text();case 6:return r=e.sent,e.abrupt("return",{error:r});case 10:return e.next=12,r.json();case 12:return r=e.sent,e.abrupt("return",{updated:!0});case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(e){var t=e.message,n=t.sender,r=t.content,s=t.date,c=e.interlocutor,a=new Date(s).toLocaleString(),o=c._id===n?"".concat(c.name,":"):"You:";return Object(p.jsxs)("div",{className:"You:"===o?"yourMessage":"interlocutorsMessage",children:[Object(p.jsx)("div",{children:a}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:o}),Object(p.jsx)("div",{children:r})]})]})},ee=function(e){var t=e.accessToken,n=e.getLoggedUsersConversations,s=e.conversationsInterval,c=Object(l.h)(),a=Object(l.g)(),o=c.state.interlocutor,b=Object(r.useState)([]),d=Object(j.a)(b,2),h=d[0],O=d[1],x=Object(r.useRef)(),f=Object(r.useState)(""),k=Object(j.a)(f,2),m=k[0],v=k[1],g=Object(r.useRef)(),w=Object(r.useState)(10),N=Object(j.a)(w,2),y=N[0],C=N[1],S=Object(r.useState)(""),T=Object(j.a)(S,2),_=T[0],D=T[1],P=Object(r.useRef)();Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.some((function(e){return!e.read}))){e.next=3;break}return e.next=3,Z(t,o._id);case 3:clearTimeout(s.current),n(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var n=Object(u.a)(i.a.mark((function n(){var r,s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return D("Loading..."),x.current=h,n.next=4,X(t,o._id,{limit:y});case 4:(r=n.sent).error&&D(r.error),s=r.conversation.messages.reverse(),K.a.isEqual(s,x.current)||(O(s),e(s));case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();clearInterval(g.current),r();var c=setInterval(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r());case 1:case"end":return e.stop()}}),e)}))),1e3);return g.current=c,function(){return clearInterval(g.current)}}),[t,o._id,y,h,n,s]),Object(r.useEffect)((function(){var e=P.current;!function(){var t=e.scrollHeight-e.clientHeight;e.scrollTo(0,t)}()}),[h]);var A=function(){var e=Object(u.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,E(t,o._id,m);case 3:(r=e.sent).error&&D(r.error),v("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=h.map((function(e){return Object(p.jsx)($,{message:e,interlocutor:o},e._id)}));return Object(p.jsxs)("div",{className:"singleConversationContainer",children:[Object(p.jsx)("div",{onClick:function(){a.push("/me/conversations")},children:"\u2716"}),Object(p.jsx)("button",{onClick:function(e){C(y+10)},children:"\u2191"}),Object(p.jsx)("div",{className:"messagesList",ref:P,children:0===h.length?_:I}),Object(p.jsxs)("form",{onSubmit:A,children:[Object(p.jsx)("textarea",{onChange:function(e){v(e.target.value)},value:m}),Object(p.jsx)("input",{type:"submit",value:"Send"})]})]})},te=n(19),ne=function(e){var t=e.bookList,n=e.creationDate,r=e.sender,s=e.read,c=e.handleOnClick;return Object(p.jsxs)("div",{className:!s&&"newPoke",children:[t.length>0?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{children:["On ",n," ",Object(p.jsx)("b",{children:r.name})," showed interest in the following books in your collection:"]}),Object(p.jsx)("ul",{children:t}),Object(p.jsx)("p",{children:"and invited you to browse his/hers collection."})," "]}):Object(p.jsxs)("p",{children:["On ",n," ",Object(p.jsx)("b",{children:r.name})," showed interest in your collection and invited you to browse his/hers collection"]}),Object(p.jsxs)("button",{onClick:c,children:["Visit ",Object(p.jsx)("b",{children:r.name}),"'s profile"]})]})},re=function(e){var t=e.bookList,n=e.creationDate,r=e.recipient,s=e.handleOnClick;return Object(p.jsxs)("div",{children:[t.length>0?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{children:["On ",n," you showed interest in the following books in"," ",Object(p.jsx)("b",{children:r.name}),"'s collection:"]}),Object(p.jsx)("ul",{children:t}),Object(p.jsx)("p",{children:"and invited him/her to browse your collection."})," "]}):Object(p.jsxs)("p",{children:["On ",n," you showed interest in ",Object(p.jsx)("b",{children:r.name}),"'s' collection and invited you him/her browse your collection."]}),Object(p.jsxs)("button",{onClick:s,children:["Visit ",Object(p.jsx)("b",{children:r.name}),"'s profile"]})]})},se=function(e){var t=e.poke,n=t.sender,r=t.recipient,s=t.books,c=t.date,a=t.read,o=e.type,i=Object(l.g)(),u=new Date(c).toLocaleString(),j=function(){"offered"===o&&i.push("/user/".concat(n._id),{bookId:""}),"sent"===o&&i.push("/user/".concat(r._id),{bookId:""})},b=s.map((function(e){return Object(p.jsx)(R,{book:e},e._id)}));return Object(p.jsxs)("div",{children:["received"===o&&Object(p.jsx)(ne,{bookList:b,creationDate:u,sender:n,read:a,handleOnClick:j}),"sent"===o&&Object(p.jsx)(re,{bookList:b,creationDate:u,recipient:r,handleOnClick:j})]})},ce=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/pokes/".concat(n),{method:"put",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:if((r=e.sent).ok){e.next=10;break}return e.next=6,r.text();case 6:return r=e.sent,e.abrupt("return",{error:r});case 10:return e.next=12,r.json();case 12:return r=e.sent,e.abrupt("return",{updated:!0});case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(e){var t=e.accessToken,n=e.loggedUsersPokes,s=e.setLoggedUsersPokes,c=e.loggedUser._id,a=Object(r.useState)(1),o=Object(j.a)(a,2),i=o[0],u=o[1],b=Object(r.useState)(1),l=Object(j.a)(b,2),d=l[0],h=l[1],O=Object(r.useState)([]),x=Object(j.a)(O,2),f=x[0],k=x[1],m=10;Object(r.useEffect)((function(){if(n.length!==f.length&&k(n),n.filter((function(e){return e.recipient._id===c})).some((function(e){return!e.read}))){var e=n.map((function(e){return ce(t,e._id),Object(te.a)(Object(te.a)({},e),{},{read:!0})}));s(e)}}),[t,n,s,f,c]);var v=f.filter((function(e){return e.recipient._id===c})),g=f.filter((function(e){return e.sender._id===c})),w=T(i,m,v);w=w.map((function(e){return Object(p.jsx)(se,{poke:e,type:"received"},e._id)}));var N=T(d,m,g);return N=N.map((function(e){return Object(p.jsx)(se,{poke:e,type:"sent"},e._id)})),Object(p.jsxs)("div",{className:"pokesContainer",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Pokes received:"}),v.length>m&&Object(p.jsx)(_,{page:i,setPage:u,list:v,limit:m}),Object(p.jsx)("div",{children:w}),v.length>m&&Object(p.jsx)(_,{page:i,setPage:u,list:v,limit:m})]}),Object(p.jsxs)("div",{children:[g.length>m&&Object(p.jsx)(_,{page:d,setPage:h,list:g,limit:m}),Object(p.jsx)("h1",{children:"Pokes sent:"}),Object(p.jsx)("div",{children:N}),g.length>m&&Object(p.jsx)(_,{page:d,setPage:h,list:g,limit:m})]})]})},oe=function(){var e=Object(u.a)(i.a.mark((function e(t,n,r,s){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/baskets",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({targetUserID:n,booksOffered:r,booksRequested:s})});case 2:if((c=e.sent).ok){e.next=10;break}return e.next=6,c.text();case 6:return c=e.sent,e.abrupt("return",{error:c});case 10:return e.next=12,c.json();case 12:return c=e.sent,e.abrupt("return",{created:!0});case 14:case"end":return e.stop()}}),e)})));return function(t,n,r,s){return e.apply(this,arguments)}}(),ie=function(e){var t=e.accessToken,n=e.recipient,s=e.booksOffered,c=e.booksRequested,a=e.setBasketCreatorVisible,o=Object(r.useState)(""),b=Object(j.a)(o,2),d=b[0],h=b[1],O=Object(l.g)(),x=function(){var e=Object(u.a)(i.a.mark((function e(){var r,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.map((function(e){return e._id})),a=s.map((function(e){return e._id})),e.next=4,oe(t,n._id,a,r);case 4:(o=e.sent).error&&h(o.error),o.created&&h("Offer successfully sent!"),setTimeout((function(){return O.push("/me/basket")}),1e3);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=s.map((function(e){return Object(p.jsx)(R,{book:e},e._id)})),k=c.map((function(e){return Object(p.jsx)(R,{book:e},e._id)}));return Object(p.jsxs)("div",{className:"creatorContainer",id:"basketCreator",children:[!d&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{children:["Confirm that you want to send ",n.name," an offer to exchange your books:"]}),Object(p.jsx)("ul",{children:f}),Object(p.jsx)("p",{children:"against his/her books"}),Object(p.jsx)("ul",{children:k})]}),d&&Object(p.jsx)("p",{children:Object(p.jsx)("b",{children:d})}),Object(p.jsxs)("div",{children:[!d&&Object(p.jsx)("button",{className:"buttonDark",onClick:x,children:"Confirm"}),!d&&Object(p.jsx)("button",{className:"buttonDark",onClick:function(){a(!1)},children:"Cancel"})]})]})},ue=function(e){var t=e.accessToken,n=Object(l.h)(),s=n.state.user,c=n.state.chosenBooks,a=Object(r.useState)([]),o=Object(j.a)(a,2),b=o[0],d=o[1],h=Object(r.useState)([]),O=Object(j.a)(h,2),x=O[0],f=O[1],k=Object(r.useState)(!1),m=Object(j.a)(k,2),v=m[0],g=m[1],w=Object(r.useState)(1),N=Object(j.a)(w,2),C=N[0],S=N[1],D=Object(r.useState)(1),P=Object(j.a)(D,2),A=P[0],I=P[1],U=10,R=Object(r.useRef)(),M=Object(r.useRef)();Object(r.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:(n=e.sent).error&&console.log(n.error),n.books&&f(n.books);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var z=function(e){d(B(e,x,b))},E=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=T(C,U,c);q=q.map((function(e){return Object(p.jsx)(L,{book:e},e._id)}));var V=T(A,U,x);return V=V.map((function(e){return Object(p.jsx)(L,{book:e,type:"checkbox",handleCheckboxChange:z,inputDisabled:v,chosenBooks:b},e._id)})),Object(p.jsxs)("div",{className:"createBasketContainer",children:[Object(p.jsxs)("div",{className:"basketBookList",ref:R,children:[Object(p.jsxs)("div",{className:"basketChosenBooks",children:[Object(p.jsxs)("h1",{className:"booksHeading",children:[s.name,"'s books"]}),q,c.length>U&&Object(p.jsx)(_,{page:C,setPage:S,list:c,limit:U,scrollTo:R})]}),Object(p.jsxs)("div",{className:"basketMyBooks",ref:M,children:[Object(p.jsx)("h1",{className:"booksHeading",children:"My books"}),V,x.length>U&&Object(p.jsx)(_,{page:A,setPage:I,list:x,limit:U,scrollTo:M})]})]}),Object(p.jsx)("button",{className:"buttonDark",onClick:E,disabled:b.length<1,children:"Create a basket"}),v&&Object(p.jsx)(ie,{accessToken:t,booksOffered:b,booksRequested:c,recipient:s,setBasketCreatorVisible:g})]})},je=function(){return Object(p.jsx)("div",{children:"Page does not exist."})},be=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pikabook.herokuapp.com/api/me/pokes",{method:"get",headers:{Authorization:"Bearer ".concat(t)}});case 2:if((n=e.sent).ok){e.next=10;break}return e.next=6,n.text();case 6:return n=e.sent,e.abrupt("return",{error:n});case 10:return e.next=12,n.json();case 12:return n=e.sent,e.abrupt("return",{pokes:n});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var le=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)({}),a=Object(j.a)(c,2),o=a[0],d=a[1],h=Object(r.useState)([]),x=Object(j.a)(h,2),k=x[0],v=x[1],w=Object(r.useState)([]),N=Object(j.a)(w,2),y=N[0],C=N[1],S=Object(r.useRef)(),T=Object(r.useRef)();Object(r.useEffect)((function(){clearInterval(S.current),clearInterval(T.current),n&&(_(n),A(n),I(n)),n||(v([]),d({}),C([]))}),[n]);var _=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:(n=e.sent).error&&console.log(n.error),n.user&&d(n.user);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=function(){var e=Object(u.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t);case 2:(n=e.sent).error&&console.log(n.error),n.pokes&&v(n.pokes.reverse());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())(),r=setInterval(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n());case 1:case"end":return e.stop()}}),e)}))),5e3),S.current=r,e.abrupt("return",(function(){return clearInterval(S.current)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=function(){var e=Object(u.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:(n=e.sent).error&&console.log(n.error),n.conversations&&C(n.conversations);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())(),r=setInterval(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n());case 1:case"end":return e.stop()}}),e)}))),5e3),T.current=r,e.abrupt("return",(function(){return clearInterval(T.current)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(b.a,{children:[Object(p.jsx)(O,{setAccessToken:s,accessToken:n,loggedUser:o,loggedUsersPokes:k,loggedUsersConversations:y}),Object(p.jsx)("main",{children:Object(p.jsxs)(l.d,{children:[Object(p.jsx)(l.b,{path:"/",exact:!0,render:function(){return n?Object(p.jsx)(l.a,{to:"/search"}):Object(p.jsx)(m,{setAccessToken:s,setLoggedUser:d})}}),Object(p.jsx)(l.b,{path:"/registration",render:function(){return n?Object(p.jsx)(l.a,{to:"/search"}):Object(p.jsx)(g,{setAccessToken:s})}}),Object(p.jsx)(l.b,{path:"/search",exact:!0,render:function(){return n?Object(p.jsx)(D,{accessToken:n,loggedUser:o}):Object(p.jsx)(l.a,{to:"/"})}}),Object(p.jsx)(l.b,{path:"/user/:id",exact:!0,render:function(){return n?Object(p.jsx)(V,{accessToken:n}):Object(p.jsx)(l.a,{to:"/"})}}),Object(p.jsx)(l.b,{path:"/basket",render:function(){return n?Object(p.jsx)(ue,{accessToken:n}):Object(p.jsx)(l.a,{to:"/"})}}),Object(p.jsx)(l.b,{path:"/me",exact:!0,render:function(){return n?Object(p.jsx)(J,{accessToken:n}):Object(p.jsx)(l.a,{to:"/"})}}),Object(p.jsx)(l.b,{path:"/me/books",render:function(){return n?Object(p.jsx)(F,{accessToken:n}):Object(p.jsx)(l.a,{to:"/"})}}),Object(p.jsx)(l.b,{path:"/me/pokes",render:function(){return n?Object(p.jsx)(ae,{accessToken:n,loggedUsersPokes:k,setLoggedUsersPokes:v,loggedUser:o}):Object(p.jsx)(l.a,{to:"/"})}}),Object(p.jsx)(l.b,{path:"/me/conversations",exact:!0,render:function(){return n?Object(p.jsx)(W,{accessToken:n,loggedUser:o,loggedUsersConversations:y}):Object(p.jsx)(l.a,{to:"/"})}}),Object(p.jsx)(l.b,{path:"/me/conversations/conversation",render:function(){return n?Object(p.jsx)(ee,{accessToken:n,getLoggedUsersConversations:I,conversationsInterval:T}):Object(p.jsx)(l.a,{to:"/"})}}),Object(p.jsx)(l.b,{path:"/me/basket",render:function(){return n?Object(p.jsx)(G,{accessToken:n}):Object(p.jsx)(l.a,{to:"/"})}}),Object(p.jsx)(l.b,{render:function(){return Object(p.jsx)(je,{})}})]})}),Object(p.jsx)(f,{})]})};a.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(le,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.09c125a4.chunk.js.map